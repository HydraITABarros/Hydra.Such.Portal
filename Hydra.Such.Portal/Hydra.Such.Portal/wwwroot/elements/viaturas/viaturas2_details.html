<link rel="import" href="/lib/paper-tabs-master/paper-tab.html" />
<link rel="import" href="/lib/paper-tabs-master/paper-tabs.html" />
<link rel="import" href="/lib/iron-pages-master/iron-pages.html" />
<link rel="import" href="/lib/iron-menu-behavior/iron-menubar-behavior.html" />
<link rel="import" href="/lib/iron-form/iron-form.html" />
<link rel="import" href="/lib/paper-button/paper-button.html" />
<link rel="import" href="/lib/paper-button/paper-button.html" />
<link rel="import" href="/lib/paper-toast-master/paper-toast.html" />
<link rel="import" href="/lib/vaadin-valo-theme/vaadin-checkbox.html">
<link rel="import" href="/lib/vaadin-text-field/vaadin-text-field.html">
<link rel="import" href="/lib/vaadin-grid/vaadin-grid.html">
<link rel="import" href="/lib/vaadin-grid/vaadin-grid-filter.html">
<link rel="import" href="/lib/vaadin-grid/vaadin-grid-sorter.html">
<link rel="import" href="/lib/vaadin-checkbox/vaadin-checkbox.html">
<link rel="import" href="/lib/vaadin-combo-box/vaadin-combo-box.html" />
<link rel="import" href="/lib/such-textarea/such-textarea.html">
<link rel="import" href="/lib/paper-collapse-item/paper-collapse-group.html">
<link rel="import" href="/lib/paper-collapse-item/paper-collapse-item.html">
<link rel="import" href="/lib/such-selectbox/such-selectbox.html">
<link rel="import" href="/lib/paper-dialog/paper-dialog.html" />
<link rel="import" href="/lib/paper-dialog-behavior/paper-dialog-behavior.html" />
<link rel="import" href="/lib/vaadin-valo-theme/vaadin-date-picker.html" />
<!--Datepicker com correção de bug que impede visualização nas grids -->
<link rel="import" href="/lib/vaadin-date-picker-3.0.0-alpha1/vaadin-date-picker.html">
<!--link rel="import" href="/lib/vaadin-date-picker/vaadin-date-picker.html"-->
<link rel="import" href="/lib/such-dropdown-menu/such-dropdown-menu.html" />

<!--ACORDEÃO-->
<link rel="import" href="/lib/paper-collapse-item/paper-collapse-group.html">
<link rel="import" href="/lib/paper-collapse-item/paper-collapse-item.html">

<dom-module id="x-viaturas2details">
    <template>
        <!-- STYLES -->
        <link rel="stylesheet" href="/lib/bootstrap/dist/css/bootstrap.css" />
        <link rel="stylesheet" href="/lib/font-awesome-4.7.0/css/font-awesome.min.css" />
        <link rel="stylesheet" href="/css/main.css" />

        <style>
            vaadin-combo-box {
                margin-top: 0px !important;
                width: 100% !important;
            }

            vaadin-date-picker {
                margin-top: 0px !important;
                width: 100% !important;
            }

            vaadin-text-field {
                margin-top: 0px !important;
                width: 100%;
            }

            paper-button {
                margin-top: 10px;
            }

            .break_clear {
                margin-top: 15px;
                margin-right: 0px !important;
                margin-left: 0px !important;
            }

            .break_frm {
                margin-top: 15px;
            }

            .label_custom {
                color: var(--valo-contrast-60pct) !important;
                font-weight: 500 !important;
                font-size: var(--valo-font-size-s) !important;
                margin-left: calc(var(--valo-text-field-border-radius, var(--valo-border-radius)) / 4) !important;
                margin-bottom: var(--valo-space-xs) !important;
                transition: color 0.4s !important;
                line-height: 1 !important;
                font-family: var(--valo-font-family) !important;
            }

            datetime-picker {
                border-radius: var(--valo-text-field-border-radius, var(--valo-border-radius));
                background-color: var(--valo-contrast-5pct);
                color: var(--valo-contrast-60pct) !important;
                width: 100%;
            }

            .marginSpace {
                margin: 0px !important;
            }

            textarea {
                background-color: #f5f5f5;
                border: none;
                border-radius: 3px 4px;
                align-self: baseline;
                font-weight: 500;
            }

                textarea:hover {
                    background-color: #eeeeee;
                }

                textarea:focus {
                    background-color: white;
                    border: none;
                    outline: 1px solid #eeeeee;
                    border-radius: 3px 4px;
                }

            datetime-picker {
                --datetime-selected-background: #71BCC1 !important;
                --datetime-background: #1f3133;
                --datetime-color: #eeeeee;
            }

            paper-collapse-item {
                --paper-item: {
                    padding: 0 0;
                };
                --paper-collapse-item-header: {
                    padding: 0 15px;
                    color: #333;
                    background-color: #f5f5f5;
                    border-bottom: solid #ddd 1px;
                    border-top-left-radius: 3px;
                    border-top-right-radius: 3px;
                };
            }

            .panel-body {
                padding-top: 0px !important;
            }

            vaadin-upload {
                padding: 0px;
            }

            vaadin-upload {
                --primary-color: rgba(48, 64, 84, 0.06);
                --paper-font-button_-_font-size: 13px;
                --primary-font-color: rgba(48, 64, 84, 0.91);
            }

            img {
                width: 100%;
                height: 100%;
            }
        </style>

        <!-- DROPDOWNS POPULATE -->
        <iron-ajax url="/PopulateDropdowns/GetViaturasTipos" last-response="{{LTiposViatura}}" auto method="post" handle-as="json" content-type="application/json"></iron-ajax>
        <iron-ajax url="/PopulateDropdowns/GetViaturas2ListaEstados" last-response="{{ListaEstados}}" auto method="post" handle-as="json" content-type="application/json"></iron-ajax>
        <iron-ajax url="/PopulateDropdowns/GetViaturas2ListaMarcas" last-response="{{ListaMarcas}}" auto method="post" handle-as="json" content-type="application/json"></iron-ajax>
        <iron-ajax url="/PopulateDropdowns/GetViaturas2ListaTipoCaixa" last-response="{{ListaTipoCaixa}}" auto method="post" handle-as="json" content-type="application/json"></iron-ajax>
        <iron-ajax url="/PopulateDropdowns/GetViaturas2ListaCategorias" last-response="{{ListaCategorias}}" auto method="post" handle-as="json" content-type="application/json"></iron-ajax>
        <iron-ajax url="/PopulateDropdowns/GetViaturas2ListaTipos" last-response="{{ListaTipos}}" auto method="post" handle-as="json" content-type="application/json"></iron-ajax>
        <iron-ajax url="/PopulateDropdowns/GetViaturas2ListaCombustiveis" last-response="{{ListaCombustiveis}}" auto method="post" handle-as="json" content-type="application/json"></iron-ajax>
        <iron-ajax url="/PopulateDropdowns/GetViaturas2ListaTiposPropriedades" last-response="{{ListaTiposPropriedades}}" auto method="post" handle-as="json" content-type="application/json"></iron-ajax>
        <iron-ajax url="/PopulateDropdowns/GetViaturas2ListaSegmentacoes" last-response="{{ListaSegmentacoes}}" auto method="post" handle-as="json" content-type="application/json"></iron-ajax>
        <iron-ajax url="/PopulateDropdowns/GetViaturas2ListaLocaisParqueamento" last-response="{{ListaLocaisParqueamento}}" auto method="post" handle-as="json" content-type="application/json"></iron-ajax>
        <iron-ajax url="/PopulateDropdowns/GetViaturas2InspecoesResultados" last-response="{{ListaInspecoesResultados}}" auto method="post" handle-as="json" content-type="application/json"></iron-ajax>
        <iron-ajax url="/PopulateDropdowns/GetViaturas2ListaCondutores" last-response="{{ListaCondutores}}" auto method="post" handle-as="json" content-type="application/json"></iron-ajax>
        <iron-ajax url="/PopulateDropdowns/GetViaturas2ListaResponsaveis" last-response="{{ListaResponsaveis}}" auto method="post" handle-as="json" content-type="application/json"></iron-ajax>
        <iron-ajax url="/PopulateDropdowns/GetViaturas2ListaSeguradoras" last-response="{{ListaSeguradoras}}" auto method="post" handle-as="json" content-type="application/json"></iron-ajax>
        <iron-ajax url="/PopulateDropdowns/GetViaturas2ListaImobilizadoNo" last-response="{{ListaImobilizadoNo}}" auto method="post" handle-as="json" content-type="application/json"></iron-ajax>
        <iron-ajax url="/PopulateDropdowns/GetViaturas2ListaAcidentesResponsabilidades" last-response="{{ListaAcidentesResponsabilidades}}" auto method="post" handle-as="json" content-type="application/json"></iron-ajax>
        <iron-ajax url="/PopulateDropdowns/GetViaturas2ListaContraOrdenacoesResponsabilidades" last-response="{{ListaContraOrdenacoesResponsabilidades}}" auto method="post" handle-as="json" content-type="application/json"></iron-ajax>
        <iron-ajax url="/PopulateDropdowns/GetViaturas2ListaCartaoCombustivelEmpresas" last-response="{{ListaCartaoCombustivelEmpresas}}" auto method="post" handle-as="json" content-type="application/json"></iron-ajax>
        <iron-ajax url="/PopulateDropdowns/GetViaturas2ListaCarTrackEmpresas" last-response="{{ListaCarTrackEmpresas}}" auto method="post" handle-as="json" content-type="application/json"></iron-ajax>
        <iron-ajax url="/PopulateDropdowns/GetViaturas2ListaViaVerdeEmpresas" last-response="{{ListaViaVerdeEmpresas}}" auto method="post" handle-as="json" content-type="application/json"></iron-ajax>
        <iron-ajax url="/PopulateDropdowns/GetViaturas2ListaAfetacaoAreaReal" last-response="{{ListaAfetacaoAreaReal}}" auto method="post" handle-as="json" content-type="application/json"></iron-ajax>
        <iron-ajax url="/PopulateDropdowns/GetViaturas2ListaTipoAtoAdministrativo" last-response="{{ListaTipoAtoAdministrativo}}" auto method="post" handle-as="json" content-type="application/json"></iron-ajax>
        <iron-ajax url="/PopulateDropdowns/GetViaturas2ListaDescricaoAto" last-response="{{ListaDescricaoAto}}" auto method="post" handle-as="json" content-type="application/json"></iron-ajax>
        <iron-ajax url="/PopulateDropdowns/GetViaturas2ListaAbastecimentosCombustiveis" last-response="{{ListaAbastecimentosCombustiveis}}" auto method="post" handle-as="json" content-type="application/json"></iron-ajax>
        <iron-ajax url="/PopulateDropdowns/GetViaturas2ListaRentingPeriodicidade" last-response="{{ListaRentingPeriodicidade}}" auto method="post" handle-as="json" content-type="application/json"></iron-ajax>

        <iron-ajax url="/PopulateDropdowns/GetRegionCodeViaturas2" last-response="{{ListaRegioes}}" auto method="post" handle-as="json" content-type="application/json"></iron-ajax>
        <iron-ajax url="/PopulateDropdowns/GetFunctionalAreaCodeViaturas2" last-response="{{ListaAreas}}" auto method="post" handle-as="json" content-type="application/json"></iron-ajax>
        <iron-ajax url="/PopulateDropdowns/GetCentrosCodeViaturas2" last-response="{{ListaCentrosAfetacao}}" auto method="post" handle-as="json" content-type="application/json"></iron-ajax>
        <iron-ajax url="/PopulateDropdowns/GetProjectNavList" last-response="{{ListaProjetos}}" auto method="post" handle-as="json" content-type="application/json"></iron-ajax>

        <iron-ajax url="/Viaturas/GetViatura2Details"
                   last-response="{{data}}"
                   method="post"
                   handle-as="json"
                   id="page_databound_ajax"
                   on-response="_responseProcessor"
                   content-type="application/json">
        </iron-ajax>

        <iron-ajax url="/Viaturas/DeleteViatura2"
                   last-response="{{deletedData}}"
                   method="post"
                   handle-as="json"
                   id="page_delete_ajax"
                   on-response="_responseDeleteProcessor"
                   content-type="application/json">
        </iron-ajax>

        <iron-ajax url="/Viaturas/loadimage/_default"
                   last-response="{{loadimageresult}}"
                   method="post"
                   handle-as="json"
                   id="page_loadImage_ajax"
                   content-type="application/json">
        </iron-ajax>

        <iron-ajax url="/Viaturas/EliminarFoto"
                   last-response="{{eliminarFotoResult}}"
                   method="post"
                   handle-as="json"
                   id="page_EliminarFoto_ajax"
                   on-response="_responseEliminarFoto"
                   content-type="application/json">
        </iron-ajax>

        <!--Imobilizados-->
        <iron-ajax url="/Viaturas/GetViaturas2TabImobilizados"
                   last-response="{{tabImobilizados}}"
                   method="post"
                   handle-as="json"
                   id="page_tabImobilizados_ajax"
                   content-type="application/json">
        </iron-ajax>

        <iron-ajax url="/Viaturas/CreateViaturas2Imobilizados"
                   last-response="{{createViaturas2ImobilizadosResult}}"
                   method="post"
                   handle-as="json"
                   id="page_CreateViaturas2Imobilizados_ajax"
                   on-response="_responseCreateViaturas2Imobilizados"
                   content-type="application/json">
        </iron-ajax>

        <iron-ajax url="/Viaturas/DeleteViaturas2Imobilizados"
                   last-response="{{deleteViaturas2ImobilizadosResult}}"
                   method="post"
                   handle-as="json"
                   id="page_DeleteViaturas2Imobilizados_ajax"
                   on-response="_responseDeleteViaturas2Imobilizados"
                   content-type="application/json">
        </iron-ajax>

        <!--Km-->
        <iron-ajax url="/Viaturas/GetViaturas2TabKm"
                   last-response="{{tabKm}}"
                   method="post"
                   handle-as="json"
                   id="page_tabKm_ajax"
                   content-type="application/json">
        </iron-ajax>

        <iron-ajax url="/Viaturas/CreateViaturas2Km"
                   last-response="{{createViaturas2KmResult}}"
                   method="post"
                   handle-as="json"
                   id="page_CreateViaturas2Km_ajax"
                   on-response="_responseCreateViaturas2Km"
                   content-type="application/json">
        </iron-ajax>

        <iron-ajax url="/Viaturas/DeleteViaturas2Km"
                   last-response="{{deleteViaturas2KmResult}}"
                   method="post"
                   handle-as="json"
                   id="page_DeleteViaturas2Km_ajax"
                   on-response="_responseDeleteViaturas2Km"
                   content-type="application/json">
        </iron-ajax>

        <!--Manutencao-->
        <iron-ajax url="/Viaturas/GetViaturas2TabManutencao"
                   last-response="{{tabManutencao}}"
                   method="post"
                   handle-as="json"
                   id="page_tabManutencao_ajax"
                   content-type="application/json">
        </iron-ajax>

        <iron-ajax url="/Viaturas/CreateViaturas2Manutencao"
                   last-response="{{createViaturas2ManutencaoResult}}"
                   method="post"
                   handle-as="json"
                   id="page_CreateViaturas2Manutencao_ajax"
                   on-response="_responseCreateViaturas2Manutencao"
                   content-type="application/json">
        </iron-ajax>

        <iron-ajax url="/Viaturas/DeleteViaturas2Manutencao"
                   last-response="{{deleteViaturas2ManutencaoResult}}"
                   method="post"
                   handle-as="json"
                   id="page_DeleteViaturas2Manutencao_ajax"
                   on-response="_responseDeleteViaturas2Manutencao"
                   content-type="application/json">
        </iron-ajax>

        <!--INSPEÇÕES-->
        <iron-ajax url="/Viaturas/GetViaturas2TabInspecao"
                   last-response="{{tabInspecao}}"
                   method="post"
                   handle-as="json"
                   id="page_tabInspecao_ajax"
                   content-type="application/json">
        </iron-ajax>

        <iron-ajax url="/Viaturas/CreateViaturas2Inspecao"
                   last-response="{{createViaturas2InspecaoResult}}"
                   method="post"
                   handle-as="json"
                   id="page_CreateViaturas2Inspecao_ajax"
                   on-response="_responseCreateViaturas2Inspecao"
                   content-type="application/json">
        </iron-ajax>

        <iron-ajax url="/Viaturas/DeleteViaturas2Inspecao"
                   last-response="{{deleteViaturas2InspecaoResult}}"
                   method="post"
                   handle-as="json"
                   id="page_DeleteViaturas2Inspecao_ajax"
                   on-response="_responseDeleteViaturas2Inspecao"
                   content-type="application/json">
        </iron-ajax>

        <!--CartaVerde-->
        <iron-ajax url="/Viaturas/GetViaturas2TabCartaVerde"
                   last-response="{{tabCartaVerde}}"
                   method="post"
                   handle-as="json"
                   id="page_tabCartaVerde_ajax"
                   content-type="application/json">
        </iron-ajax>

        <iron-ajax url="/Viaturas/CreateViaturas2CartaVerde"
                   last-response="{{createViaturas2CartaVerdeResult}}"
                   method="post"
                   handle-as="json"
                   id="page_CreateViaturas2CartaVerde_ajax"
                   on-response="_responseCreateViaturas2CartaVerde"
                   content-type="application/json">
        </iron-ajax>

        <iron-ajax url="/Viaturas/DeleteViaturas2CartaVerde"
                   last-response="{{deleteViaturas2CartaVerdeResult}}"
                   method="post"
                   handle-as="json"
                   id="page_DeleteViaturas2CartaVerde_ajax"
                   on-response="_responseDeleteViaturas2CartaVerde"
                   content-type="application/json">
        </iron-ajax>

        <!--ViaVerde-->
        <iron-ajax url="/Viaturas/GetViaturas2TabViaVerde"
                   last-response="{{tabViaVerde}}"
                   method="post"
                   handle-as="json"
                   id="page_tabViaVerde_ajax"
                   content-type="application/json">
        </iron-ajax>

        <iron-ajax url="/Viaturas/CreateViaturas2ViaVerde"
                   last-response="{{createViaturas2ViaVerdeResult}}"
                   method="post"
                   handle-as="json"
                   id="page_CreateViaturas2ViaVerde_ajax"
                   on-response="_responseCreateViaturas2ViaVerde"
                   content-type="application/json">
        </iron-ajax>

        <iron-ajax url="/Viaturas/DeleteViaturas2ViaVerde"
                   last-response="{{deleteViaturas2ViaVerdeResult}}"
                   method="post"
                   handle-as="json"
                   id="page_DeleteViaturas2ViaVerde_ajax"
                   on-response="_responseDeleteViaturas2ViaVerde"
                   content-type="application/json">
        </iron-ajax>

        <!--Acidentes-->
        <iron-ajax url="/Viaturas/GetViaturas2TabAcidentes"
                   last-response="{{tabAcidentes}}"
                   method="post"
                   handle-as="json"
                   id="page_tabAcidentes_ajax"
                   content-type="application/json">
        </iron-ajax>

        <iron-ajax url="/Viaturas/CreateViaturas2Acidentes"
                   last-response="{{createViaturas2AcidentesResult}}"
                   method="post"
                   handle-as="json"
                   id="page_CreateViaturas2Acidentes_ajax"
                   on-response="_responseCreateViaturas2Acidentes"
                   content-type="application/json">
        </iron-ajax>

        <iron-ajax url="/Viaturas/DeleteViaturas2Acidentes"
                   last-response="{{deleteViaturas2AcidentesResult}}"
                   method="post"
                   handle-as="json"
                   id="page_DeleteViaturas2Acidentes_ajax"
                   on-response="_responseDeleteViaturas2Acidentes"
                   content-type="application/json">
        </iron-ajax>

        <!--ContraOrdenacoes-->
        <iron-ajax url="/Viaturas/GetViaturas2TabContraOrdenacoes"
                   last-response="{{tabContraOrdenacoes}}"
                   method="post"
                   handle-as="json"
                   id="page_tabContraOrdenacoes_ajax"
                   content-type="application/json">
        </iron-ajax>

        <iron-ajax url="/Viaturas/CreateViaturas2ContraOrdenacoes"
                   last-response="{{createViaturas2ContraOrdenacoesResult}}"
                   method="post"
                   handle-as="json"
                   id="page_CreateViaturas2ContraOrdenacoes_ajax"
                   on-response="_responseCreateViaturas2ContraOrdenacoes"
                   content-type="application/json">
        </iron-ajax>

        <iron-ajax url="/Viaturas/DeleteViaturas2ContraOrdenacoes"
                   last-response="{{deleteViaturas2ContraOrdenacoesResult}}"
                   method="post"
                   handle-as="json"
                   id="page_DeleteViaturas2ContraOrdenacoes_ajax"
                   on-response="_responseDeleteViaturas2ContraOrdenacoes"
                   content-type="application/json">
        </iron-ajax>

        <!--Afetacao-->
        <iron-ajax url="/Viaturas/GetViaturas2TabAfetacao"
                   last-response="{{tabAfetacao}}"
                   method="post"
                   handle-as="json"
                   id="page_tabAfetacao_ajax"
                   content-type="application/json">
        </iron-ajax>

        <iron-ajax url="/Viaturas/CreateViaturas2Afetacao"
                   last-response="{{createViaturas2AfetacaoResult}}"
                   method="post"
                   handle-as="json"
                   id="page_CreateViaturas2Afetacao_ajax"
                   on-response="_responseCreateViaturas2Afetacao"
                   content-type="application/json">
        </iron-ajax>

        <iron-ajax url="/Viaturas/DeleteViaturas2Afetacao"
                   last-response="{{deleteViaturas2AfetacaoResult}}"
                   method="post"
                   handle-as="json"
                   id="page_DeleteViaturas2Afetacao_ajax"
                   on-response="_responseDeleteViaturas2Afetacao"
                   content-type="application/json">
        </iron-ajax>

        <!--CONDUTORES-->
        <iron-ajax url="/Viaturas/GetViaturas2TabCondutor"
                   last-response="{{tabCondutor}}"
                   method="post"
                   handle-as="json"
                   id="page_tabcondutor_ajax"
                   content-type="application/json">
        </iron-ajax>

        <iron-ajax url="/Viaturas/CreateViaturas2Condutor"
                   last-response="{{createViaturas2CondutorResult}}"
                   method="post"
                   handle-as="json"
                   id="page_CreateViaturas2Condutor_ajax"
                   on-response="_responseCreateViaturas2Condutor"
                   content-type="application/json">
        </iron-ajax>

        <iron-ajax url="/Viaturas/DeleteViaturas2Condutor"
                   last-response="{{deleteViaturas2CondutorResult}}"
                   method="post"
                   handle-as="json"
                   id="page_DeleteViaturas2Condutor_ajax"
                   on-response="_responseDeleteViaturas2Condutor"
                   content-type="application/json">
        </iron-ajax>

        <!--GESTORES-->
        <iron-ajax url="/Viaturas/GetViaturas2TabGestor"
                   last-response="{{tabGestor}}"
                   method="post"
                   handle-as="json"
                   id="page_tabgestor_ajax"
                   content-type="application/json">
        </iron-ajax>

        <iron-ajax url="/Viaturas/CreateViaturas2Gestor"
                   last-response="{{createViaturas2GestorResult}}"
                   method="post"
                   handle-as="json"
                   id="page_CreateViaturas2Gestor_ajax"
                   on-response="_responseCreateViaturas2Gestor"
                   content-type="application/json">
        </iron-ajax>

        <iron-ajax url="/Viaturas/DeleteViaturas2Gestor"
                   last-response="{{deleteViaturas2GestorResult}}"
                   method="post"
                   handle-as="json"
                   id="page_DeleteViaturas2Gestor_ajax"
                   on-response="_responseDeleteViaturas2Gestor"
                   content-type="application/json">
        </iron-ajax>

        <!--CartaoCombustivel-->
        <iron-ajax url="/Viaturas/GetViaturas2TabCartaoCombustivel"
                   last-response="{{tabCartaoCombustivel}}"
                   method="post"
                   handle-as="json"
                   id="page_tabCartaoCombustivel_ajax"
                   content-type="application/json">
        </iron-ajax>

        <iron-ajax url="/Viaturas/CreateViaturas2CartaoCombustivel"
                   last-response="{{createViaturas2CartaoCombustivelResult}}"
                   method="post"
                   handle-as="json"
                   id="page_CreateViaturas2CartaoCombustivel_ajax"
                   on-response="_responseCreateViaturas2CartaoCombustivel"
                   content-type="application/json">
        </iron-ajax>

        <iron-ajax url="/Viaturas/DeleteViaturas2CartaoCombustivel"
                   last-response="{{deleteViaturas2CartaoCombustivelResult}}"
                   method="post"
                   handle-as="json"
                   id="page_DeleteViaturas2CartaoCombustivel_ajax"
                   on-response="_responseDeleteViaturas2CartaoCombustivel"
                   content-type="application/json">
        </iron-ajax>

        <!--CarTrack-->
        <iron-ajax url="/Viaturas/GetViaturas2TabCarTrack"
                   last-response="{{tabCarTrack}}"
                   method="post"
                   handle-as="json"
                   id="page_tabCarTrack_ajax"
                   content-type="application/json">
        </iron-ajax>

        <iron-ajax url="/Viaturas/CreateViaturas2CarTrack"
                   last-response="{{createViaturas2CarTrackResult}}"
                   method="post"
                   handle-as="json"
                   id="page_CreateViaturas2CarTrack_ajax"
                   on-response="_responseCreateViaturas2CarTrack"
                   content-type="application/json">
        </iron-ajax>

        <iron-ajax url="/Viaturas/DeleteViaturas2CarTrack"
                   last-response="{{deleteViaturas2CarTrackResult}}"
                   method="post"
                   handle-as="json"
                   id="page_DeleteViaturas2CarTrack_ajax"
                   on-response="_responseDeleteViaturas2CarTrack"
                   content-type="application/json">
        </iron-ajax>

        <!--Abastecimentos-->
        <iron-ajax url="/Viaturas/GetViaturas2TabAbastecimentos"
                   last-response="{{tabAbastecimentos}}"
                   method="post"
                   handle-as="json"
                   id="page_tabAbastecimentos_ajax"
                   content-type="application/json">
        </iron-ajax>

        <iron-ajax url="/Viaturas/CreateViaturas2Abastecimentos"
                   last-response="{{createViaturas2AbastecimentosResult}}"
                   method="post"
                   handle-as="json"
                   id="page_CreateViaturas2Abastecimentos_ajax"
                   on-response="_responseCreateViaturas2Abastecimentos"
                   content-type="application/json">
        </iron-ajax>

        <iron-ajax url="/Viaturas/DeleteViaturas2Abastecimentos"
                   last-response="{{deleteViaturas2AbastecimentosResult}}"
                   method="post"
                   handle-as="json"
                   id="page_DeleteViaturas2Abastecimentos_ajax"
                   on-response="_responseDeleteViaturas2Abastecimentos"
                   content-type="application/json">
        </iron-ajax>

        <!--Abate-->
        <iron-ajax url="/Viaturas/GetViaturas2TabAbate"
                   last-response="{{tabAbate}}"
                   method="post"
                   handle-as="json"
                   id="page_tabAbate_ajax"
                   content-type="application/json">
        </iron-ajax>

        <iron-ajax url="/Viaturas/CreateViaturas2Abate"
                   last-response="{{createViaturas2AbateResult}}"
                   method="post"
                   handle-as="json"
                   id="page_CreateViaturas2Abate_ajax"
                   on-response="_responseCreateViaturas2Abate"
                   content-type="application/json">
        </iron-ajax>

        <iron-ajax url="/Viaturas/DeleteViaturas2Abate"
                   last-response="{{deleteViaturas2AbateResult}}"
                   method="post"
                   handle-as="json"
                   id="page_DeleteViaturas2Abate_ajax"
                   on-response="_responseDeleteViaturas2Abate"
                   content-type="application/json">
        </iron-ajax>

        <!--Substituicao-->
        <iron-ajax url="/Viaturas/GetViaturas2TabSubstituicao"
                   last-response="{{tabSubstituicao}}"
                   method="post"
                   handle-as="json"
                   id="page_tabSubstituicao_ajax"
                   content-type="application/json">
        </iron-ajax>

        <iron-ajax url="/Viaturas/CreateViaturas2Substituicao"
                   last-response="{{createViaturas2SubstituicaoResult}}"
                   method="post"
                   handle-as="json"
                   id="page_CreateViaturas2Substituicao_ajax"
                   on-response="_responseCreateViaturas2Substituicao"
                   content-type="application/json">
        </iron-ajax>

        <iron-ajax url="/Viaturas/DeleteViaturas2Substituicao"
                   last-response="{{deleteViaturas2SubstituicaoResult}}"
                   method="post"
                   handle-as="json"
                   id="page_DeleteViaturas2Substituicao_ajax"
                   on-response="_responseDeleteViaturas2Substituicao"
                   content-type="application/json">
        </iron-ajax>

        <!--RentingContrato-->
        <iron-ajax url="/Viaturas/GetViaturas2TabRentingContrato"
                   last-response="{{tabRentingContrato}}"
                   method="post"
                   handle-as="json"
                   id="page_tabRentingContrato_ajax"
                   on-response="_responseGetViaturas2TabRentingContrato"
                   content-type="application/json">
        </iron-ajax>

        <iron-ajax url="/Viaturas/CreateViaturas2RentingContrato"
                   last-response="{{createViaturas2RentingContratoResult}}"
                   method="post"
                   handle-as="json"
                   id="page_CreateViaturas2RentingContrato_ajax"
                   on-response="_responseCreateViaturas2RentingContrato"
                   content-type="application/json">
        </iron-ajax>

        <iron-ajax url="/Viaturas/DeleteViaturas2RentingContrato"
                   last-response="{{deleteViaturas2RentingContratoResult}}"
                   method="post"
                   handle-as="json"
                   id="page_DeleteViaturas2RentingContrato_ajax"
                   on-response="_responseDeleteViaturas2RentingContrato"
                   content-type="application/json">
        </iron-ajax>

        <!--RentingContratoAlteracoes-->
        <iron-ajax url="/Viaturas/GetViaturas2TabRentingContratoAlteracoes"
                   last-response="{{tabRentingContratoAlteracoes}}"
                   method="post"
                   handle-as="json"
                   id="page_tabRentingContratoAlteracoes_ajax"
                   content-type="application/json">
        </iron-ajax>

        <iron-ajax url="/Viaturas/CreateViaturas2RentingContratoAlteracoes"
                   last-response="{{createViaturas2RentingContratoAlteracoesResult}}"
                   method="post"
                   handle-as="json"
                   id="page_CreateViaturas2RentingContratoAlteracoes_ajax"
                   on-response="_responseCreateViaturas2RentingContratoAlteracoes"
                   content-type="application/json">
        </iron-ajax>

        <iron-ajax url="/Viaturas/DeleteViaturas2RentingContratoAlteracoes"
                   last-response="{{deleteViaturas2RentingContratoAlteracoesResult}}"
                   method="post"
                   handle-as="json"
                   id="page_DeleteViaturas2RentingContratoAlteracoes_ajax"
                   on-response="_responseDeleteViaturas2RentingContratoAlteracoes"
                   content-type="application/json">
        </iron-ajax>

        <iron-ajax url="/Viaturas/GetViaturas2ListaRentingContrato"
                   last-response="{{ListaRentingContrato}}"
                   method="post"
                   handle-as="json"
                   id="page_ListaRentingContrato_ajax"
                   content-type="application/json">
        </iron-ajax>

        <!--ESTADO-->
        <iron-ajax url="/Viaturas/GetViaturas2TabEstado"
                   last-response="{{tabEstado}}"
                   method="post"
                   handle-as="json"
                   id="page_tabestado_ajax"
                   content-type="application/json">
        </iron-ajax>

        <!--DIMENSAO-->
        <iron-ajax url="/Viaturas/GetViaturas2TabDimensao"
                   last-response="{{tabDimensao}}"
                   method="post"
                   handle-as="json"
                   id="page_tabdimensao_ajax"
                   content-type="application/json">
        </iron-ajax>

        <!--PARQUEAMENTO-->
        <iron-ajax url="/Viaturas/GetViaturas2TabParqueamento"
                   last-response="{{tabParqueamento}}"
                   method="post"
                   handle-as="json"
                   id="page_tabparqueamento_ajax"
                   content-type="application/json">
        </iron-ajax>

        <!--PROPRIEDADE-->
        <iron-ajax url="/Viaturas/GetViaturas2TabPropriedade"
                   last-response="{{tabPropriedade}}"
                   method="post"
                   handle-as="json"
                   id="page_tabpropriedade_ajax"
                   content-type="application/json">
        </iron-ajax>

        <!--PopulateDropdowns-->
        <iron-ajax url="/PopulateDropdowns/GetViaturas2ListaModelos"
                   last-response="{{ListaModelos}}"
                   method="post"
                   handle-as="json"
                   id="page_GetListaModelos_ajax"
                   on-response="_response_GetListaModelos_Processor"
                   content-type="application/json">
        </iron-ajax>

        <iron-ajax url="/PopulateDropdowns/GetViaturas2Centros"
                   last-response="{{ListaCentros}}"
                   method="post"
                   handle-as="json"
                   id="page_GetListaCentros_ajax"
                   on-response="_response_GetListaCentros_Processor"
                   content-type="application/json">
        </iron-ajax>

        <iron-ajax url="/PopulateDropdowns/GetViaturas2ListaPropriedades"
                   last-response="{{ListaPropriedades}}"
                   method="post"
                   handle-as="json"
                   id="page_GetListaPropriedades_ajax"
                   on-response="_response_GetListaPropriedades_Processor"
                   content-type="application/json">
        </iron-ajax>

        <div class="subMenu">
            <paper-button class="tablinks" on-tap="_goBack" title="Voltar"><i class="fa fa-arrow-left" aria-hidden="true"></i> Voltar</paper-button>

            <template is="dom-if" if="{{ _isCreate }}">
                <template is="dom-if" if="{{ _permissions.create }}">
                    <paper-button id="btnCreate" class="btnEdit tablinks" on-tap="_create"><i class="fa fa-plus" aria-hidden="true"></i>&nbsp; Criar Viatura</paper-button>
                </template>
            </template>

            <template is="dom-if" if="{{ !_isCreate }}">
                <template is="dom-if" if="{{ _permissions.update }}">
                    <paper-button id="btnUpdate" class="btnEdit tablinks" on-tap="_update"><i class="fa fa-floppy-o" aria-hidden="true"></i>&nbsp; Guardar</paper-button>
                </template>
            </template>

            <template is="dom-if" if="{{ !_isCreate }}">
                <template is="dom-if" if="{{ _permissions.delete }}">
                    <paper-button id="btnDelete" class="btnRemove tablinks" on-tap="_delete"><i class="fa fa-trash-o" aria-hidden="true"></i>&nbsp; Eliminar</paper-button>
                </template>
            </template>

            <template is="dom-if" if="{{ !_isCreate }}">
                <such-dropdown-menu on-value-changed="_viewMenuItemSelected" title="Consultar" items='[[ _viewMenuItems ]]'></such-dropdown-menu>
            </template>
        </div>


        <div class="row break_frm">
            <div class="col-sm-12 col-md-12 col-lg-12">
                <div class="panel panel-default">
                    <div class="panel-body">
                        <paper-tabs id="tabViatura" name="tabViatura" fit-container no-slide autoselect autoselect-delay="0" selected="{{selected}}">
                            <paper-tab hidden$="{{_isCreate}}">Informação</paper-tab>
                            <paper-tab>Geral</paper-tab>
                            <paper-tab hidden$="{{_isCreate}}">Utilização</paper-tab>
                            <paper-tab hidden$="{{_hideRenting}}">Renting</paper-tab>
                            <paper-tab hidden$="{{_isCreate}}">Histórico</paper-tab>
                        </paper-tabs>

                        <iron-pages selected="{{selected}}">
                            <!--Informação-->
                            <div>
                                <div hidden="{{ _isCreate }}">
                                    <div class="row break_clear">
                                        <div class="col-md-9">
                                            <div class="row break_clear">
                                                <div class="col-md-3">
                                                    <vaadin-text-field id="info_matricula" name="info_matricula" label="Matrícula" value="{{data.matricula}}" disabled placeholder="xx-xx-xx"></vaadin-text-field>
                                                </div>

                                                <div class="col-md-3">
                                                    <vaadin-text-field id="info_marca" name="info_marca" label="Marca" value="{{data.marca}}" disabled></vaadin-text-field>
                                                </div>

                                                <div class="col-md-3">
                                                    <vaadin-text-field id="info_modelo" name="info_modelo" label="Modelo" value="{{data.modelo}}" disabled></vaadin-text-field>
                                                </div>

                                                <div class="col-md-3">
                                                    <vaadin-text-field id="info_estado" name="info_estado" label="Estado" value="{{data.estado}}" disabled></vaadin-text-field>
                                                </div>
                                            </div>

                                            <div class="row break_clear">
                                                <div class="col-md-4">
                                                    <vaadin-text-field id="info_segmentacao" name="info_segmentacao" label="Segmentação" value="{{data.segmentacao}}" disabled></vaadin-text-field>
                                                </div>

                                                <div class="col-md-4">
                                                    <vaadin-text-field id="info_parqueamento" name="info_parqueamento" label="Local de Parqueamento" value="{{data.localParqueamento}}" disabled></vaadin-text-field>
                                                </div>

                                                <div class="col-md-3">
                                                    <vaadin-text-field id="info_propriedade" name="info_propriedade" label="Propriedade" value="{{data.propriedade}}" disabled></vaadin-text-field>
                                                </div>

                                                <div class="col-md-1">
                                                    <vaadin-text-field id="info_idade" name="info_idade" label="Idade" value="{{data.idade}}" disabled></vaadin-text-field>
                                                </div>
                                            </div>

                                            <div class="row break_clear">
                                                <div class="col-md-6">
                                                    <vaadin-text-field id="info_gestor" name="info_gestor" label="Responsável" value="{{data.gestor}}" disabled></vaadin-text-field>
                                                </div>

                                                <div class="col-md-6">
                                                    <vaadin-text-field id="info_condutor" name="info_condutor" label="Condutor" value="{{data.condutor}}" disabled></vaadin-text-field>
                                                </div>
                                            </div>

                                            <div class="row break_clear">
                                                <div class="col-md-4">
                                                    <vaadin-text-field id="info_garantiaSituacao" name="info_garantiaSituacao" label="Garantia Situação" value="{{data.garantiaSituacao}}" disabled></vaadin-text-field>
                                                </div>

                                                <div class="col-md-4">
                                                    <vaadin-text-field id="info_seguroSituacao" name="info_seguroSituacao" label="Seguro Situação" value="{{data.seguroSituacao}}" disabled></vaadin-text-field>
                                                </div>

                                                <div class="col-md-4">
                                                    <vaadin-date-picker id="info_dataFimSeguro" name="info_dataFimSeguro" label="Data Fim Seguro" value="{{data.dataFimSeguro}}" disabled placeholder="dd/MM/aaaa"></vaadin-date-picker>
                                                </div>
                                            </div>

                                            <div class="row break_clear">
                                                <div class="col-md-2">
                                                    <vaadin-date-picker id="info_ultimaInspecao" name="info_ultimaInspecao" label="Última Inspeção" value="{{data.ultimaInspecao}}" disabled placeholder="dd/MM/aaaa"></vaadin-date-picker>
                                                </div>

                                                <div class="col-md-2">
                                                    <vaadin-date-picker id="info_proximaInspecao" name="info_proximaInspecao" label="Próxima Inspeção (Previsão)" value="{{data.dataProximaInspecaoTexto}}" disabled placeholder="dd/MM/aaaa"></vaadin-date-picker>
                                                </div>

                                                <div class="col-md-2">
                                                    <vaadin-date-picker id="info_iucMesSeguinte" name="info_iucMesSeguinte" label="IUC" value="{{data.iuCate}}" disabled placeholder="dd/MM/aaaa"></vaadin-date-picker>
                                                </div>

                                                <div class="col-md-3">
                                                    <vaadin-text-field id="info_substituicao" name="info_substituicao" label="Substituição" value="{{data.substituicao}}" disabled></vaadin-text-field>
                                                </div>

                                                <div class="col-md-3">
                                                    <vaadin-text-field id="info_afetacao" name="info_afetacao" label="Afetação" value="{{data.afetacao}}" disabled></vaadin-text-field>
                                                </div>
                                            </div>

                                            <divpage_loadImage_ajax class="row break_clear">
                                            </divpage_loadImage_ajax>
                                        </div>

                                        <div class="col-md-3" align="center" style="width: 25%; height: 350px; background-size: contain;">
                                            <img id="info_imagem" name="info_imagem" src="/viaturas/loadimage/{{data.matricula}}" />

                                            <div class="col-md-10">
                                                <vaadin-upload id="info_uploadimage" name="info_uploadimage"
                                                               target="/Viaturas/UploadImage/{{data.matricula}}"
                                                               method="POST"
                                                               headers="{'Accept': 'application/json'}"
                                                               accept=".jpg"
                                                               hidden="{{ _lockFields }}"
                                                               timeout=15000>
                                                </vaadin-upload>
                                            </div>
                                            <div class="col-md-2">
                                                <paper-button raised id="btn_EliminarFoto" class="btnRemove" on-tap="_EliminarFoto" disabled="{{ _lockFields }}" title="Remover Imagem"><i class="fa fa-trash" aria-hidden="true"></i></paper-button>
                                            </div>
                                        </div>


                                    </div>
                                </div>
                            </div>

                            <!--Geral-->
                            <div>
                                <div class="row break_clear">
                                    <div class="col-md-2">
                                        <vaadin-text-field id="geral_matricula" name="geral_matricula" value="{{data.matricula}}" label="Matrícula" maxlength="20" disabled="{{ !_isCreate }}" placeholder="xx-xx-xx" required error-message="O campo Matrícula é de preenchimento obrigatório"></vaadin-text-field>
                                    </div>

                                    <div class="col-md-2">
                                        <such-selectbox id="geral_marca" name="geral_marca" value="{{data.idMarca}}" label="Marca"
                                                        items="[[ListaMarcas]]"
                                                        text-path="value"
                                                        value-path="id"
                                                        fields='[{"field":"value", "name":"Marca"}]'
                                                        on-value-changed="_GetListaModelos"
                                                        required error-message="O campo Marca é de preenchimento obrigatório"
                                                        disabled="{{ _lockFields }}">
                                        </such-selectbox>
                                    </div>

                                    <div class="col-md-2">
                                        <such-selectbox id="geral_modelo" name="geral_modelo" value="{{data.idModelo}}" label="Modelo"
                                                        items="[[ListaModelos]]"
                                                        text-path="value"
                                                        value-path="id"
                                                        fields='[{"field":"value", "name":"Marca"}]'
                                                        required error-message="O campo Modelo é de preenchimento obrigatório"
                                                        disabled="{{ _lockFields }}">
                                        </such-selectbox>
                                    </div>

                                    <div class="col-md-2">
                                        <vaadin-date-picker id="geral_data1Matricula" name="geral_data1Matricula" value="{{data.data1MatriculaTexto}}" label="Data 1ª Matricula" disabled="{{ _lockFields }}" placeholder="dd/MM/aaaa"></vaadin-date-picker>
                                    </div>

                                    <div class="col-md-2">
                                        <vaadin-date-picker id="geral_dataMatricula" name="geral_dataMatricula" value="{{data.dataMatriculaTexto}}" label="Data da Matrícula" disabled="{{ _lockFields }}" placeholder="dd/MM/aaaa" required error-message="O campo Data da Matrícula é de preenchimento obrigatório"></vaadin-date-picker>
                                    </div>

                                    <div class="col-md-2">
                                        <label id="label_Estado">Estado</label>
                                        <such-selectbox id="geral_estado" name="geral_estado" value="{{data.idEstado}}"
                                                        items="[[ListaEstados]]"
                                                        text-path="value"
                                                        value-path="id"
                                                        fields='[{"field":"value", "name":"Estado"}]'
                                                        on-value-changed="_openDlgEstado"
                                                        required error-message="O campo Estado é de preenchimento obrigatório">
                                        </such-selectbox>
                                    </div>
                                </div>

                                <div class="row break_clear">
                                    <div class="col-md-2">
                                        <such-selectbox id="geral_projeto" name="geral_projeto" value="{{data.noProjeto}}" label="Projeto"
                                                        items="[[ListaProjetos]]"
                                                        text-path="no"
                                                        value-path="no"
                                                        fields='[{"field":"no", "name":"Nº Projeto"}, {"field":"description", "name":"Descrição"}, {"field":"customerNo", "name":"Nº Cliente"}, {"field":"globalDimension1", "name":"Cód. Região"}, {"field":"globalDimension2", "name":"Cód. Área Funcional"}]'
                                                        disabled>
                                        </such-selectbox>
                                    </div>

                                    <div class="col-md-2">
                                        <such-selectbox id="geral_codRegiao" name="geral_codRegiao" value="{{data.codRegiao}}" label="Região"
                                                        items="[[ListaRegioes]]"
                                                        text-path="value"
                                                        value-path="id"
                                                        fields='[{"field":"id", "name":"Código"}, {"field":"value", "name":"Descrição"}]'
                                                        required error-message="O campo Região é de preenchimento obrigatório"
                                                        on-value-changed="_openDlgDimensao"
                                                        disabled="{{ _lockFields }}">
                                        </such-selectbox>
                                    </div>

                                    <div class="col-md-2">
                                        <such-selectbox id="geral_codAreaFuncional" name="geral_codAreaFuncional" value="{{data.codAreaFuncional}}" label="Área Funcional"
                                                        items="[[ListaAreas]]"
                                                        text-path="value"
                                                        value-path="id"
                                                        fields='[{"field":"id", "name":"Código"}, {"field":"value", "name":"Descrição"}]'
                                                        on-value-changed="_GetListaCentros"
                                                        required error-message="O campo Área Funcional é de preenchimento obrigatório"
                                                        disabled="{{ _lockFields }}">
                                        </such-selectbox>
                                    </div>

                                    <div class="col-md-2">
                                        <such-selectbox id="geral_codCentroResponsabilidade" name="geral_codCentroResponsabilidade" value="{{data.codCentroResponsabilidade}}" label="Centro de Responsabilidade"
                                                        items="[[ListaCentros]]"
                                                        text-path="value"
                                                        value-path="id"
                                                        fields='[{"field":"id", "name":"Código"}, {"field":"value", "name":"Descrição"}]'
                                                        required error-message="O campo Centro de Responsabilidade é de preenchimento obrigatório"
                                                        on-value-changed="_openDlgDimensao"
                                                        disabled="{{ _lockFields }}">
                                        </such-selectbox>
                                    </div>

                                    <div class="col-md-2">
                                        <such-selectbox id="geral_localParqueamento" name="geral_localParqueamento" value="{{data.idLocalParqueamento}}" label="Local de Parqueamento"
                                                        items="[[ListaLocaisParqueamento]]"
                                                        text-path="value"
                                                        value-path="id"
                                                        fields='[{"field":"value", "name":"Local de Parqueamento"}]'
                                                        on-value-changed="_openDlgParqueamento"
                                                        disabled="{{ _lockFields }}">
                                        </such-selectbox>
                                    </div>

                                    <div class="col-md-2 alignPoga">
                                        <vaadin-checkbox id="geral_alvaraLicenca" name="geral_alvaraLicenca" checked="{{data.alvaraLicenca}}" disabled="{{ _lockFields }}" type="number" class="alignRight">Alvará Licença</vaadin-checkbox>
                                    </div>
                                </div>

                                <div class="row break_clear">
                                    <div class="col-md-2">
                                        <such-selectbox id="geral_categoria" name="geral_categoria" value="{{data.idCategoria}}" label="Categoria"
                                                        items="[[ListaCategorias]]"
                                                        text-path="value"
                                                        value-path="id"
                                                        fields='[{"field":"value", "name":"Categoria"}]'
                                                        required error-message="O campo Categoria é de preenchimento obrigatório"
                                                        disabled="{{ _lockFields }}">
                                        </such-selectbox>
                                    </div>

                                    <div class="col-md-2">
                                        <such-selectbox id="geral_tipo" name="geral_tipo" value="{{data.idTipo}}" label="Tipo"
                                                        items="[[ListaTipos]]"
                                                        text-path="value"
                                                        value-path="id"
                                                        fields='[{"field":"value", "name":"Tipo"}]'
                                                        required error-message="O campo Tipo é de preenchimento obrigatório"
                                                        disabled="{{ _lockFields }}">
                                        </such-selectbox>
                                    </div>

                                    <div class="col-md-2">
                                        <such-selectbox id="geral_tipoPropriedade" name="geral_tipoPropriedade" value="{{data.idTipoPropriedade}}" label="Tipo de Propriedade"
                                                        items="[[ListaTiposPropriedades]]"
                                                        text-path="value"
                                                        value-path="id"
                                                        fields='[{"field":"value", "name":"Tipo"}]'
                                                        on-value-changed="_GetListaPropriedades"
                                                        required error-message="O campo Tipo de Propriedade é de preenchimento obrigatório"
                                                        disabled="{{ _lockFields }}">
                                        </such-selectbox>
                                    </div>

                                    <div class="col-md-2">
                                        <such-selectbox id="geral_propriedade" name="geral_propriedade" value="{{data.idPropriedade}}" label="Propriedade"
                                                        items="[[ListaPropriedades]]"
                                                        text-path="value"
                                                        value-path="id"
                                                        fields='[{"field":"value", "name":"Tipo"}]'
                                                        required error-message="O campo Propriedade é de preenchimento obrigatório"
                                                        on-value-changed="_openDlgPropriedade"
                                                        disabled="{{ _lockFields }}">
                                        </such-selectbox>
                                    </div>

                                    <div class="col-md-2">
                                        <vaadin-date-picker id="geral_dataAquisicao" name="geral_dataAquisicao" value="{{data.dataAquisicaoTexto}}" label="Data de Aquisição" disabled="{{ _lockFields }}" placeholder="dd/MM/aaaa"></vaadin-date-picker>
                                    </div>

                                    <div class="col-md-2">
                                        <vaadin-text-field id="geral_intervaloRevisoes" name="geral_intervaloRevisoes" value="{{data.intervaloRevisoes}}" label="Intervalo entre Revisões" disabled="{{ _lockFields }}" type="number" class="alignRight"><div slot="suffix">km</div></vaadin-text-field>
                                    </div>
                                </div>

                                <div class="row break_clear">
                                    <label id="labelCaracteristicas">Características</label>
                                    <div>
                                        <div class="col-md-2">
                                            <vaadin-text-field id="geral_potencia" name="geral_potencia" value="{{data.potencia}}" label="Potência" disabled="{{ _lockFields }}" type="number" class="alignRight"><div slot="suffix">kW</div></vaadin-text-field>
                                        </div>

                                        <div class="col-md-2">
                                            <vaadin-text-field id="geral_cilindrada" name="geral_cilindrada" value="{{data.cilindrada}}" label="Cilindrada" disabled="{{ _lockFields }}" type="number" class="alignRight"></vaadin-text-field>
                                        </div>

                                        <div class="col-md-2">
                                            <vaadin-combo-box id="geral_combustivel" name="geral_combustivel" items="[[ListaCombustiveis]]" item-value-path="id" item-label-path="value" value="{{data.idCombustivel}}" label="Combústivel" disabled="{{ _lockFields }}">
                                                <template>
                                                    <paper-icon-item>
                                                        <paper-item-body two-line>
                                                            <div>[[item.value]]</div>
                                                        </paper-item-body>
                                                    </paper-icon-item>
                                                </template>
                                            </vaadin-combo-box>
                                        </div>

                                        <div class="col-md-2">
                                            <vaadin-text-field id="geral_consumoReferencia" name="geral_consumoReferencia" value="{{data.consumoReferencia}}" label="Consumo Referência" disabled="{{ _lockFields }}" class="alignRight" on-value-changed="_ConvertDecimals"><div slot="suffix">l/100</div></vaadin-text-field>
                                        </div>

                                        <div class="col-md-2">
                                            <vaadin-text-field id="geral_capacidadeDeposito" name="geral_capacidadeDeposito" value="{{data.capacidadeDeposito}}" label="Capacidade Depósito" disabled="{{ _lockFields }}" type="number" class="alignRight"><div slot="suffix">l</div></vaadin-text-field>
                                        </div>

                                        <div class="col-md-2">
                                            <vaadin-text-field id="geral_autonomia" name="geral_autonomia" value="{{data.autonomia}}" label="Autonomia" disabled="{{ _lockFields }}" type="number" class="alignRight"><div slot="suffix">km</div></vaadin-text-field>
                                        </div>
                                    </div>

                                    <div>
                                        <div class="col-md-4">
                                            <vaadin-text-field id="geral_noQuadro" name="geral_noQuadro" value="{{data.noQuadro}}" label="Nº Quadro" disabled="{{ _lockFields }}" maxlength="50" required error-message="O campo Nº Quadro é de preenchimento obrigatório"></vaadin-text-field>
                                        </div>

                                        <div class="col-md-2">
                                            <vaadin-text-field id="geral_distanciaEixos" name="geral_distanciaEixos" value="{{data.distanciaEixos}}" label="Distância entre Eixos" disabled="{{ _lockFields }}" class="alignRight" on-value-changed="_ConvertDecimals"><div slot="suffix">m</div></vaadin-text-field>
                                        </div>

                                        <div class="col-md-2">
                                            <such-selectbox id="geral_tipoCaixa" name="geral_tipoCaixa" value="{{data.idTipoCaixa}}" label="Tipo de Caixa"
                                                            items="[[ListaTipoCaixa]]"
                                                            text-path="value"
                                                            value-path="id"
                                                            fields='[{"field":"value", "name":"Tipo de Caixa"}]'
                                                            disabled="{{ _lockFields }}">
                                            </such-selectbox>
                                        </div>

                                        <div class="col-md-2">
                                            <vaadin-text-field id="geral_cor" name="geral_cor" value="{{data.cor}}" label="Cor" disabled="{{ _lockFields }}" maxlength="40" required error-message="O campo Cor é de preenchimento obrigatório"></vaadin-text-field>
                                        </div>


                                        <div class="col-md-1">
                                            <vaadin-text-field id="geral_noAnosGarantia" name="geral_noAnosGarantia" value="{{data.noAnosGarantia}}" label="Nº Anos Garantia" disabled="{{ _lockFields }}" type="number" class="alignRight"></vaadin-text-field>
                                        </div>

                                        <div class="col-md-1">
                                            <vaadin-text-field id="geral_noLugares" name="geral_noLugares" value="{{data.noLugares}}" label="Nº de Lugares" disabled="{{ _lockFields }}" type="number" class="alignRight"></vaadin-text-field>
                                        </div>
                                    </div>
                                </div>

                                <div class="row break_clear">
                                    <div class="col-md-6">
                                        <label id="labelPeso">Peso</label>
                                        <div>
                                            <div class="col-md-4">
                                                <vaadin-text-field id="geral_pesoBruto" name="geral_pesoBruto" value="{{data.pesoBruto}}" label="Peso Bruto" disabled="{{ _lockFields }}" type="number" class="alignRight"><div slot="suffix">kg</div></vaadin-text-field>
                                            </div>

                                            <div class="col-md-4">
                                                <vaadin-text-field id="geral_cargaMaxima" name="geral_cargaMaxima" value="{{data.cargaMaxima}}" label="Carga Máxima" disabled="{{ _lockFields }}" type="number" class="alignRight"><div slot="suffix">kg</div></vaadin-text-field>
                                            </div>

                                            <div class="col-md-4">
                                                <vaadin-text-field id="geral_tara" name="geral_tara" value="{{data.tara}}" label="Tara" disabled="{{ _lockFields }}" type="number" class="alignRight"><div slot="suffix">kg</div></vaadin-text-field>
                                            </div>
                                        </div>

                                        <label id="labelPneus">Pneus</label>
                                        <div>
                                            <div class="col-md-6">
                                                <vaadin-text-field id="geral_pneuFrente" name="geral_pneuFrente" value="{{data.pneuFrente}}" label="Pneumáticos Frente" maxlength="50" disabled="{{ _lockFields }}"></vaadin-text-field>
                                            </div>

                                            <div class="col-md-6">
                                                <vaadin-text-field id="geral_pneuRetaguarda" name="geral_pneuRetaguarda" value="{{data.pneuRetaguarda}}" label="Pneumáticos Retaguarda" maxlength="50" disabled="{{ _lockFields }}"></vaadin-text-field>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="col-md-6">
                                        <such-textarea id="geral_observacoes" name="geral_observacoes" value="{{data.observacoes}}" label="Observações" disabled="{{ _lockFields }}" rows="7" maxlength="200"> </such-textarea>
                                    </div>
                                </div>

                                <div hidden="{{ _isCreate }}">
                                    <div class="row break_clear">
                                        <!--Imobilizado-->
                                        <paper-collapse-item class="panel-heading" header="Imobilizado">
                                            <vaadin-grid id="gridImobilizados" aria-label="gridImobilizados" items="{{ tabImobilizados }}" class="grid" multi-sort="true" column-reordering-allowed>
                                                <vaadin-grid-column resizable width="150px">
                                                    <template class="header">
                                                        <vaadin-grid-sorter path="noImobilizado">Nº Imobilizado</vaadin-grid-sorter>
                                                        <vaadin-grid-filter path="noImobilizado" />
                                                    </template>
                                                    <template>
                                                        {{item.noImobilizado}}
                                                    </template>
                                                </vaadin-grid-column>

                                                <vaadin-grid-column resizable width="150px">
                                                    <template class="header">
                                                        <vaadin-grid-sorter path="descricao">Descrição</vaadin-grid-sorter>
                                                        <vaadin-grid-filter path="descricao" />
                                                    </template>
                                                    <template>
                                                        {{item.descricao}}
                                                    </template>
                                                </vaadin-grid-column>

                                                <vaadin-grid-column resizable width="150px">
                                                    <template class="header">
                                                        <vaadin-grid-sorter path="dataCompraTexto">Data Compra</vaadin-grid-sorter>
                                                        <vaadin-grid-filter path="dataCompraTexto" />
                                                    </template>
                                                    <template>
                                                        {{item.dataCompraTexto}}
                                                    </template>
                                                </vaadin-grid-column>

                                                <vaadin-grid-column resizable width="175px">
                                                    <template class="header">
                                                        <vaadin-grid-sorter path="documentoCompra">Documento Compra</vaadin-grid-sorter>
                                                        <vaadin-grid-filter path="documentoCompra" />
                                                    </template>
                                                    <template>
                                                        {{item.documentoCompra}}
                                                    </template>
                                                </vaadin-grid-column>

                                                <vaadin-grid-column resizable width="150px">
                                                    <template class="header">
                                                        <vaadin-grid-sorter path="valorCompra">Valor Compra</vaadin-grid-sorter>
                                                        <vaadin-grid-filter path="valorCompra" />
                                                    </template>
                                                    <template>
                                                        <div class="alignRight">{{item.valorCompra}} €</div>
                                                    </template>
                                                </vaadin-grid-column>

                                                <vaadin-grid-column resizable width="200px">
                                                    <template class="header">
                                                        <vaadin-grid-sorter path="dataIncioAmortizacaoTexto">Data Incio Amortização</vaadin-grid-sorter>
                                                        <vaadin-grid-filter path="dataIncioAmortizacaoTexto" />
                                                    </template>
                                                    <template>
                                                        {{item.dataIncioAmortizacaoTexto}}
                                                    </template>
                                                </vaadin-grid-column>

                                                <vaadin-grid-column resizable width="200px">
                                                    <template class="header">
                                                        <vaadin-grid-sorter path="dataFinalAmortizacaoTexto">Data Final Amortização</vaadin-grid-sorter>
                                                        <vaadin-grid-filter path="dataFinalAmortizacaoTexto" />
                                                    </template>
                                                    <template>
                                                        {{item.dataFinalAmortizacaoTexto}}
                                                    </template>
                                                </vaadin-grid-column>

                                                <vaadin-grid-column resizable width="150px">
                                                    <template class="header">
                                                        <vaadin-grid-sorter path="valorAmortizado">Valor Amortizado</vaadin-grid-sorter>
                                                        <vaadin-grid-filter path="valorAmortizado" />
                                                    </template>
                                                    <template>
                                                        <div class="alignRight">{{item.valorAmortizado}} €</div>
                                                    </template>
                                                </vaadin-grid-column>

                                                <vaadin-grid-column resizable width="150px">
                                                    <template class="header">
                                                        <vaadin-grid-sorter path="vendaAbate">Venda / Abate</vaadin-grid-sorter>
                                                        <vaadin-grid-filter path="vendaAbate" />
                                                    </template>
                                                    <template>
                                                        {{item.vendaAbate}}
                                                    </template>
                                                </vaadin-grid-column>

                                                <vaadin-grid-column resizable width="175px">
                                                    <template class="header">
                                                        <vaadin-grid-sorter path="dataVendaAbateTexto">Data Venda / Abate</vaadin-grid-sorter>
                                                        <vaadin-grid-filter path="dataVendaAbateTexto" />
                                                    </template>
                                                    <template>
                                                        {{item.dataVendaAbateTexto}}
                                                    </template>
                                                </vaadin-grid-column>

                                                <vaadin-grid-column resizable width="200px">
                                                    <template class="header">
                                                        <vaadin-grid-sorter path="documentoVendaAbate">Documento Venda / Abate</vaadin-grid-sorter>
                                                        <vaadin-grid-filter path="documentoVendaAbate" />
                                                    </template>
                                                    <template>
                                                        {{item.documentoVendaAbate}}
                                                    </template>
                                                </vaadin-grid-column>

                                                <vaadin-grid-column resizable width="175px">
                                                    <template class="header">
                                                        <vaadin-grid-sorter path="valorVendaAbate">Valor Venda / Abate</vaadin-grid-sorter>
                                                        <vaadin-grid-filter path="valorVendaAbate" />
                                                    </template>
                                                    <template>
                                                        <div class="alignRight">{{item.valorVendaAbate}} €</div>
                                                    </template>
                                                </vaadin-grid-column>

                                                <vaadin-grid-column resizable width="175px">
                                                    <template class="header">
                                                        <vaadin-grid-sorter path="estadoImobilizado">Estado Imobilizado</vaadin-grid-sorter>
                                                        <vaadin-grid-filter path="estadoImobilizado" />
                                                    </template>
                                                    <template>
                                                        {{item.estadoImobilizado}}
                                                    </template>
                                                </vaadin-grid-column>

                                                <vaadin-grid-column resizable width="150px">
                                                    <template class="header">
                                                        <vaadin-grid-sorter path="bloqueado">Bloqueado</vaadin-grid-sorter>
                                                        <vaadin-grid-filter path="bloqueado" />
                                                    </template>
                                                    <template>
                                                        {{item.bloqueado}}
                                                    </template>
                                                </vaadin-grid-column>

                                                <vaadin-grid-column resizable width="100px">
                                                    <template class="header">
                                                    </template>
                                                    <template>
                                                        <center>
                                                            <paper-button id="btn_deleteImobilizados" class="btnRemove tableBtn" raised on-tap="_deleteImobilizados" disabled="{{ _lockFields }}" title="Eliminar"><i class="fa fa-trash" aria-hidden="true"></i></paper-button>
                                                        </center>
                                                    </template>
                                                </vaadin-grid-column>
                                            </vaadin-grid>

                                            <div style="padding-left:50px">
                                                <paper-collapse-item class="panel-heading" header="Inserir" closed>
                                                    <div class="row break_clear">
                                                        <div class="col-md-4">
                                                            <such-selectbox id="imobilizado_noImobilizado" name="imobilizado_noImobilizado" value="" label="Nº Imobilizado"
                                                                            items="[[ListaImobilizadoNo]]"
                                                                            text-path="descricao"
                                                                            value-path="noImobilizado"
                                                                            fields='[{"field":"noImobilizado", "name":"Nº Imobilizado"}, {"field":"descricao", "name":"Descrição"}]'
                                                                            disabled="{{ _lockFields }}">
                                                            </such-selectbox>
                                                        </div>

                                                        <div class="col-md-2" style="padding-top:15px">
                                                            <paper-button raised id="btn_createImbilizados" class="btnSave" on-tap="_createImobilizados" disabled="{{ _lockFields }}"><i class="fa fa-plus" aria-hidden="true"></i>&nbsp; Criar</paper-button>
                                                        </div>
                                                    </div>
                                                </paper-collapse-item>
                                            </div>
                                        </paper-collapse-item>
                                    </div>
                                </div>
                            </div>

                            <!--Utilização-->
                            <div>
                                <!--Kms-->
                                <div hidden="{{ _isCreate }}">
                                    <paper-collapse-item class="panel-heading" header="Kms" closed>
                                        <vaadin-grid id="gridKm" aria-label="gridKm" items="{{ tabKm }}" class="grid" multi-sort="true" column-reordering-allowed>
                                            <vaadin-grid-column resizable width="150px">
                                                <template class="header">
                                                    <vaadin-grid-sorter path="km">Km</vaadin-grid-sorter>
                                                    <vaadin-grid-filter path="km" />
                                                </template>
                                                <template>
                                                    <div class="alignRight">{{item.km}} km</div>
                                                </template>
                                            </vaadin-grid-column>

                                            <vaadin-grid-column resizable width="150px">
                                                <template class="header">
                                                    <vaadin-grid-sorter path="dataTexto">Data</vaadin-grid-sorter>
                                                    <vaadin-grid-filter path="dataTexto" />
                                                </template>
                                                <template>
                                                    {{item.dataTexto}}
                                                </template>
                                            </vaadin-grid-column>

                                            <vaadin-grid-column resizable width="100px">
                                                <template class="header">
                                                </template>
                                                <template>
                                                    <center>
                                                        <paper-button id="btn_deleteKm" class="btnRemove tableBtn" raised on-tap="_deleteKm" disabled="{{ _lockFields }}" title="Eliminar"><i class="fa fa-trash" aria-hidden="true"></i></paper-button>
                                                    </center>
                                                </template>
                                            </vaadin-grid-column>
                                        </vaadin-grid>

                                        <div style="padding-left:50px">
                                            <paper-collapse-item class="panel-heading" header="Inserir" closed>
                                                <div class="row break_clear">
                                                    <div class="col-md-2">
                                                        <vaadin-text-field id="km_km" name="km_km" label="Km" value="" type="number" class="alignRight" required error-message="O campo Km é de preenchimento obrigatório"><div slot="suffix">km</div></vaadin-text-field>
                                                    </div>

                                                    <div class="col-md-2">
                                                        <vaadin-date-picker id="km_data" name="km_data" label="Data" value="" placeholder="dd/MM/aaaa" required error-message="O campo Data é de preenchimento obrigatório"></vaadin-date-picker>
                                                    </div>

                                                    <div class="col-md-1" style="padding-top:15px">
                                                        <paper-button raised id="btn_createKm" class="btnSave" on-tap="_createKm" disabled="{{ _lockFields }}"><i class="fa fa-plus" aria-hidden="true"></i>&nbsp; Criar</paper-button>
                                                    </div>
                                                </div>
                                            </paper-collapse-item>
                                        </div>
                                    </paper-collapse-item>
                                </div>

                                <!--Abastecimentos-->
                                <div hidden="{{ _isCreate }}">
                                    <paper-collapse-item class="panel-heading" header="Abastecimentos" closed>
                                        <vaadin-grid id="gridAbastecimentos" aria-label="gridAbastecimentos" items="{{ tabAbastecimentos }}" class="grid" multi-sort="true" column-reordering-allowed>
                                            <vaadin-grid-column resizable width="150px">
                                                <template class="header">
                                                    <vaadin-grid-sorter path="dataTexto">Data</vaadin-grid-sorter>
                                                    <vaadin-grid-filter path="dataTexto" />
                                                </template>
                                                <template>
                                                    {{item.dataTexto}}
                                                </template>
                                            </vaadin-grid-column>

                                            <vaadin-grid-column resizable width="150px">
                                                <template class="header">
                                                    <vaadin-grid-sorter path="kms">Kms</vaadin-grid-sorter>
                                                    <vaadin-grid-filter path="kms" />
                                                </template>
                                                <template>
                                                    <div class="alignRight">{{item.kms}} km</div>
                                                </template>
                                            </vaadin-grid-column>

                                            <vaadin-grid-column resizable width="150px">
                                                <template class="header">
                                                    <vaadin-grid-sorter path="litros">Litros</vaadin-grid-sorter>
                                                    <vaadin-grid-filter path="litros" />
                                                </template>
                                                <template>
                                                    <div class="alignRight">{{item.litros}} l</div>
                                                </template>
                                            </vaadin-grid-column>

                                            <vaadin-grid-column resizable width="150px">
                                                <template class="header">
                                                    <vaadin-grid-sorter path="precoUnitario">Preço Unitário</vaadin-grid-sorter>
                                                    <vaadin-grid-filter path="precoUnitario" />
                                                </template>
                                                <template>
                                                    <div class="alignRight">{{item.precoUnitario}} €</div>
                                                </template>
                                            </vaadin-grid-column>

                                            <vaadin-grid-column resizable width="150px">
                                                <template class="header">
                                                    <vaadin-grid-sorter path="precoTotal">Preço Total</vaadin-grid-sorter>
                                                    <vaadin-grid-filter path="precoTotal" />
                                                </template>
                                                <template>
                                                    <div class="alignRight">{{item.precoTotal}} €</div>
                                                </template>
                                            </vaadin-grid-column>

                                            <vaadin-grid-column resizable width="150px">
                                                <template class="header">
                                                    <vaadin-grid-sorter path="combustivel">Combústivel</vaadin-grid-sorter>
                                                    <vaadin-grid-filter path="combustivel" />
                                                </template>
                                                <template>
                                                    {{item.combustivel}}
                                                </template>
                                            </vaadin-grid-column>

                                            <vaadin-grid-column resizable width="150px">
                                                <template class="header">
                                                    <vaadin-grid-sorter path="empresa">Empresa</vaadin-grid-sorter>
                                                    <vaadin-grid-filter path="empresa" />
                                                </template>
                                                <template>
                                                    {{item.empresa}}
                                                </template>
                                            </vaadin-grid-column>

                                            <vaadin-grid-column resizable width="150px">
                                                <template class="header">
                                                    <vaadin-grid-sorter path="cartao">Nº Cartão</vaadin-grid-sorter>
                                                    <vaadin-grid-filter path="cartao" />
                                                </template>
                                                <template>
                                                    {{item.cartao}}
                                                </template>
                                            </vaadin-grid-column>

                                            <vaadin-grid-column resizable width="150px">
                                                <template class="header">
                                                    <vaadin-grid-sorter path="local">Local</vaadin-grid-sorter>
                                                    <vaadin-grid-filter path="local" />
                                                </template>
                                                <template>
                                                    {{item.local}}
                                                </template>
                                            </vaadin-grid-column>

                                            <vaadin-grid-column resizable width="150px">
                                                <template class="header">
                                                    <vaadin-grid-sorter path="condutor">Condutor</vaadin-grid-sorter>
                                                    <vaadin-grid-filter path="condutor" />
                                                </template>
                                                <template>
                                                    {{item.condutor}}
                                                </template>
                                            </vaadin-grid-column>

                                            <vaadin-grid-column resizable width="150px">
                                                <template class="header">
                                                    <vaadin-grid-sorter path="noDocumento">Nº Documento</vaadin-grid-sorter>
                                                    <vaadin-grid-filter path="noDocumento" />
                                                </template>
                                                <template>
                                                    {{item.noDocumento}}
                                                </template>
                                            </vaadin-grid-column>

                                            <vaadin-grid-column resizable width="150px">
                                                <template class="header">
                                                    <vaadin-grid-sorter path="observacoes">Observações</vaadin-grid-sorter>
                                                    <vaadin-grid-filter path="observacoes" />
                                                </template>
                                                <template>
                                                    {{item.observacoes}}
                                                </template>
                                            </vaadin-grid-column>

                                            <vaadin-grid-column resizable width="100px">
                                                <template class="header">
                                                </template>
                                                <template>
                                                    <center>
                                                        <paper-button id="btn_deleteAbastecimentos" class="btnRemove tableBtn" raised on-tap="_deleteAbastecimentos" disabled="{{ _lockFields }}" title="Eliminar"><i class="fa fa-trash" aria-hidden="true"></i></paper-button>
                                                    </center>
                                                </template>
                                            </vaadin-grid-column>
                                        </vaadin-grid>

                                        <div style="padding-left:50px">
                                            <paper-collapse-item class="panel-heading" header="Inserir" closed>
                                                <div class="row break_clear">
                                                    <div class="col-md-2">
                                                        <vaadin-date-picker id="abastecimentos_data" name="abastecimentos_data" label="Data" value="" disabled="{{ _lockFields }}" placeholder="dd/MM/aaaa" required error-message="O campo Data é de preenchimento obrigatório"></vaadin-date-picker>
                                                    </div>

                                                    <div class="col-md-1">
                                                        <vaadin-text-field id="abastecimentos_kms" name="abastecimentos_Kms" label="Kms" value="" disabled="{{ _lockFields }}" type="number" class="alignRight"><div slot="suffix">km</div></vaadin-text-field>
                                                    </div>

                                                    <div class="col-md-1">
                                                        <vaadin-text-field id="abastecimentos_litros" name="abastecimentos_litros" label="Litros" value="" disabled="{{ _lockFields }}" class="alignRight" on-value-changed="_ConvertDecimals" required error-message="O campo Litros é de preenchimento obrigatório"><div slot="suffix">l</div></vaadin-text-field>
                                                    </div>

                                                    <div class="col-md-1">
                                                        <vaadin-text-field id="abastecimentos_precoUnitario" name="abastecimentos_precoUnitario" label="Preço Unitário" value="" disabled="{{ _lockFields }}" class="alignRight" on-value-changed="_ConvertDecimals"><div slot="suffix">€</div></vaadin-text-field>
                                                    </div>

                                                    <div class="col-md-1">
                                                        <vaadin-text-field id="abastecimentos_precoTotal" name="abastecimentos_precoTotal" label="Preço Total" value="" disabled="{{ _lockFields }}" class="alignRight" on-value-changed="_ConvertDecimals"><div slot="suffix">€</div></vaadin-text-field>
                                                    </div>

                                                    <div class="col-md-2">
                                                        <such-selectbox id="abastecimentos_idCombustivel" name="abastecimentos_idCombustivel" value="" label="Combústivel"
                                                                        items="[[ListaAbastecimentosCombustiveis]]"
                                                                        text-path="value"
                                                                        value-path="id"
                                                                        fields='[{"field":"value", "name":"Combústivel"}]'
                                                                        disabled="{{ _lockFields }}">
                                                        </such-selectbox>
                                                    </div>

                                                    <div class="col-md-2">
                                                        <such-selectbox id="abastecimentos_idCartao" name="abastecimentos_idCartao" value="" label="Nº Cartão"
                                                                        items="[[tabCartaoCombustivel]]"
                                                                        text-path="noCartao"
                                                                        value-path="id"
                                                                        fields='[{"field":"noCartao", "name":"Nº Cartão"}, {"field":"empresa", "name":"Empresa"}, {"field":"dataInicioTexto", "name":"Data Início"}, {"field":"dataFimTexto", "name":"Data Fim"}, {"field":"plafon", "name":"Plafon"}]'
                                                                        disabled="{{ _lockFields }}"
                                                                        on-value-changed="_updateAbastecimentosIDEmpresa">
                                                        </such-selectbox>
                                                    </div>

                                                    <div class="col-md-2">
                                                        <such-selectbox id="abastecimentos_idEmpresa" name="abastecimentos_idEmpresa" value="" label="Empresa"
                                                                        items="[[ListaCartaoCombustivelEmpresas]]"
                                                                        text-path="value"
                                                                        value-path="id"
                                                                        fields='[{"field":"value", "name":"Empresa"}]'
                                                                        disabled="{{ _lockFields }}">
                                                        </such-selectbox>
                                                    </div>
                                                </div>

                                                <div class="row break_clear">
                                                    <div class="col-md-2">
                                                        <vaadin-text-field id="abastecimentos_local" name="abastecimentos_local" label="Local" value="" disabled="{{ _lockFields }}" maxlength="200"></vaadin-text-field>
                                                    </div>

                                                    <div class="col-md-2">
                                                        <such-selectbox id="abastecimentos_idCondutor" name="abastecimentos_idCondutor" value="" label="Condutor"
                                                                        items="[[ListaCondutores]]"
                                                                        text-path="value"
                                                                        value-path="id"
                                                                        fields='[{"field":"value", "name":"Condutor"}, {"field":"extra", "name":"Nº Mecanográfico"}, {"field":"extra2", "name":"Mail"}]'
                                                                        disabled="{{ _lockFields }}">
                                                        </such-selectbox>
                                                    </div>

                                                    <div class="col-md-2">
                                                        <vaadin-text-field id="abastecimentos_noDocumento" name="abastecimentos_noDocumento" label="Nº Documento" value="" disabled="{{ _lockFields }}" maxlength="200"></vaadin-text-field>
                                                    </div>

                                                    <div class="col-md-5">
                                                        <vaadin-text-field id="abastecimentos_observacoes" name="abastecimentos_observacoes" label="Observações" value="" disabled="{{ _lockFields }}" maxlength="2000"></vaadin-text-field>
                                                    </div>

                                                    <div class="col-md-1" style="padding-top:15px">
                                                        <paper-button raised id="btn_createAbastecimentos" class="btnSave" on-tap="_createAbastecimentos" disabled="{{ _lockFields }}"><i class="fa fa-plus" aria-hidden="true"></i>&nbsp; Criar</paper-button>
                                                    </div>
                                                </div>
                                            </paper-collapse-item>
                                        </div>
                                    </paper-collapse-item>
                                </div>

                                <!--Manutenção-->
                                <div hidden="{{ _isCreate }}">
                                    <paper-collapse-item class="panel-heading" header="Manutenção" closed>
                                        <vaadin-grid id="gridManutencao" aria-label="gridManutencao" items="{{ tabManutencao }}" class="grid" multi-sort="true" column-reordering-allowed>
                                            <vaadin-grid-column resizable width="150px">
                                                <template class="header">
                                                    <vaadin-grid-sorter path="local">Local</vaadin-grid-sorter>
                                                    <vaadin-grid-filter path="local" />
                                                </template>
                                                <template>
                                                    {{item.local}}
                                                </template>
                                            </vaadin-grid-column>

                                            <vaadin-grid-column resizable width="150px">
                                                <template class="header">
                                                    <vaadin-grid-sorter path="dataInicioTexto">Data de Início</vaadin-grid-sorter>
                                                    <vaadin-grid-filter path="dataInicioTexto" />
                                                </template>
                                                <template>
                                                    {{item.dataInicioTexto}}
                                                </template>
                                            </vaadin-grid-column>

                                            <vaadin-grid-column resizable width="150px">
                                                <template class="header">
                                                    <vaadin-grid-sorter path="dataFimTexto">Data de Fim</vaadin-grid-sorter>
                                                    <vaadin-grid-filter path="dataFimTexto" />
                                                </template>
                                                <template>
                                                    {{item.dataFimTexto}}
                                                </template>
                                            </vaadin-grid-column>

                                            <vaadin-grid-column resizable width="150px">
                                                <template class="header">
                                                    <vaadin-grid-sorter path="observacoes">Observações</vaadin-grid-sorter>
                                                    <vaadin-grid-filter path="observacoes" />
                                                </template>
                                                <template>
                                                    {{item.observacoes}}
                                                </template>
                                            </vaadin-grid-column>

                                            <vaadin-grid-column resizable width="100px">
                                                <template class="header">
                                                </template>
                                                <template>
                                                    <center>
                                                        <paper-button id="btn_deleteManutencao" class="btnRemove tableBtn" raised on-tap="_deleteManutencao" disabled="{{ _lockFields }}" title="Eliminar"><i class="fa fa-trash" aria-hidden="true"></i></paper-button>
                                                    </center>
                                                </template>
                                            </vaadin-grid-column>
                                        </vaadin-grid>

                                        <div style="padding-left:50px">
                                            <paper-collapse-item class="panel-heading" header="Inserir" closed>
                                                <div class="row break_clear">
                                                    <div class="col-md-3">
                                                        <vaadin-text-field id="manutencao_local" name="manutencao_local" label="Local" value="" disabled="{{ _lockFields }}" maxlength="200" required error-message="O campo Local é de preenchimento obrigatório"></vaadin-text-field>
                                                    </div>

                                                    <div class="col-md-2">
                                                        <vaadin-date-picker id="manutencao_dataInicio" name="manutencao_dataInicio" label="Data de Início" value="" disabled="{{ _lockFields }}" placeholder="dd/MM/aaaa" required error-message="O campo Data de Início é de preenchimento obrigatório"></vaadin-date-picker>
                                                    </div>

                                                    <div class="col-md-2">
                                                        <vaadin-date-picker id="manutencao_dataFim" name="manutencao_dataFim" label="Data de Fim" value="" disabled="{{ _lockFields }}" placeholder="dd/MM/aaaa"></vaadin-date-picker>
                                                    </div>

                                                    <div class="col-md-4">
                                                        <vaadin-text-field id="manutencao_observacoes" name="manutencao_observacoes" label="Observações" value="" disabled="{{ _lockFields }}" maxlength="2000"></vaadin-text-field>
                                                    </div>

                                                    <div class="col-md-1" style="padding-top:15px">
                                                        <paper-button raised id="btn_createManutencao" class="btnSave" on-tap="_createManutencao" disabled="{{ _lockFields }}"><i class="fa fa-plus" aria-hidden="true"></i>&nbsp; Criar</paper-button>
                                                    </div>
                                                </div>
                                            </paper-collapse-item>
                                        </div>
                                    </paper-collapse-item>
                                </div>

                                <!--Inspeção-->
                                <div hidden="{{ _isCreate }}">
                                    <paper-collapse-item class="panel-heading" header="Inspeção" closed>
                                        <vaadin-grid id="gridInspecao" name="gridInspecao" aria-label="gridInspecao" items="{{ tabInspecao }}" class="grid" multi-sort="true" column-reordering-allowed>
                                            <vaadin-grid-column resizable width="150px">
                                                <template class="header">
                                                    <vaadin-grid-sorter path="dataInspecaoTexto">Data da Inspeção</vaadin-grid-sorter>
                                                    <vaadin-grid-filter path="dataInspecaoTexto" />
                                                </template>
                                                <template>
                                                    {{item.dataInspecaoTexto}}
                                                </template>
                                            </vaadin-grid-column>

                                            <vaadin-grid-column resizable width="150px">
                                                <template class="header">
                                                    <vaadin-grid-sorter path="kmInspecao">Km Inspeção</vaadin-grid-sorter>
                                                    <vaadin-grid-filter path="kmInspecao" />
                                                </template>
                                                <template>
                                                    <div class="alignRight">{{item.kmInspecao}} km</div>
                                                </template>
                                            </vaadin-grid-column>

                                            <vaadin-grid-column resizable width="150px">
                                                <template class="header">
                                                    <vaadin-grid-sorter path="resultado">Resultado</vaadin-grid-sorter>
                                                    <vaadin-grid-filter path="resultado" />
                                                </template>
                                                <template>
                                                    {{item.resultado}}
                                                </template>
                                            </vaadin-grid-column>

                                            <vaadin-grid-column resizable width="150px">
                                                <template class="header">
                                                    <vaadin-grid-sorter path="proximaInspecaoTexto">Próxima Inspeção</vaadin-grid-sorter>
                                                    <vaadin-grid-filter path="proximaInspecaoTexto" />
                                                </template>
                                                <template>
                                                    {{item.proximaInspecaoTexto}}
                                                </template>
                                            </vaadin-grid-column>

                                            <vaadin-grid-column resizable width="150px">
                                                <template class="header">
                                                    <vaadin-grid-sorter path="observacao">Observações</vaadin-grid-sorter>
                                                    <vaadin-grid-filter path="observacao" />
                                                </template>
                                                <template>
                                                    {{item.observacao}}
                                                </template>
                                            </vaadin-grid-column>

                                            <vaadin-grid-column resizable width="100px">
                                                <template class="header">
                                                </template>
                                                <template>
                                                    <center>
                                                        <paper-button id="btn_deleteInspecao" class="btnRemove tableBtn" raised on-tap="_deleteInspecao" disabled="{{ _lockFields }}" title="Eliminar"><i class="fa fa-trash" aria-hidden="true"></i></paper-button>
                                                    </center>
                                                </template>
                                            </vaadin-grid-column>
                                        </vaadin-grid>

                                        <div style="padding-left:50px">
                                            <paper-collapse-item class="panel-heading" header="Inserir" closed>
                                                <div class="row break_clear">
                                                    <div class="col-md-2">
                                                        <vaadin-date-picker id="inspecao_dataInspecao" name="inspecao_dataInspecao" label="Data da Inspeção" value="" disabled="{{ _lockFields }}" placeholder="dd/MM/aaaa" required error-message="O campo Data da Inspeção é de preenchimento obrigatório"></vaadin-date-picker>
                                                    </div>

                                                    <div class="col-md-1">
                                                        <vaadin-text-field id="inspecao_kmInspecao" name="inspecao_kmInspecao" label="Km Inspeção" value="" disabled="{{ _lockFields }}" type="number" class="alignRight" required error-message="O campo Km Inspeção é de preenchimento obrigatório"><div slot="suffix">km</div></vaadin-text-field>
                                                    </div>

                                                    <div class="col-md-2">
                                                        <vaadin-combo-box id="inspecao_resultado" name="inspecao_resultado" items="[[ListaInspecoesResultados]]" item-value-path="id" item-label-path="value" value="" label="Resultado" disabled="{{ _lockFields }}" required error-message="O campo Resultado é de preenchimento obrigatório">
                                                            <template>
                                                                <paper-icon-item>
                                                                    <paper-item-body two-line>
                                                                        <div>[[item.value]]</div>
                                                                    </paper-item-body>
                                                                </paper-icon-item>
                                                            </template>
                                                        </vaadin-combo-box>
                                                    </div>

                                                    <div class="col-md-2">
                                                        <vaadin-date-picker id="inspecao_proximaInspecao" name="inspecao_proximaInspecao" label="Próxima Inspeção" value="" disabled="{{ _lockFields }}" placeholder="dd/MM/aaaa" required error-message="O campo Próxima Inspeção é de preenchimento obrigatório"></vaadin-date-picker>
                                                    </div>

                                                    <div class="col-md-4">
                                                        <vaadin-text-field id="inspecao_observacoes" name="inspecao_observacoes" label="Observações" value="" disabled="{{ _lockFields }}" maxlength="200"></vaadin-text-field>
                                                    </div>

                                                    <div class="col-md-1" style="padding-top:15px">
                                                        <paper-button raised id="btnInspecao" class="btnSave" on-tap="_createInspecao" disabled="{{ _lockFields }}"><i class="fa fa-plus" aria-hidden="true"></i>&nbsp; Criar</paper-button>
                                                    </div>
                                                </div>
                                            </paper-collapse-item>
                                        </div>
                                    </paper-collapse-item>
                                </div>

                                <!--Seguro-->
                                <div hidden="{{ _isCreate }}">
                                    <paper-collapse-item class="panel-heading" header="Seguro" closed>
                                        <vaadin-grid id="gridCartaVerde" aria-label="gridCartaVerde" items="{{ tabCartaVerde }}" class="grid" multi-sort="true" column-reordering-allowed>
                                            <vaadin-grid-column resizable width="150px">
                                                <template class="header">
                                                    <vaadin-grid-sorter path="noApolice">Nº da Apólice</vaadin-grid-sorter>
                                                    <vaadin-grid-filter path="noApolice" />
                                                </template>
                                                <template>
                                                    {{item.noApolice}}
                                                </template>
                                            </vaadin-grid-column>

                                            <vaadin-grid-column resizable width="150px">
                                                <template class="header">
                                                    <vaadin-grid-sorter path="seguradora">Seguradora</vaadin-grid-sorter>
                                                    <vaadin-grid-filter path="seguradora" />
                                                </template>
                                                <template>
                                                    {{item.seguradora}}
                                                </template>
                                            </vaadin-grid-column>

                                            <vaadin-grid-column resizable width="150px">
                                                <template class="header">
                                                    <vaadin-grid-sorter path="dataInicioTexto">Data de Início</vaadin-grid-sorter>
                                                    <vaadin-grid-filter path="dataInicioTexto" />
                                                </template>
                                                <template>
                                                    {{item.dataInicioTexto}}
                                                </template>
                                            </vaadin-grid-column>

                                            <vaadin-grid-column resizable width="150px">
                                                <template class="header">
                                                    <vaadin-grid-sorter path="dataFimTexto">Data de Fim</vaadin-grid-sorter>
                                                    <vaadin-grid-filter path="dataFimTexto" />
                                                </template>
                                                <template>
                                                    {{item.dataFimTexto}}
                                                </template>
                                            </vaadin-grid-column>

                                            <vaadin-grid-column resizable width="150px">
                                                <template class="header">
                                                    <vaadin-grid-sorter path="valorPremioSeguro">Valor do Prémio</vaadin-grid-sorter>
                                                    <vaadin-grid-filter path="valorPremioSeguro" />
                                                </template>
                                                <template>
                                                    <div class="alignRight">{{item.valorPremioSeguro}} €</div>
                                                </template>
                                            </vaadin-grid-column>

                                            <vaadin-grid-column resizable width="100px">
                                                <template class="header">
                                                </template>
                                                <template>
                                                    <center>
                                                        <paper-button id="btn_deleteCartaVerde" class="btnRemove tableBtn" raised on-tap="_deleteCartaVerde" disabled="{{ _lockFields }}" title="Eliminar"><i class="fa fa-trash" aria-hidden="true"></i></paper-button>
                                                    </center>
                                                </template>
                                            </vaadin-grid-column>
                                        </vaadin-grid>

                                        <div style="padding-left:50px">
                                            <paper-collapse-item class="panel-heading" header="Inserir" closed>
                                                <div class="row break_clear">
                                                    <div class="col-md-2">
                                                        <vaadin-text-field id="cartaverde_noApolice" name="cartaverde_noApolice" label="Nº da Apólice" value="" disabled="{{ _lockFields }}" maxlength="200" required error-message="O campo Nº da Apólice é de preenchimento obrigatório"></vaadin-text-field>
                                                    </div>

                                                    <div class="col-md-3">
                                                        <such-selectbox id="cartaverde_seguradora" name="cartaverde_seguradora" value="" label="Seguradora"
                                                                        items="[[ListaSeguradoras]]"
                                                                        text-path="value"
                                                                        value-path="id"
                                                                        fields='[{"field":"value", "name":"Seguradora"}]'
                                                                        required error-message="O campo Seguradora é de preenchimento obrigatório"
                                                                        disabled="{{ _lockFields }}">
                                                        </such-selectbox>
                                                    </div>

                                                    <div class="col-md-2">
                                                        <vaadin-date-picker id="cartaverde_dataInicio" name="cartaverde_dataInicio" label="Data de Início" value="" disabled="{{ _lockFields }}" placeholder="dd/MM/aaaa" required error-message="O campo Data de Início é de preenchimento obrigatório"></vaadin-date-picker>
                                                    </div>

                                                    <div class="col-md-2">
                                                        <vaadin-date-picker id="cartaverde_dataFim" name="cartaverde_dataFim" label="Data de Fim" value="" disabled="{{ _lockFields }}" placeholder="dd/MM/aaaa"></vaadin-date-picker>
                                                    </div>

                                                    <div class="col-md-2">
                                                        <vaadin-text-field id="cartaverde_valorPremioSeguro" name="cartaverde_valorPremioSeguro" label="Valor do Prémio" value="" disabled="{{ _lockFields }}" type="number" class="alignRight"><div slot="suffix">€</div></vaadin-text-field>
                                                    </div>

                                                    <div class="col-md-1" style="padding-top:15px">
                                                        <paper-button raised id="btn_createCartaVerde" class="btnSave" on-tap="_createCartaVerde" disabled="{{ _lockFields }}"><i class="fa fa-plus" aria-hidden="true"></i>&nbsp; Criar</paper-button>
                                                    </div>
                                                </div>
                                            </paper-collapse-item>
                                        </div>
                                    </paper-collapse-item>
                                </div>

                                <!--Cartão Combústivel-->
                                <div hidden="{{ _isCreate }}">
                                    <paper-collapse-item class="panel-heading" header="Cartão Combústivel" closed>
                                        <vaadin-grid id="gridCartaoCombustivel" aria-label="gridCartaoCombustivel" items="{{ tabCartaoCombustivel }}" class="grid" multi-sort="true" column-reordering-allowed>
                                            <vaadin-grid-column resizable width="150px">
                                                <template class="header">
                                                    <vaadin-grid-sorter path="empresa">Empresa</vaadin-grid-sorter>
                                                    <vaadin-grid-filter path="empresa" />
                                                </template>
                                                <template>
                                                    {{item.empresa}}
                                                </template>
                                            </vaadin-grid-column>

                                            <vaadin-grid-column resizable width="150px">
                                                <template class="header">
                                                    <vaadin-grid-sorter path="noCartao">Nº Cartao</vaadin-grid-sorter>
                                                    <vaadin-grid-filter path="noCartao" />
                                                </template>
                                                <template>
                                                    {{item.noCartao}}
                                                </template>
                                            </vaadin-grid-column>

                                            <vaadin-grid-column resizable width="150px">
                                                <template class="header">
                                                    <vaadin-grid-sorter path="dataInicioTexto">Data Início</vaadin-grid-sorter>
                                                    <vaadin-grid-filter path="dataInicioTexto" />
                                                </template>
                                                <template>
                                                    {{item.dataInicioTexto}}
                                                </template>
                                            </vaadin-grid-column>

                                            <vaadin-grid-column resizable width="150px">
                                                <template class="header">
                                                    <vaadin-grid-sorter path="dataFimTexto">Data Fim</vaadin-grid-sorter>
                                                    <vaadin-grid-filter path="dataFimTexto" />
                                                </template>
                                                <template>
                                                    {{item.dataFimTexto}}
                                                </template>
                                            </vaadin-grid-column>

                                            <vaadin-grid-column resizable width="150px">
                                                <template class="header">
                                                    <vaadin-grid-sorter path="plafon">Plafon</vaadin-grid-sorter>
                                                    <vaadin-grid-filter path="plafon" />
                                                </template>
                                                <template>
                                                    {{item.plafon}}
                                                </template>
                                            </vaadin-grid-column>

                                            <vaadin-grid-column resizable width="100px">
                                                <template class="header">
                                                </template>
                                                <template>
                                                    <center>
                                                        <paper-button id="btn_deleteCartaoCombustivel" class="btnRemove tableBtn" raised on-tap="_deleteCartaoCombustivel" disabled="{{ _lockFields }}" title="Eliminar"><i class="fa fa-trash" aria-hidden="true"></i></paper-button>
                                                    </center>
                                                </template>
                                            </vaadin-grid-column>
                                        </vaadin-grid>

                                        <div style="padding-left:50px">
                                            <paper-collapse-item class="panel-heading" header="Inserir" closed>
                                                <div class="row break_clear">
                                                    <div class="col-md-3">
                                                        <such-selectbox id="cartaoCombustivel_idEmpresa" name="cartaoCombustivel_idEmpresa" value="" label="Empresa"
                                                                        items="[[ListaCartaoCombustivelEmpresas]]"
                                                                        text-path="value"
                                                                        value-path="id"
                                                                        fields='[{"field":"value", "name":"Empresa"}]'
                                                                        required error-message="O campo Empresa é de preenchimento obrigatório"
                                                                        disabled="{{ _lockFields }}">
                                                        </such-selectbox>
                                                    </div>

                                                    <div class="col-md-2">
                                                        <vaadin-text-field id="cartaoCombustivel_noCartao" name="cartaoCombustivel_noCartao" label="Nº Cartão" value="" disabled="{{ _lockFields }}" maxlength="200" required error-message="O campo Nº Cartão é de preenchimento obrigatório"></vaadin-text-field>
                                                    </div>

                                                    <div class="col-md-2">
                                                        <vaadin-date-picker id="cartaoCombustivel_dataInicio" name="cartaoCombustivel_dataInicio" label="Data Início" value="" placeholder="dd/MM/aaaa" required error-message="O campo Data Início é de preenchimento obrigatório"></vaadin-date-picker>
                                                    </div>

                                                    <div class="col-md-2">
                                                        <vaadin-date-picker id="cartaoCombustivel_dataFim" name="cartaoCombustivel_dataFim" label="Data Fim" value="" placeholder="dd/MM/aaaa"></vaadin-date-picker>
                                                    </div>

                                                    <div class="col-md-2">
                                                        <vaadin-text-field id="cartaoCombustivel_plafon" name="cartaoCombustivel_plafon" label="Plafon" value="" disabled="{{ _lockFields }}" maxlength="200"></vaadin-text-field>
                                                    </div>

                                                    <div class="col-md-1" style="padding-top:15px">
                                                        <paper-button raised id="btn_createCartaoCombustivel" class="btnSave" on-tap="_createCartaoCombustivel" disabled="{{ _lockFields }}"><i class="fa fa-plus" aria-hidden="true"></i>&nbsp; Criar</paper-button>
                                                    </div>
                                                </div>
                                            </paper-collapse-item>
                                        </div>
                                    </paper-collapse-item>
                                </div>

                                <!--Via Verde-->
                                <div hidden="{{ _isCreate }}">
                                    <paper-collapse-item class="panel-heading" header="Via Verde" closed>
                                        <vaadin-grid id="gridViaVerde" aria-label="gridViaVerde" items="{{ tabViaVerde }}" class="grid" multi-sort="true" column-reordering-allowed>
                                            <vaadin-grid-column resizable width="150px">
                                                <template class="header">
                                                    <vaadin-grid-sorter path="empresa">Empresa</vaadin-grid-sorter>
                                                    <vaadin-grid-filter path="empresa" />
                                                </template>
                                                <template>
                                                    {{item.empresa}}
                                                </template>
                                            </vaadin-grid-column>

                                            <vaadin-grid-column resizable width="150px">
                                                <template class="header">
                                                    <vaadin-grid-sorter path="noIdentificador">Nº Identificador</vaadin-grid-sorter>
                                                    <vaadin-grid-filter path="noIdentificador" />
                                                </template>
                                                <template>
                                                    {{item.noIdentificador}}
                                                </template>
                                            </vaadin-grid-column>

                                            <vaadin-grid-column resizable width="150px">
                                                <template class="header">
                                                    <vaadin-grid-sorter path="noContrato">Nº Contrato</vaadin-grid-sorter>
                                                    <vaadin-grid-filter path="noContrato" />
                                                </template>
                                                <template>
                                                    {{item.noContrato}}
                                                </template>
                                            </vaadin-grid-column>

                                            <vaadin-grid-column resizable width="150px">
                                                <template class="header">
                                                    <vaadin-grid-sorter path="dataTexto">Data</vaadin-grid-sorter>
                                                    <vaadin-grid-filter path="dataTexto" />
                                                </template>
                                                <template>
                                                    {{item.dataTexto}}
                                                </template>
                                            </vaadin-grid-column>

                                            <vaadin-grid-column resizable width="100px">
                                                <template class="header">
                                                </template>
                                                <template>
                                                    <center>
                                                        <paper-button id="btn_deleteViaVerde" class="btnRemove tableBtn" raised on-tap="_deleteViaVerde" disabled="{{ _lockFields }}" title="Eliminar"><i class="fa fa-trash" aria-hidden="true"></i></paper-button>
                                                    </center>
                                                </template>
                                            </vaadin-grid-column>
                                        </vaadin-grid>

                                        <div style="padding-left:50px">
                                            <paper-collapse-item class="panel-heading" header="Inserir" closed>
                                                <div class="row break_clear">
                                                    <div class="col-md-3">
                                                        <such-selectbox id="viaverde_idEmpresa" name="viaverde_idEmpresa" value="" label="Empresa"
                                                                        items="[[ListaViaVerdeEmpresas]]"
                                                                        text-path="value"
                                                                        value-path="id"
                                                                        fields='[{"field":"value", "name":"Empresa"}]'
                                                                        required error-message="O campo Empresa é de preenchimento obrigatório"
                                                                        disabled="{{ _lockFields }}">
                                                        </such-selectbox>
                                                    </div>

                                                    <div class="col-md-3">
                                                        <vaadin-text-field id="viaverde_noIdentificador" name="viaverde_noIdentificador" label="Nº Identificador" value="" disabled="{{ _lockFields }}" maxlength="200" required error-message="O campo Nº Identificador é de preenchimento obrigatório"></vaadin-text-field>
                                                    </div>


                                                    <div class="col-md-3">
                                                        <vaadin-text-field id="viaverde_noContrato" name="viaverde_noContrato" label="Nº Contrato" value="" disabled="{{ _lockFields }}" maxlength="200" required error-message="O campo Nº Contrato é de preenchimento obrigatório"></vaadin-text-field>
                                                    </div>

                                                    <div class="col-md-2">
                                                        <vaadin-date-picker id="viaverde_data" name="viaverde_data" label="Data" value="" disabled="{{ _lockFields }}" placeholder="dd/MM/aaaa"></vaadin-date-picker>
                                                    </div>

                                                    <div class="col-md-1" style="padding-top:15px">
                                                        <paper-button raised id="btn_createViaVerde" class="btnSave" on-tap="_createViaVerde" disabled="{{ _lockFields }}"><i class="fa fa-plus" aria-hidden="true"></i>&nbsp; Criar</paper-button>
                                                    </div>
                                                </div>
                                            </paper-collapse-item>
                                        </div>
                                    </paper-collapse-item>
                                </div>

                                <!--CarTrack-->
                                <div hidden="{{ _isCreate }}">
                                    <paper-collapse-item class="panel-heading" header="CarTrack" closed>
                                        <vaadin-grid id="gridCarTrack" aria-label="gridCarTrack" items="{{ tabCarTrack }}" class="grid" multi-sort="true" column-reordering-allowed>
                                            <vaadin-grid-column resizable width="150px">
                                                <template class="header">
                                                    <vaadin-grid-sorter path="empresa">Empresa</vaadin-grid-sorter>
                                                    <vaadin-grid-filter path="empresa" />
                                                </template>
                                                <template>
                                                    {{item.empresa}}
                                                </template>
                                            </vaadin-grid-column>

                                            <vaadin-grid-column resizable width="150px">
                                                <template class="header">
                                                    <vaadin-grid-sorter path="dataInicioTexto">Data Início</vaadin-grid-sorter>
                                                    <vaadin-grid-filter path="dataInicioTexto" />
                                                </template>
                                                <template>
                                                    {{item.dataInicioTexto}}
                                                </template>
                                            </vaadin-grid-column>

                                            <vaadin-grid-column resizable width="150px">
                                                <template class="header">
                                                    <vaadin-grid-sorter path="dataFimTexto">Data Fim</vaadin-grid-sorter>
                                                    <vaadin-grid-filter path="dataFimTexto" />
                                                </template>
                                                <template>
                                                    {{item.dataFimTexto}}
                                                </template>
                                            </vaadin-grid-column>

                                            <vaadin-grid-column resizable width="100px">
                                                <template class="header">
                                                </template>
                                                <template>
                                                    <center>
                                                        <paper-button id="btn_deleteCarTrack" class="btnRemove tableBtn" raised on-tap="_deleteCarTrack" disabled="{{ _lockFields }}" title="Eliminar"><i class="fa fa-trash" aria-hidden="true"></i></paper-button>
                                                    </center>
                                                </template>
                                            </vaadin-grid-column>
                                        </vaadin-grid>

                                        <div style="padding-left:50px">
                                            <paper-collapse-item class="panel-heading" header="Inserir" closed>
                                                <div class="row break_clear">
                                                    <div class="col-md-4">
                                                        <such-selectbox id="carTrack_idEmpresa" name="carTrack_idEmpresa" value="" label="Empresa"
                                                                        items="[[ListaCarTrackEmpresas]]"
                                                                        text-path="value"
                                                                        value-path="id"
                                                                        fields='[{"field":"value", "name":"Empresa"}]'
                                                                        required error-message="O campo Empresa é de preenchimento obrigatório"
                                                                        disabled="{{ _lockFields }}">
                                                        </such-selectbox>
                                                    </div>

                                                    <div class="col-md-2">
                                                        <vaadin-date-picker id="carTrack_dataInicio" name="carTrack_dataInicio" label="Data Início" value="" placeholder="dd/MM/aaaa" required error-message="O campo Data Início é de preenchimento obrigatório"></vaadin-date-picker>
                                                    </div>

                                                    <div class="col-md-2">
                                                        <vaadin-date-picker id="carTrack_dataFim" name="carTrack_dataFim" label="Data Fim" value="" placeholder="dd/MM/aaaa"></vaadin-date-picker>
                                                    </div>

                                                    <div class="col-md-1" style="padding-top:15px">
                                                        <paper-button raised id="btn_createCarTrack" class="btnSave" on-tap="_createCarTrack" disabled="{{ _lockFields }}"><i class="fa fa-plus" aria-hidden="true"></i>&nbsp; Criar</paper-button>
                                                    </div>
                                                </div>
                                            </paper-collapse-item>
                                        </div>
                                    </paper-collapse-item>
                                </div>

                                <!--Acidentes-->
                                <div hidden="{{ _isCreate }}">
                                    <paper-collapse-item class="panel-heading" header="Acidentes" closed>
                                        <vaadin-grid id="gridAcidentes" aria-label="gridAcidentes" items="{{ tabAcidentes }}" class="grid" multi-sort="true" column-reordering-allowed>
                                            <vaadin-grid-column resizable width="150px">
                                                <template class="header">
                                                    <vaadin-grid-sorter path="local">Local</vaadin-grid-sorter>
                                                    <vaadin-grid-filter path="local" />
                                                </template>
                                                <template>
                                                    {{item.local}}
                                                </template>
                                            </vaadin-grid-column>

                                            <vaadin-grid-column resizable width="150px">
                                                <template class="header">
                                                    <vaadin-grid-sorter path="dataTexto">Data</vaadin-grid-sorter>
                                                    <vaadin-grid-filter path="dataTexto" />
                                                </template>
                                                <template>
                                                    {{item.dataTexto}}
                                                </template>
                                            </vaadin-grid-column>

                                            <vaadin-grid-column resizable width="150px">
                                                <template class="header">
                                                    <vaadin-grid-sorter path="condutor">Condutor</vaadin-grid-sorter>
                                                    <vaadin-grid-filter path="condutor" />
                                                </template>
                                                <template>
                                                    {{item.condutor}}
                                                </template>
                                            </vaadin-grid-column>

                                            <vaadin-grid-column resizable width="150px">
                                                <template class="header">
                                                    <vaadin-grid-sorter path="responsabilidade">Responsabilidade</vaadin-grid-sorter>
                                                    <vaadin-grid-filter path="responsabilidade" />
                                                </template>
                                                <template>
                                                    {{item.responsabilidade}}
                                                </template>
                                            </vaadin-grid-column>

                                            <vaadin-grid-column resizable width="150px">
                                                <template class="header">
                                                    <vaadin-grid-sorter path="observacoes">Observações</vaadin-grid-sorter>
                                                    <vaadin-grid-filter path="observacoes" />
                                                </template>
                                                <template>
                                                    {{item.observacoes}}
                                                </template>
                                            </vaadin-grid-column>

                                            <vaadin-grid-column resizable width="100px">
                                                <template class="header">
                                                </template>
                                                <template>
                                                    <center>
                                                        <paper-button id="btn_deleteAcidentes" class="btnRemove tableBtn" raised on-tap="_deleteAcidentes" disabled="{{ _lockFields }}" title="Eliminar"><i class="fa fa-trash" aria-hidden="true"></i></paper-button>
                                                    </center>
                                                </template>
                                            </vaadin-grid-column>
                                        </vaadin-grid>

                                        <div style="padding-left:50px">
                                            <paper-collapse-item class="panel-heading" header="Inserir" closed>
                                                <div class="row break_clear">
                                                    <div class="col-md-2">
                                                        <vaadin-text-field id="acidentes_local" name="acidentes_local" label="Local" value="" disabled="{{ _lockFields }}" maxlength="200" required error-message="O campo Local é de preenchimento obrigatório"></vaadin-text-field>
                                                    </div>

                                                    <div class="col-md-2">
                                                        <vaadin-date-picker id="acidentes_data" name="acidentes_data" label="Data" value="" disabled="{{ _lockFields }}" placeholder="dd/MM/aaaa" required error-message="O campo Data é de preenchimento obrigatório"></vaadin-date-picker>
                                                    </div>

                                                    <div class="col-md-2">
                                                        <such-selectbox id="acidentes_idCondutor" name="acidentes_idCondutor" value="" label="Condutor"
                                                                        items="[[ListaCondutores]]"
                                                                        text-path="value"
                                                                        value-path="id"
                                                                        fields='[{"field":"value", "name":"Condutor"}, {"field":"extra", "name":"Nº Mecanográfico"}, {"field":"extra2", "name":"Mail"}]'
                                                                        required error-message="O campo Condutor é de preenchimento obrigatório"
                                                                        disabled="{{ _lockFields }}">
                                                        </such-selectbox>
                                                    </div>

                                                    <div class="col-md-2">
                                                        <such-selectbox id="acidentes_idresponsabilidade" name="acidentes_idresponsabilidade" value="" label="Responsabilidade"
                                                                        items="[[ListaAcidentesResponsabilidades]]"
                                                                        text-path="value"
                                                                        value-path="id"
                                                                        fields='[{"field":"value", "name":"Responsabilidade"}]'
                                                                        disabled="{{ _lockFields }}">
                                                        </such-selectbox>
                                                    </div>

                                                    <div class="col-md-3">
                                                        <vaadin-text-field id="acidentes_observacoes" name="acidentes_observacoes" label="Observações" value="" disabled="{{ _lockFields }}" maxlength="2000"></vaadin-text-field>
                                                    </div>

                                                    <div class="col-md-1" style="padding-top:15px">
                                                        <paper-button raised id="btn_createAcidentes" class="btnSave" on-tap="_createAcidentes" disabled="{{ _lockFields }}"><i class="fa fa-plus" aria-hidden="true"></i>&nbsp; Criar</paper-button>
                                                    </div>
                                                </div>
                                            </paper-collapse-item>
                                        </div>
                                    </paper-collapse-item>
                                </div>

                                <!--Contraordenações-->
                                <div hidden="{{ _isCreate }}">
                                    <paper-collapse-item class="panel-heading" header="Contraordenações" closed>
                                        <vaadin-grid id="gridContraOrdenacoes" aria-label="gridContraOrdenacoes" items="{{ tabContraOrdenacoes }}" class="grid" multi-sort="true" column-reordering-allowed>
                                            <vaadin-grid-column resizable width="150px">
                                                <template class="header">
                                                    <vaadin-grid-sorter path="local">Local</vaadin-grid-sorter>
                                                    <vaadin-grid-filter path="local" />
                                                </template>
                                                <template>
                                                    {{item.local}}
                                                </template>
                                            </vaadin-grid-column>

                                            <vaadin-grid-column resizable width="150px">
                                                <template class="header">
                                                    <vaadin-grid-sorter path="dataTexto">Data</vaadin-grid-sorter>
                                                    <vaadin-grid-filter path="dataTexto" />
                                                </template>
                                                <template>
                                                    {{item.dataTexto}}
                                                </template>
                                            </vaadin-grid-column>

                                            <vaadin-grid-column resizable width="150px">
                                                <template class="header">
                                                    <vaadin-grid-sorter path="condutor">Condutor</vaadin-grid-sorter>
                                                    <vaadin-grid-filter path="condutor" />
                                                </template>
                                                <template>
                                                    {{item.condutor}}
                                                </template>
                                            </vaadin-grid-column>

                                            <vaadin-grid-column resizable width="150px">
                                                <template class="header">
                                                    <vaadin-grid-sorter path="responsabilidade">Responsabilidade</vaadin-grid-sorter>
                                                    <vaadin-grid-filter path="responsabilidade" />
                                                </template>
                                                <template>
                                                    {{item.responsabilidade}}
                                                </template>
                                            </vaadin-grid-column>

                                            <vaadin-grid-column resizable width="150px">
                                                <template class="header">
                                                    <vaadin-grid-sorter path="valor">Valor</vaadin-grid-sorter>
                                                    <vaadin-grid-filter path="valor" />
                                                </template>
                                                <template>
                                                    <div class="alignRight">{{item.valor}} €</div>
                                                </template>
                                            </vaadin-grid-column>

                                            <vaadin-grid-column resizable width="150px">
                                                <template class="header">
                                                    <vaadin-grid-sorter path="observacoes">Observacoes</vaadin-grid-sorter>
                                                    <vaadin-grid-filter path="observacoes" />
                                                </template>
                                                <template>
                                                    {{item.observacoes}}
                                                </template>
                                            </vaadin-grid-column>

                                            <vaadin-grid-column resizable width="100px">
                                                <template class="header">
                                                </template>
                                                <template>
                                                    <center>
                                                        <paper-button id="btn_deleteContraOrdenacoes" class="btnRemove tableBtn" raised on-tap="_deleteContraOrdenacoes" disabled="{{ _lockFields }}" title="Eliminar"><i class="fa fa-trash" aria-hidden="true"></i></paper-button>
                                                    </center>
                                                </template>
                                            </vaadin-grid-column>
                                        </vaadin-grid>

                                        <div style="padding-left:50px">
                                            <paper-collapse-item class="panel-heading" header="Inserir" closed>
                                                <div class="row break_clear">
                                                    <div class="col-md-4">
                                                        <vaadin-text-field id="contraordenacoes_local" name="contraordenacoes_local" label="Local" value="" disabled="{{ _lockFields }}" maxlength="200" required error-message="O campo Local é de preenchimento obrigatório"></vaadin-text-field>
                                                    </div>

                                                    <div class="col-md-2">
                                                        <vaadin-date-picker id="contraordenacoes_data" name="contraordenacoes_data" label="Data" value="" disabled="{{ _lockFields }}" placeholder="dd/MM/aaaa" required error-message="O campo Data é de preenchimento obrigatório"></vaadin-date-picker>
                                                    </div>

                                                    <div class="col-md-3">
                                                        <such-selectbox id="contraordenacoes_idCondutor" name="contraordenacoes_idCondutor" value="" label="Condutor"
                                                                        items="[[ListaCondutores]]"
                                                                        text-path="value"
                                                                        value-path="id"
                                                                        fields='[{"field":"value", "name":"Condutor"}, {"field":"extra", "name":"Nº Mecanográfico"}, {"field":"extra2", "name":"Mail"}]'
                                                                        required error-message="O campo Condutor é de preenchimento obrigatório"
                                                                        disabled="{{ _lockFields }}">
                                                        </such-selectbox>
                                                    </div>

                                                    <div class="col-md-3">
                                                        <such-selectbox id="contraordenacoes_idresponsabilidade" name="contraordenacoes_idresponsabilidade" value="" label="Responsabilidade"
                                                                        items="[[ListaContraOrdenacoesResponsabilidades]]"
                                                                        text-path="value"
                                                                        value-path="id"
                                                                        fields='[{"field":"value", "name":"Responsabilidade"}]'
                                                                        disabled="{{ _lockFields }}">
                                                        </such-selectbox>
                                                    </div>
                                                </div>

                                                <div class="row break_clear">
                                                    <div class="col-md-2">
                                                        <vaadin-text-field id="contraordenacoes_valor" name="contraordenacoes_valor" label="Valor" value="" disabled="{{ _lockFields }}" type="number" class="alignRight"><div slot="suffix">€</div></vaadin-text-field>
                                                    </div>

                                                    <div class="col-md-9">
                                                        <vaadin-text-field id="contraordenacoes_observacoes" name="contraordenacoes_observacoes" label="Observações" value="" disabled="{{ _lockFields }}" maxlength="2000"></vaadin-text-field>
                                                    </div>

                                                    <div class="col-md-1" style="padding-top:15px">
                                                        <paper-button raised id="btn_createContraOrdenacoes" class="btnSave" on-tap="_createContraOrdenacoes" disabled="{{ _lockFields }}"><i class="fa fa-plus" aria-hidden="true"></i>&nbsp; Criar</paper-button>
                                                    </div>
                                                </div>
                                            </paper-collapse-item>
                                        </div>
                                    </paper-collapse-item>
                                </div>

                                <!--Afetação-->
                                <div hidden="{{ _isCreate }}">
                                    <paper-collapse-item class="panel-heading" header="Afetação" closed>
                                        <vaadin-grid id="gridAfetacao" aria-label="gridAfetacao" items="{{ tabAfetacao }}" class="grid" multi-sort="true" column-reordering-allowed>
                                            <vaadin-grid-column resizable width="150px">
                                                <template class="header">
                                                    <vaadin-grid-sorter path="codRegiao">Cód. Região</vaadin-grid-sorter>
                                                    <vaadin-grid-filter path="codRegiao" />
                                                </template>
                                                <template>
                                                    {{item.codRegiao}}
                                                </template>
                                            </vaadin-grid-column>

                                            <vaadin-grid-column resizable width="150px">
                                                <template class="header">
                                                    <vaadin-grid-sorter path="codAreaFuncional">Cód. Área Funcional</vaadin-grid-sorter>
                                                    <vaadin-grid-filter path="codAreaFuncional" />
                                                </template>
                                                <template>
                                                    {{item.codAreaFuncional}}
                                                </template>
                                            </vaadin-grid-column>

                                            <vaadin-grid-column resizable width="150px">
                                                <template class="header">
                                                    <vaadin-grid-sorter path="codCentroResponsabilidade">Cód. Centro Responsabilidade</vaadin-grid-sorter>
                                                    <vaadin-grid-filter path="codCentroResponsabilidade" />
                                                </template>
                                                <template>
                                                    {{item.codCentroResponsabilidade}}
                                                </template>
                                            </vaadin-grid-column>

                                            <vaadin-grid-column resizable width="150px">
                                                <template class="header">
                                                    <vaadin-grid-sorter path="dataInicioTexto">Início Afetação</vaadin-grid-sorter>
                                                    <vaadin-grid-filter path="dataInicioTexto" />
                                                </template>
                                                <template>
                                                    {{item.dataInicioTexto}}
                                                </template>
                                            </vaadin-grid-column>

                                            <vaadin-grid-column resizable width="150px">
                                                <template class="header">
                                                    <vaadin-grid-sorter path="dataFimTexto">Fim Afetação</vaadin-grid-sorter>
                                                    <vaadin-grid-filter path="dataFimTexto" />
                                                </template>
                                                <template>
                                                    {{item.dataFimTexto}}
                                                </template>
                                            </vaadin-grid-column>

                                            <vaadin-grid-column resizable width="150px">
                                                <template class="header">
                                                    <vaadin-grid-sorter path="areaReal">Área Real</vaadin-grid-sorter>
                                                    <vaadin-grid-filter path="areaReal" />
                                                </template>
                                                <template>
                                                    {{item.areaReal}}
                                                </template>
                                            </vaadin-grid-column>

                                            <vaadin-grid-column resizable width="150px">
                                                <template class="header">
                                                    <vaadin-grid-sorter path="localExato">Local Exato</vaadin-grid-sorter>
                                                    <vaadin-grid-filter path="localExato" />
                                                </template>
                                                <template>
                                                    {{item.localExato}}
                                                </template>
                                            </vaadin-grid-column>

                                            <vaadin-grid-column resizable width="100px">
                                                <template class="header">
                                                </template>
                                                <template>
                                                    <center>
                                                        <paper-button id="btn_deleteAfetacao" class="btnRemove tableBtn" raised on-tap="_deleteAfetacao" disabled="{{ _lockFields }}" title="Eliminar"><i class="fa fa-trash" aria-hidden="true"></i></paper-button>
                                                    </center>
                                                </template>
                                            </vaadin-grid-column>
                                        </vaadin-grid>

                                        <div style="padding-left:50px">
                                            <paper-collapse-item class="panel-heading" header="Inserir" closed>
                                                <div class="row break_clear">
                                                    <div class="col-md-2">
                                                        <such-selectbox id="afetacao_codRegiao" name="afetacao_codRegiao" value="" label="Região"
                                                                        items="[[ListaRegioes]]"
                                                                        text-path="value"
                                                                        value-path="id"
                                                                        fields='[{"field":"id", "name":"Código"}, {"field":"value", "name":"Descrição"}]'
                                                                        required error-message="O campo Região é de preenchimento obrigatório"
                                                                        disabled="{{ _lockFields }}">
                                                        </such-selectbox>
                                                    </div>

                                                    <div class="col-md-2">
                                                        <such-selectbox id="afetacao_codAreaFuncional" name="afetacao_codAreaFuncional" value="" label="Área Funcional"
                                                                        items="[[ListaAreas]]"
                                                                        text-path="value"
                                                                        value-path="id"
                                                                        fields='[{"field":"id", "name":"Código"}, {"field":"value", "name":"Descrição"}]'
                                                                        required error-message="O campo Área Funcional é de preenchimento obrigatório"
                                                                        disabled="{{ _lockFields }}">
                                                        </such-selectbox>
                                                    </div>

                                                    <div class="col-md-2">
                                                        <such-selectbox id="afetacao_codCentroResponsabilidade" name="afetacao_codCentroResponsabilidade" value="" label="Centro de Responsabilidade"
                                                                        items="[[ListaCentrosAfetacao]]"
                                                                        text-path="value"
                                                                        value-path="id"
                                                                        fields='[{"field":"id", "name":"Código"}, {"field":"value", "name":"Descrição"}]'
                                                                        required error-message="O campo Centro de Responsabilidade é de preenchimento obrigatório"
                                                                        disabled="{{ _lockFields }}">
                                                        </such-selectbox>
                                                    </div>

                                                    <div class="col-md-2">
                                                        <vaadin-date-picker id="afetacao_dataInicio" name="afetacao_dataInicio" label="Início Afetação" value="" disabled="{{ _lockFields }}" placeholder="dd/MM/aaaa" required error-message="O campo Início Afetação é de preenchimento obrigatório"></vaadin-date-picker>
                                                    </div>

                                                    <div class="col-md-2">
                                                        <vaadin-date-picker id="afetacao_dataFim" name="afetacao_dataFim" label="Fim Afetação" value="" disabled="{{ _lockFields }}" placeholder="dd/MM/aaaa"></vaadin-date-picker>
                                                    </div>
                                                </div>

                                                <div class="row break_clear">
                                                    <div class="col-md-3">
                                                        <such-selectbox id="afetacao_areaReal" name="afetacao_areaReal" value="" label="Área Real"
                                                                        items="[[ListaAfetacaoAreaReal]]"
                                                                        text-path="value"
                                                                        value-path="id"
                                                                        fields='[{"field":"value", "name":"Área Real"}]'
                                                                        disabled="{{ _lockFields }}">
                                                        </such-selectbox>
                                                    </div>

                                                    <div class="col-md-3">
                                                        <vaadin-text-field id="afetacao_localExato" name="afetacao_localExato" label="Local Exato" value="" disabled="{{ _lockFields }}" maxlength="200"></vaadin-text-field>
                                                    </div>

                                                    <div class="col-md-1" style="padding-top:15px">
                                                        <paper-button raised id="btnCreateAfetacao" class="btnSave" on-tap="_createAfetacao" disabled="{{ _lockFields }}"><i class="fa fa-plus" aria-hidden="true"></i>&nbsp; Criar</paper-button>
                                                    </div>
                                                </div>

                                            </paper-collapse-item>
                                        </div>
                                    </paper-collapse-item>
                                </div>

                                <!--Condutores-->
                                <div hidden="{{ _isCreate }}">
                                    <paper-collapse-item class="panel-heading" header="Condutores" closed>
                                        <vaadin-grid id="gridCondutores" aria-label="gridCondutores" items="{{ tabCondutor }}" class="grid" multi-sort="true" column-reordering-allowed>
                                            <vaadin-grid-column resizable width="150px">
                                                <template class="header">
                                                    <vaadin-grid-sorter path="gestor">Nome do Responsável</vaadin-grid-sorter>
                                                    <vaadin-grid-filter path="gestor" />
                                                </template>
                                                <template>
                                                    {{item.gestor}}
                                                </template>
                                            </vaadin-grid-column>

                                            <vaadin-grid-column resizable width="150px">
                                                <template class="header">
                                                    <vaadin-grid-sorter path="dataInicioTexto">Data Início</vaadin-grid-sorter>
                                                    <vaadin-grid-filter path="dataInicioTexto" />
                                                </template>
                                                <template>
                                                    {{item.dataInicioTexto}}
                                                </template>
                                            </vaadin-grid-column>

                                            <vaadin-grid-column resizable width="150px">
                                                <template class="header">
                                                    <vaadin-grid-sorter path="dataFimTexto">Data Fim</vaadin-grid-sorter>
                                                    <vaadin-grid-filter path="dataFimTexto" />
                                                </template>
                                                <template>
                                                    {{item.dataFimTexto}}
                                                </template>
                                            </vaadin-grid-column>

                                            <vaadin-grid-column resizable width="100px">
                                                <template class="header">
                                                </template>
                                                <template>
                                                    <center>
                                                        <paper-button id="btn_deleteCondutor" class="btnRemove tableBtn" raised on-tap="_deleteCondutor" disabled="{{ _lockFields }}" title="Eliminar"><i class="fa fa-trash" aria-hidden="true"></i></paper-button>
                                                    </center>
                                                </template>
                                            </vaadin-grid-column>
                                        </vaadin-grid>

                                        <div style="padding-left:50px">
                                            <paper-collapse-item class="panel-heading" header="Inserir" closed>
                                                <div class="row break_clear">
                                                    <div class="col-md-4">
                                                        <such-selectbox id="condutor_idCondutor" name="condutor_idCondutor" value="" label="Nome do Condutor"
                                                                        items="[[ListaCondutores]]"
                                                                        text-path="value"
                                                                        value-path="id"
                                                                        fields='[{"field":"value", "name":"Condutor"}, {"field":"extra", "name":"Nº Mecanográfico"}, {"field":"extra2", "name":"Mail"}]'
                                                                        required error-message="O campo Condutor é de preenchimento obrigatório"
                                                                        disabled="{{ _lockFields }}">
                                                        </such-selectbox>
                                                    </div>

                                                    <div class="col-md-2">
                                                        <vaadin-date-picker id="condutor_dataInicio" name="condutor_dataInicio" label="Data Início" value="" placeholder="dd/MM/aaaa" required error-message="O campo Data Início é de preenchimento obrigatório"></vaadin-date-picker>
                                                    </div>

                                                    <div class="col-md-2">
                                                        <vaadin-date-picker id="condutor_dataFim" name="condutor_dataFim" label="Data Fim" value="" placeholder="dd/MM/aaaa"></vaadin-date-picker>
                                                    </div>

                                                    <div class="col-md-1" style="padding-top:15px">
                                                        <paper-button raised id="btnCondutores" class="btnSave" on-tap="_createCondutor" disabled="{{ _lockFields }}"><i class="fa fa-plus" aria-hidden="true"></i>&nbsp; Criar</paper-button>
                                                    </div>
                                                </div>
                                            </paper-collapse-item>
                                        </div>
                                    </paper-collapse-item>
                                </div>

                                <!--Responsáveis-->
                                <div hidden="{{ _isCreate }}">
                                    <paper-collapse-item class="panel-heading" header="Responsáveis" closed>
                                        <vaadin-grid id="gridGestores" aria-label="gridGestores" items="{{ tabGestor }}" class="grid" multi-sort="true" column-reordering-allowed>
                                            <vaadin-grid-column resizable width="150px">
                                                <template class="header">
                                                    <vaadin-grid-sorter path="gestor">Nome do Responsável</vaadin-grid-sorter>
                                                    <vaadin-grid-filter path="gestor" />
                                                </template>
                                                <template>
                                                    {{item.gestor}}
                                                </template>
                                            </vaadin-grid-column>

                                            <vaadin-grid-column resizable width="150px">
                                                <template class="header">
                                                    <vaadin-grid-sorter path="dataInicioTexto">Data Início</vaadin-grid-sorter>
                                                    <vaadin-grid-filter path="dataInicioTexto" />
                                                </template>
                                                <template>
                                                    {{item.dataInicioTexto}}
                                                </template>
                                            </vaadin-grid-column>

                                            <vaadin-grid-column resizable width="150px">
                                                <template class="header">
                                                    <vaadin-grid-sorter path="dataFimTexto">Data Fim</vaadin-grid-sorter>
                                                    <vaadin-grid-filter path="dataFimTexto" />
                                                </template>
                                                <template>
                                                    {{item.dataFimTexto}}
                                                </template>
                                            </vaadin-grid-column>

                                            <vaadin-grid-column resizable width="100px">
                                                <template class="header">
                                                </template>
                                                <template>
                                                    <center>
                                                        <paper-button id="btn_deleteGestor" class="btnRemove tableBtn" raised on-tap="_deleteGestor" disabled="{{ _lockFields }}" title="Eliminar"><i class="fa fa-trash" aria-hidden="true"></i></paper-button>
                                                    </center>
                                                </template>
                                            </vaadin-grid-column>
                                        </vaadin-grid>

                                        <div style="padding-left:50px">
                                            <paper-collapse-item class="panel-heading" header="Inserir" closed>
                                                <div class="row break_clear">
                                                    <div class="col-md-4">
                                                        <such-selectbox id="gestor_idGestor" name="gestor_idGestor" value="" label="Nome do Responsável"
                                                                        items="[[ListaResponsaveis]]"
                                                                        text-path="value"
                                                                        value-path="id"
                                                                        fields='[{"field":"value", "name":"Responsável"}, {"field":"extra", "name":"Nº Mecanográfico"}, {"field":"extra2", "name":"Mail"}]'
                                                                        required error-message="O campo Responsável é de preenchimento obrigatório"
                                                                        disabled="{{ _lockFields }}">
                                                        </such-selectbox>
                                                    </div>

                                                    <div class="col-md-2">
                                                        <vaadin-date-picker id="gestor_dataInicio" name="gestor_dataInicio" label="Data Início" value="" placeholder="dd/MM/aaaa" required error-message="O campo Data Início é de preenchimento obrigatório"></vaadin-date-picker>
                                                    </div>

                                                    <div class="col-md-2">
                                                        <vaadin-date-picker id="gestor_dataFim" name="gestor_dataFim" label="Data Fim" value="" placeholder="dd/MM/aaaa"></vaadin-date-picker>
                                                    </div>

                                                    <div class="col-md-1" style="padding-top:15px">
                                                        <paper-button raised id="btnGestores" class="btnSave" on-tap="_createGestor" disabled="{{ _lockFields }}"><i class="fa fa-plus" aria-hidden="true"></i>&nbsp; Criar</paper-button>
                                                    </div>
                                                </div>
                                            </paper-collapse-item>
                                        </div>
                                    </paper-collapse-item>
                                </div>

                                <!--Venda / Abate-->
                                <div hidden="{{ _isCreate }}">
                                    <paper-collapse-item class="panel-heading" header="Venda / Abate" closed>
                                        <vaadin-grid id="gridAbate" aria-label="gridAbate" items="{{ tabAbate }}" class="grid" multi-sort="true" column-reordering-allowed>
                                            <vaadin-grid-column resizable width="150px">
                                                <template class="header">
                                                    <vaadin-grid-sorter path="tipoAtoAdministrativo">Tipo de ato administrativo</vaadin-grid-sorter>
                                                    <vaadin-grid-filter path="tipoAtoAdministrativo" />
                                                </template>
                                                <template>
                                                    {{item.tipoAtoAdministrativo}}
                                                </template>
                                            </vaadin-grid-column>

                                            <vaadin-grid-column resizable width="150px">
                                                <template class="header">
                                                    <vaadin-grid-sorter path="noRegisto">Nº de Registo</vaadin-grid-sorter>
                                                    <vaadin-grid-filter path="noRegisto" />
                                                </template>
                                                <template>
                                                    {{item.noRegisto}}
                                                </template>
                                            </vaadin-grid-column>

                                            <vaadin-grid-column resizable width="150px">
                                                <template class="header">
                                                    <vaadin-grid-sorter path="descricaoAto">Descrição do Ato</vaadin-grid-sorter>
                                                    <vaadin-grid-filter path="descricaoAto" />
                                                </template>
                                                <template>
                                                    {{item.descricaoAto}}
                                                </template>
                                            </vaadin-grid-column>

                                            <vaadin-grid-column resizable width="150px">
                                                <template class="header">
                                                    <vaadin-grid-sorter path="fundamentacao">Fundamentação</vaadin-grid-sorter>
                                                    <vaadin-grid-filter path="fundamentacao" />
                                                </template>
                                                <template>
                                                    {{item.fundamentacao}}
                                                </template>
                                            </vaadin-grid-column>

                                            <vaadin-grid-column resizable width="150px">
                                                <template class="header">
                                                    <vaadin-grid-sorter path="autor">Autor</vaadin-grid-sorter>
                                                    <vaadin-grid-filter path="autor" />
                                                </template>
                                                <template>
                                                    {{item.autor}}
                                                </template>
                                            </vaadin-grid-column>

                                            <vaadin-grid-column resizable width="150px">
                                                <template class="header">
                                                    <vaadin-grid-sorter path="dataTexto">Data</vaadin-grid-sorter>
                                                    <vaadin-grid-filter path="dataTexto" />
                                                </template>
                                                <template>
                                                    {{item.dataTexto}}
                                                </template>
                                            </vaadin-grid-column>

                                            <vaadin-grid-column resizable width="100px">
                                                <template class="header">
                                                </template>
                                                <template>
                                                    <center>
                                                        <paper-button id="btn_deleteAbate" class="btnRemove tableBtn" raised on-tap="_deleteAbate" disabled="{{ _lockFields }}" title="Eliminar"><i class="fa fa-trash" aria-hidden="true"></i></paper-button>
                                                    </center>
                                                </template>
                                            </vaadin-grid-column>
                                        </vaadin-grid>

                                        <div style="padding-left:50px">
                                            <paper-collapse-item class="panel-heading" header="Inserir" closed>
                                                <div class="row break_clear">
                                                    <div class="col-md-2">
                                                        <such-selectbox id="abate_idTipoAtoAdministrativo" name="abate_idTipoAtoAdministrativo" value="" label="Tipo de ato administrativo"
                                                                        items="[[ListaTipoAtoAdministrativo]]"
                                                                        text-path="value"
                                                                        value-path="id"
                                                                        fields='[{"field":"value", "name":"Tipo de Ato Administrativo"}]'
                                                                        required error-message="O campo Tipo de Ato Administrativo é de preenchimento obrigatório"
                                                                        disabled="{{ _lockFields }}">
                                                        </such-selectbox>
                                                    </div>

                                                    <div class="col-md-2">
                                                        <vaadin-text-field id="abate_noRegisto" name="abate_noRegisto" label="Nº de Registo" value="" disabled="{{ _lockFields }}" maxlength="200"></vaadin-text-field>
                                                    </div>

                                                    <div class="col-md-2">
                                                        <such-selectbox id="abate_idDescricaoAto" name="abate_idDescricaoAto" value="" label="Descrição do Ato"
                                                                        items="[[ListaDescricaoAto]]"
                                                                        text-path="value"
                                                                        value-path="id"
                                                                        fields='[{"field":"value", "name":"Descrição do Ato"}]'
                                                                        required error-message="O campo Descrição do Ato é de preenchimento obrigatório"
                                                                        disabled="{{ _lockFields }}">
                                                        </such-selectbox>
                                                    </div>

                                                    <div class="col-md-3">
                                                        <vaadin-text-field id="abate_fundamentacao" name="abate_fundamentacao" label="Fundamentação" value="" disabled="{{ _lockFields }}" maxlength="200"></vaadin-text-field>
                                                    </div>

                                                    <div class="col-md-3">
                                                        <vaadin-text-field id="abate_autor" name="abate_autor" label="Autor" value="" disabled="{{ _lockFields }}" maxlength="200"></vaadin-text-field>
                                                    </div>
                                                </div>

                                                <div class="row break_clear">
                                                    <div class="col-md-2">
                                                        <vaadin-date-picker id="abate_data" name="abate_data" label="Data" value="" disabled="{{ _lockFields }}" placeholder="dd/MM/aaaa" required error-message="O campo Data é de preenchimento obrigatório"></vaadin-date-picker>
                                                    </div>

                                                    <div class="col-md-1" style="padding-top:15px">
                                                        <paper-button raised id="btn_createAbate" class="btnSave" on-tap="_createAbate" disabled="{{ _lockFields }}"><i class="fa fa-plus" aria-hidden="true"></i>&nbsp; Criar</paper-button>
                                                    </div>
                                                </div>
                                            </paper-collapse-item>
                                        </div>
                                    </paper-collapse-item>
                                </div>

                                <!--Substituicao-->
                                <div hidden="{{ _isCreate }}">
                                    <paper-collapse-item class="panel-heading" header="Substituição Provisória de Viaturas Não Renting" closed>
                                        <vaadin-grid id="gridSubstituicao" aria-label="gridSubstituicao" items="{{ tabSubstituicao }}" class="grid" multi-sort="true" column-reordering-allowed>
                                            <vaadin-grid-column resizable width="150px">
                                                <template class="header">
                                                    <vaadin-grid-sorter path="matriculaSubstituicao">Viatura de Substituição</vaadin-grid-sorter>
                                                    <vaadin-grid-filter path="matriculaSubstituicao" />
                                                </template>
                                                <template>
                                                    {{item.matriculaSubstituicao}}
                                                </template>
                                            </vaadin-grid-column>

                                            <vaadin-grid-column resizable width="150px">
                                                <template class="header">
                                                    <vaadin-grid-sorter path="dataInicioTexto">Início da Substituição</vaadin-grid-sorter>
                                                    <vaadin-grid-filter path="dataInicioTexto" />
                                                </template>
                                                <template>
                                                    {{item.dataInicioTexto}}
                                                </template>
                                            </vaadin-grid-column>

                                            <vaadin-grid-column resizable width="150px">
                                                <template class="header">
                                                    <vaadin-grid-sorter path="kmInicio">Km no Início</vaadin-grid-sorter>
                                                    <vaadin-grid-filter path="kmInicio" />
                                                </template>
                                                <template>
                                                    <div class="alignRight">{{item.kmInicio}} km</div>
                                                </template>
                                            </vaadin-grid-column>

                                            <vaadin-grid-column resizable width="150px">
                                                <template class="header">
                                                    <vaadin-grid-sorter path="dataFimTexto">Fim da Substituição</vaadin-grid-sorter>
                                                    <vaadin-grid-filter path="dataFimTexto" />
                                                </template>
                                                <template>
                                                    {{item.dataFimTexto}}
                                                </template>
                                            </vaadin-grid-column>

                                            <vaadin-grid-column resizable width="150px">
                                                <template class="header">
                                                    <vaadin-grid-sorter path="kmFim">Km no Fim</vaadin-grid-sorter>
                                                    <vaadin-grid-filter path="kmFim" />
                                                </template>
                                                <template>
                                                    <div class="alignRight">{{item.kmFim}} km</div>
                                                </template>
                                            </vaadin-grid-column>

                                            <vaadin-grid-column resizable width="150px">
                                                <template class="header">
                                                    <vaadin-grid-sorter path="observacoes">Observações</vaadin-grid-sorter>
                                                    <vaadin-grid-filter path="observacoes" />
                                                </template>
                                                <template>
                                                    {{item.observacoes}}
                                                </template>
                                            </vaadin-grid-column>

                                            <vaadin-grid-column resizable width="100px">
                                                <template class="header">
                                                </template>
                                                <template>
                                                    <center>
                                                        <paper-button id="btn_deleteSubstituicao" class="btnRemove tableBtn" raised on-tap="_deleteSubstituicao" disabled="{{ _lockFields }}" title="Eliminar"><i class="fa fa-trash" aria-hidden="true"></i></paper-button>
                                                    </center>
                                                </template>
                                            </vaadin-grid-column>
                                        </vaadin-grid>

                                        <div style="padding-left:50px">
                                            <paper-collapse-item class="panel-heading" header="Inserir" closed>
                                                <div class="row break_clear">
                                                    <div class="col-md-2">
                                                        <vaadin-text-field id="substituicao_matriculaSubstituicao" name="substituicao_matriculaSubstituicao" label="Viatura de Substituição" value="" disabled="{{ _lockFields }}" maxlength="20" required error-message="O campo Viatura de Substituição é de preenchimento obrigatório"></vaadin-text-field>
                                                    </div>

                                                    <div class="col-md-2">
                                                        <vaadin-date-picker id="substituicao_dataInicio" name="substituicao_dataInicio" label="Início da Substituição" value="" disabled="{{ _lockFields }}" placeholder="dd/MM/aaaa" required error-message="O campo Início da Substituição é de preenchimento obrigatório"></vaadin-date-picker>
                                                    </div>

                                                    <div class="col-md-1">
                                                        <vaadin-text-field id="substituicao_kmInicio" name="substituicao_kmInicio" label="Km no Início" value="" disabled="{{ _lockFields }}" type="number" class="alignRight"><div slot="suffix">km</div></vaadin-text-field>
                                                    </div>

                                                    <div class="col-md-2">
                                                        <vaadin-date-picker id="substituicao_dataFim" name="substituicao_dataFim" label="Fim da Substituição" value="" disabled="{{ _lockFields }}" placeholder="dd/MM/aaaa"></vaadin-date-picker>
                                                    </div>

                                                    <div class="col-md-1">
                                                        <vaadin-text-field id="substituicao_kmFim" name="substituicao_kmFim" label="Km no Fim" value="" disabled="{{ _lockFields }}" type="number" class="alignRight"><div slot="suffix">km</div></vaadin-text-field>
                                                    </div>

                                                    <div class="col-md-3">
                                                        <vaadin-text-field id="substituicao_observacoes" name="substituicao_observacoes" label="Observações" value="" disabled="{{ _lockFields }}" maxlength="200"></vaadin-text-field>
                                                    </div>

                                                    <div class="col-md-1" style="padding-top:15px">
                                                        <paper-button raised id="btn_createSubstituicao" class="btnSave" on-tap="_createSubstituicao" disabled="{{ _lockFields }}"><i class="fa fa-plus" aria-hidden="true"></i>&nbsp; Criar</paper-button>
                                                    </div>
                                                </div>
                                            </paper-collapse-item>
                                        </div>
                                    </paper-collapse-item>
                                </div>
                            </div>

                            <!--Renting-->
                            <div id="div_Renting">
                                <div hidden="{{ _isCreate }}">
                                    <!--RentingContrato-->
                                    <vaadin-grid id="gridRentingContrato" aria-label="gridRentingContrato" items="{{ tabRentingContrato }}" class="grid" active-item="{{activeItemRentingContrato}}" multi-sort="true" column-reordering-allowed>
                                        <vaadin-grid-column resizable width="150px">
                                            <template class="header">
                                                <vaadin-grid-sorter path="fornecedor">Fornecedor</vaadin-grid-sorter>
                                                <vaadin-grid-filter path="fornecedor" />
                                            </template>
                                            <template>
                                                {{item.fornecedor}}
                                            </template>
                                        </vaadin-grid-column>

                                        <vaadin-grid-column resizable width="150px">
                                            <template class="header">
                                                <vaadin-grid-sorter path="noContrato">Nº Contrato</vaadin-grid-sorter>
                                                <vaadin-grid-filter path="noContrato" />
                                            </template>
                                            <template>
                                                {{item.noContrato}}
                                            </template>
                                        </vaadin-grid-column>

                                        <vaadin-grid-column resizable width="150px">
                                            <template class="header">
                                                <vaadin-grid-sorter path="kmInicio">Km Inicíais</vaadin-grid-sorter>
                                                <vaadin-grid-filter path="kmInicio" />
                                            </template>
                                            <template>
                                                <div class="alignRight">{{item.kmInicio}} km</div>
                                            </template>
                                        </vaadin-grid-column>

                                        <vaadin-grid-column resizable width="150px">
                                            <template class="header">
                                                <vaadin-grid-sorter path="kmContratados">Km Contratados</vaadin-grid-sorter>
                                                <vaadin-grid-filter path="kmContratados" />
                                            </template>
                                            <template>
                                                <div class="alignRight">{{item.kmContratados}} km</div>
                                            </template>
                                        </vaadin-grid-column>

                                        <vaadin-grid-column resizable width="200px">
                                            <template class="header">
                                                <vaadin-grid-sorter path="precoKmAdicionalSemIVA">Preço Km Adicional s/ IVA</vaadin-grid-sorter>
                                                <vaadin-grid-filter path="precoKmAdicionalSemIVA" />
                                            </template>
                                            <template>
                                                <div class="alignRight">{{item.precoKmAdicionalSemIVA}} €</div>
                                            </template>
                                        </vaadin-grid-column>

                                        <vaadin-grid-column resizable width="250px">
                                            <template class="header">
                                                <vaadin-grid-sorter path="precoKmNaoPercorridoSemIVA">Preço Km não percorrido s/ IVA</vaadin-grid-sorter>
                                                <vaadin-grid-filter path="precoKmNaoPercorridoSemIVA" />
                                            </template>
                                            <template>
                                                <div class="alignRight">{{item.precoKmNaoPercorridoSemIVA}} €</div>
                                            </template>
                                        </vaadin-grid-column>

                                        <vaadin-grid-column resizable width="150px">
                                            <template class="header">
                                                <vaadin-grid-sorter path="kmMaximo">Km Máximo</vaadin-grid-sorter>
                                                <vaadin-grid-filter path="kmMaximo" />
                                            </template>
                                            <template>
                                                <div class="alignRight">{{item.kmMaximo}} km</div>
                                            </template>
                                        </vaadin-grid-column>

                                        <vaadin-grid-column resizable width="150px">
                                            <template class="header">
                                                <vaadin-grid-sorter path="dataInicioTexto">Data de Início</vaadin-grid-sorter>
                                                <vaadin-grid-filter path="dataInicioTexto" />
                                            </template>
                                            <template>
                                                {{item.dataInicioTexto}}
                                            </template>
                                        </vaadin-grid-column>

                                        <vaadin-grid-column resizable width="150px">
                                            <template class="header">
                                                <vaadin-grid-sorter path="dataTermoTexto">Data de Termo</vaadin-grid-sorter>
                                                <vaadin-grid-filter path="dataTermoTexto" />
                                            </template>
                                            <template>
                                                {{item.dataTermoTexto}}
                                            </template>
                                        </vaadin-grid-column>

                                        <vaadin-grid-column resizable width="200px">
                                            <template class="header">
                                                <vaadin-grid-sorter path="duracaoContratoMensal">Duração Contrato Mensal</vaadin-grid-sorter>
                                                <vaadin-grid-filter path="duracaoContratoMensal" />
                                            </template>
                                            <template>
                                                <div class="alignRight">{{item.duracaoContratoMensal}}</div>
                                            </template>
                                        </vaadin-grid-column>

                                        <vaadin-grid-column resizable width="175px">
                                            <template class="header">
                                                <vaadin-grid-sorter path="inicioPagamentoTexto">Início do Pagamento</vaadin-grid-sorter>
                                                <vaadin-grid-filter path="inicioPagamentoTexto" />
                                            </template>
                                            <template>
                                                {{item.inicioPagamentoTexto}}
                                            </template>
                                        </vaadin-grid-column>

                                        <vaadin-grid-column resizable width="175px">
                                            <template class="header">
                                                <vaadin-grid-sorter path="noPagamentos">Nº de Pagamentos</vaadin-grid-sorter>
                                                <vaadin-grid-filter path="noPagamentos" />
                                            </template>
                                            <template>
                                                <div class="alignRight">{{item.noPagamentos}}</div>
                                            </template>
                                        </vaadin-grid-column>

                                        <vaadin-grid-column resizable width="150px">
                                            <template class="header">
                                                <vaadin-grid-sorter path="periodicidade">Periodícidade</vaadin-grid-sorter>
                                                <vaadin-grid-filter path="periodicidade" />
                                            </template>
                                            <template>
                                                {{item.periodicidade}}
                                            </template>
                                        </vaadin-grid-column>

                                        <vaadin-grid-column resizable width="150px">
                                            <template class="header">
                                                <vaadin-grid-sorter path="totalSemIVA">Total s/ IVA</vaadin-grid-sorter>
                                                <vaadin-grid-filter path="totalSemIVA" />
                                            </template>
                                            <template>
                                                <div class="alignRight">{{item.totalSemIVA}} €</div>
                                            </template>
                                        </vaadin-grid-column>

                                        <vaadin-grid-column resizable width="150px">
                                            <template class="header">
                                                <vaadin-grid-sorter path="iva">IVA</vaadin-grid-sorter>
                                                <vaadin-grid-filter path="iva" />
                                            </template>
                                            <template>
                                                <div class="alignRight">{{item.iva}} €</div>
                                            </template>
                                        </vaadin-grid-column>

                                        <vaadin-grid-column resizable width="150px">
                                            <template class="header">
                                                <vaadin-grid-sorter path="totalComIVA">Total c/ IVA</vaadin-grid-sorter>
                                                <vaadin-grid-filter path="totalComIVA" />
                                            </template>
                                            <template>
                                                <div class="alignRight">{{item.totalComIVA}} €</div>
                                            </template>
                                        </vaadin-grid-column>

                                        <vaadin-grid-column resizable width="150px">
                                            <template class="header">
                                                <vaadin-grid-sorter path="franquiaSemIVA">Franquia s/ IVA</vaadin-grid-sorter>
                                                <vaadin-grid-filter path="franquiaSemIVA" />
                                            </template>
                                            <template>
                                                <div class="alignRight">{{item.franquiaSemIVA}} €</div>
                                            </template>
                                        </vaadin-grid-column>

                                        <vaadin-grid-column resizable width="150px">
                                            <template class="header">
                                                <vaadin-grid-sorter path="responsavelContrato">Responsável</vaadin-grid-sorter>
                                                <vaadin-grid-filter path="responsavelContrato" />
                                            </template>
                                            <template>
                                                {{item.responsavelContrato}}
                                            </template>
                                        </vaadin-grid-column>

                                        <vaadin-grid-column resizable width="150px">
                                            <template class="header">
                                                <vaadin-grid-sorter path="observacoes">Observações</vaadin-grid-sorter>
                                                <vaadin-grid-filter path="observacoes" />
                                            </template>
                                            <template>
                                                {{item.observacoes}}
                                            </template>
                                        </vaadin-grid-column>

                                        <vaadin-grid-column resizable width="100px">
                                            <template class="header">
                                            </template>
                                            <template>
                                                <center>
                                                    <paper-button id="btn_deleteRentingContrato" class="btnRemove tableBtn" raised on-tap="_deleteRentingContrato" disabled="{{ _lockFields }}" title="Eliminar"><i class="fa fa-trash" aria-hidden="true"></i></paper-button>
                                                </center>
                                            </template>
                                        </vaadin-grid-column>
                                    </vaadin-grid>

                                    <div style="padding-left:50px">
                                        <paper-collapse-item class="panel-heading" header="Inserir" closed>
                                            <div class="row break_clear">
                                                <div class="col-md-2">
                                                    <such-selectbox id="rentingContrato_idFornecedor" name="rentingContrato_idFornecedor" value="" label="Fornecedor"
                                                                    items="[[ListaPropriedades]]"
                                                                    text-path="value"
                                                                    value-path="id"
                                                                    fields='[{"field":"value", "name":"Fornecedor"}]'
                                                                    required error-message="O campo Fornecedor é de preenchimento obrigatório"
                                                                    disabled="{{ _lockFields }}">
                                                    </such-selectbox>
                                                </div>

                                                <div class="col-md-2">
                                                    <vaadin-text-field id="rentingContrato_noContrato" name="rentingContrato_noContrato" label="Nº Contrato" value="" disabled="{{ _lockFields }}" maxlength="60" required error-message="O campo Nº Contrato é de preenchimento obrigatório"></vaadin-text-field>
                                                </div>

                                                <div class="col-md-2">
                                                    <vaadin-text-field id="rentingContrato_kmInicio" name="rentingContrato_kmInicio" label="Km Inicíais" value="" disabled="{{ _lockFields }}" type="number" class="alignRight"><div slot="suffix">km</div></vaadin-text-field>
                                                </div>

                                                <div class="col-md-2">
                                                    <vaadin-text-field id="rentingContrato_kmContratados" name="rentingContrato_kmContratados" label="Km Contratados" value="" disabled="{{ _lockFields }}" type="number" class="alignRight"><div slot="suffix">km</div></vaadin-text-field>
                                                </div>

                                                <div class="col-md-2">
                                                    <vaadin-text-field id="rentingContrato_precoKmAdicionalSemIVA" name="rentingContrato_precoKmAdicionalSemIVA" label="Preço Km Adicional s/ IVA" value="" disabled="{{ _lockFields }}" class="alignRight"><div slot="suffix">€</div></vaadin-text-field>
                                                </div>

                                                <div class="col-md-2">
                                                    <vaadin-text-field id="rentingContrato_precoKmNaoPercorridoSemIVA" name="rentingContrato_precoKmNaoPercorridoSemIVA" label="Preço Km não percorrido s/ IVA" value="" disabled="{{ _lockFields }}" class="alignRight"><div slot="suffix">€</div></vaadin-text-field>
                                                </div>
                                            </div>

                                            <div class="row break_clear">
                                                <div class="col-md-2">
                                                    <vaadin-text-field id="rentingContrato_kmMaximo" name="rentingContrato_kmMaximo" label="Km Máximo" value="" disabled="{{ _lockFields }}" type="number" class="alignRight"><div slot="suffix">km</div></vaadin-text-field>
                                                </div>

                                                <div class="col-md-2">
                                                    <vaadin-date-picker id="rentingContrato_dataInicio" name="rentingContrato_dataInicio" label="Data de Início" value="" disabled="{{ _lockFields }}" placeholder="dd/MM/aaaa"></vaadin-date-picker>
                                                </div>

                                                <div class="col-md-2">
                                                    <vaadin-date-picker id="rentingContrato_dataTermo" name="rentingContrato_dataTermo" label="Data de Termo" value="" disabled="{{ _lockFields }}" placeholder="dd/MM/aaaa"></vaadin-date-picker>
                                                </div>

                                                <div class="col-md-2">
                                                    <vaadin-text-field id="rentingContrato_duracaoContratoMensal" name="rentingContrato_duracaoContratoMensal" label="Duração Contrato Mensal" value="" disabled="{{ _lockFields }}" type="number" class="alignRight"></vaadin-text-field>
                                                </div>

                                                <div class="col-md-2">
                                                    <vaadin-date-picker id="rentingContrato_inicioPagamento" name="rentingContrato_inicioPagamento" label="Início do Pagamento" value="" disabled="{{ _lockFields }}" placeholder="dd/MM/aaaa"></vaadin-date-picker>
                                                </div>

                                                <div class="col-md-2">
                                                    <vaadin-text-field id="rentingContrato_noPagamentos" name="rentingContrato_noPagamentos" label="Nº de Pagamentos" value="" disabled="{{ _lockFields }}" type="number" class="alignRight"></vaadin-text-field>
                                                </div>
                                            </div>

                                            <div class="row break_clear">
                                                <div class="col-md-2">
                                                    <such-selectbox id="rentingContrato_idPeriodicidade" name="rentingContrato_idPeriodicidade" value="" label="Periodícidade"
                                                                    items="[[ListaRentingPeriodicidade]]"
                                                                    text-path="value"
                                                                    value-path="id"
                                                                    fields='[{"field":"value", "name":"Periodícidade"}]'
                                                                    disabled="{{ _lockFields }}">
                                                    </such-selectbox>
                                                </div>

                                                <div class="col-md-2">
                                                    <vaadin-text-field id="rentingContrato_totalSemIVA" name="rentingContrato_totalSemIVA" label="Total s/ IVA" value="" disabled="{{ _lockFields }}" class="alignRight"><div slot="suffix">€</div></vaadin-text-field>
                                                </div>

                                                <div class="col-md-2">
                                                    <vaadin-text-field id="rentingContrato_iva" name="rentingContrato_iva" label="IVA" value="" disabled="{{ _lockFields }}" class="alignRight"><div slot="suffix">€</div></vaadin-text-field>
                                                </div>

                                                <div class="col-md-2">
                                                    <vaadin-text-field id="rentingContrato_totalComIVA" name="rentingContrato_totalComIVA" label="Total c/ IVA" value="" disabled="{{ _lockFields }}" class="alignRight"><div slot="suffix">€</div></vaadin-text-field>
                                                </div>

                                                <div class="col-md-2">
                                                    <vaadin-text-field id="rentingContrato_franquiaSemIVA" name="rentingContrato_franquiaSemIVA" label="Franquia s/ IVA" value="" disabled="{{ _lockFields }}" class="alignRight"><div slot="suffix">€</div></vaadin-text-field>
                                                </div>

                                                <div class="col-md-2">
                                                    <vaadin-text-field id="rentingContrato_responsavelContrato" name="rentingContrato_responsavelContrato" label="Responsável" value="" disabled="{{ _lockFields }}" maxlength="200"></vaadin-text-field>
                                                </div>
                                            </div>

                                            <div class="row break_clear">
                                                <div class="col-md-6">
                                                    <vaadin-text-field id="rentingContrato_observacoes" name="rentingContrato_observacoes" label="Observações" value="" disabled="{{ _lockFields }}" maxlength="200"></vaadin-text-field>
                                                </div>

                                                <div class="col-md-1" style="padding-top:15px">
                                                    <paper-button raised id="btn_createRentingContrato" class="btnSave" on-tap="_createRentingContrato" disabled="{{ _lockFields }}"><i class="fa fa-plus" aria-hidden="true"></i>&nbsp; Criar</paper-button>
                                                </div>
                                            </div>
                                        </paper-collapse-item>
                                    </div>
                                </div>

                                <!--RentingContratoAlteracoes-->
                                <div hidden="{{ _isCreate }}">
                                    <paper-collapse-item class="panel-heading" header="Alterações ao Contrato" closed>
                                        <vaadin-grid id="gridRentingContratoAlteracoes" aria-label="gridRentingContratoAlteracoes" items="{{ tabRentingContratoAlteracoes }}" class="grid" multi-sort="true" column-reordering-allowed>
                                            <vaadin-grid-column resizable width="150px">
                                                <template class="header">
                                                    <vaadin-grid-sorter path="noContrato">Nº Contrato</vaadin-grid-sorter>
                                                    <vaadin-grid-filter path="noContrato" />
                                                </template>
                                                <template>
                                                    {{item.noContrato}}
                                                </template>
                                            </vaadin-grid-column>

                                            <vaadin-grid-column resizable width="150px">
                                                <template class="header">
                                                    <vaadin-grid-sorter path="dataPedidoTexto">Data do Pedido</vaadin-grid-sorter>
                                                    <vaadin-grid-filter path="dataPedidoTexto" />
                                                </template>
                                                <template>
                                                    {{item.dataPedidoTexto}}
                                                </template>
                                            </vaadin-grid-column>

                                            <vaadin-grid-column resizable width="150px">
                                                <template class="header">
                                                    <vaadin-grid-sorter path="autorizadoFINLOG">Autorizado FINLOG</vaadin-grid-sorter>
                                                    <vaadin-grid-filter path="autorizadoFINLOG" />
                                                </template>
                                                <template>
                                                    {{item.autorizadoFINLOG}}
                                                </template>
                                            </vaadin-grid-column>

                                            <vaadin-grid-column resizable width="150px">
                                                <template class="header">
                                                    <vaadin-grid-sorter path="dataAlteracaoKmTexto">Data Alteração Km</vaadin-grid-sorter>
                                                    <vaadin-grid-filter path="dataAlteracaoKmTexto" />
                                                </template>
                                                <template>
                                                    {{item.dataAlteracaoKmTexto}}
                                                </template>
                                            </vaadin-grid-column>

                                            <vaadin-grid-column resizable width="150px">
                                                <template class="header">
                                                    <vaadin-grid-sorter path="kmAlteracao">Km Alteração</vaadin-grid-sorter>
                                                    <vaadin-grid-filter path="kmAlteracao" />
                                                </template>
                                                <template>
                                                    <div class="alignRight">{{item.kmAlteracao}} km</div>
                                                </template>
                                            </vaadin-grid-column>

                                            <vaadin-grid-column resizable width="150px">
                                                <template class="header">
                                                    <vaadin-grid-sorter path="mensalidadeAlteracao">Mensalidade Alteração</vaadin-grid-sorter>
                                                    <vaadin-grid-filter path="mensalidadeAlteracao" />
                                                </template>
                                                <template>
                                                    {{item.mensalidadeAlteracao}}
                                                </template>
                                            </vaadin-grid-column>

                                            <vaadin-grid-column resizable width="150px">
                                                <template class="header">
                                                    <vaadin-grid-sorter path="observacoes">Observações</vaadin-grid-sorter>
                                                    <vaadin-grid-filter path="observacoes" />
                                                </template>
                                                <template>
                                                    {{item.observacoes}}
                                                </template>
                                            </vaadin-grid-column>

                                            <vaadin-grid-column resizable width="100px">
                                                <template class="header">
                                                </template>
                                                <template>
                                                    <center>
                                                        <paper-button id="btn_deleteRentingContratoAlteracoes" class="btnRemove tableBtn" raised on-tap="_deleteRentingContratoAlteracoes" disabled="{{ _lockFields }}" title="Eliminar"><i class="fa fa-trash" aria-hidden="true"></i></paper-button>
                                                    </center>
                                                </template>
                                            </vaadin-grid-column>
                                        </vaadin-grid>

                                        <div style="padding-left:50px">
                                            <paper-collapse-item class="panel-heading" header="Inserir" closed>
                                                <div class="row break_clear">
                                                    <div class="col-md-2">
                                                        <such-selectbox id="rentingContratoAlteracoes_idRentingContrato" name="rentingContratoAlteracoes_idRentingContrato" value="" label="Nº Contrato"
                                                                        items="[[ListaRentingContrato]]"
                                                                        text-path="value"
                                                                        value-path="id"
                                                                        fields='[{"field":"value", "name":"Nº Contrato"}, {"field":"extra", "name":"Fornecedor"}, {"field":"extra2", "name":"Km Iníciais"}]'
                                                                        required error-message="O campo Nº Contrato é de preenchimento obrigatório"
                                                                        disabled="{{ _lockFields }}">
                                                        </such-selectbox>
                                                    </div>

                                                    <div class="col-md-2">
                                                        <vaadin-date-picker id="rentingContratoAlteracoes_dataPedido" name="rentingContratoAlteracoes_dataPedido" label="Data do Pedido" value="" disabled="{{ _lockFields }}" placeholder="dd/MM/aaaa"></vaadin-date-picker>
                                                    </div>

                                                    <div class="col-md-4">
                                                        <vaadin-text-field id="rentingContratoAlteracoes_autorizadoFINLOG" name="rentingContratoAlteracoes_autorizadoFINLOG" label="Autorizado FINLOG" value="" disabled="{{ _lockFields }}" maxlength="200"></vaadin-text-field>
                                                    </div>

                                                    <div class="col-md-2">
                                                        <vaadin-date-picker id="rentingContratoAlteracoes_dataAlteracaoKm" name="rentingContratoAlteracoes_dataAlteracaoKm" label="Data Alteração Km" value="" disabled="{{ _lockFields }}" placeholder="dd/MM/aaaa"></vaadin-date-picker>
                                                    </div>

                                                    <div class="col-md-2">
                                                        <vaadin-text-field id="rentingContratoAlteracoes_kmAlteracao" name="rentingContratoAlteracoes_kmAlteracao" label="Km Alteração" value="" disabled="{{ _lockFields }}" type="number" class="alignRight"><div slot="suffix">km</div></vaadin-text-field>
                                                    </div>
                                                </div>

                                                <div class="row break_clear">
                                                    <div class="col-md-4">
                                                        <vaadin-text-field id="rentingContratoAlteracoes_mensalidadeAlteracao" name="rentingContratoAlteracoes_mensalidadeAlteracao" label="Mensalidade Alteração" value="" disabled="{{ _lockFields }}" maxlength="200"></vaadin-text-field>
                                                    </div>

                                                    <div class="col-md-7">
                                                        <vaadin-text-field id="rentingContratoAlteracoes_observacoes" name="rentingContratoAlteracoes_observacoes" label="Observações" value="" disabled="{{ _lockFields }}" maxlength="200"></vaadin-text-field>
                                                    </div>

                                                    <div class="col-md-1" style="padding-top:15px">
                                                        <paper-button raised id="btn_createRentingContratoAlteracoes" class="btnSave" on-tap="_createRentingContratoAlteracoes" disabled="{{ _lockFields }}"><i class="fa fa-plus" aria-hidden="true"></i>&nbsp; Criar</paper-button>
                                                    </div>
                                                </div>
                                            </paper-collapse-item>
                                        </div>
                                    </paper-collapse-item>
                                </div>
                            </div>

                            <!--Histórico-->
                            <div>
                                <!--Estado-->
                                <div hidden="{{ _isCreate }}">
                                    <paper-collapse-item class="panel-heading" header="Estado">
                                        <vaadin-grid id="gridEstado" aria-label="gridEstado" items="{{ tabEstado }}" class="grid" multi-sort="true" column-reordering-allowed>
                                            <vaadin-grid-column resizable width="150px">
                                                <template class="header">
                                                    <vaadin-grid-sorter path="estado">Estado</vaadin-grid-sorter>
                                                    <vaadin-grid-filter path="estado" />
                                                </template>
                                                <template>
                                                    {{item.estado}}
                                                </template>
                                            </vaadin-grid-column>

                                            <vaadin-grid-column resizable width="150px">
                                                <template class="header">
                                                    <vaadin-grid-sorter path="dataInicioTexto">Data</vaadin-grid-sorter>
                                                    <vaadin-grid-filter path="dataInicioTexto" />
                                                </template>
                                                <template>
                                                    {{item.dataInicioTexto}}
                                                </template>
                                            </vaadin-grid-column>
                                        </vaadin-grid>
                                    </paper-collapse-item>
                                </div>

                                <!--Dimensões-->
                                <div hidden="{{ _isCreate }}">
                                    <paper-collapse-item class="panel-heading" header="Dimensões">
                                        <vaadin-grid id="gridDimensao" aria-label="gridDimensao" items="{{ tabDimensao }}" class="grid" multi-sort="true" column-reordering-allowed>
                                            <vaadin-grid-column resizable width="150px">
                                                <template class="header">
                                                    <vaadin-grid-sorter path="regiao">Região</vaadin-grid-sorter>
                                                    <vaadin-grid-filter path="regiao" />
                                                </template>
                                                <template>
                                                    {{item.regiao}}
                                                </template>
                                            </vaadin-grid-column>

                                            <vaadin-grid-column resizable width="150px">
                                                <template class="header">
                                                    <vaadin-grid-sorter path="area">Área Funcional</vaadin-grid-sorter>
                                                    <vaadin-grid-filter path="area" />
                                                </template>
                                                <template>
                                                    {{item.area}}
                                                </template>
                                            </vaadin-grid-column>

                                            <vaadin-grid-column resizable width="150px">
                                                <template class="header">
                                                    <vaadin-grid-sorter path="cresp">Centro de Responsabilidade</vaadin-grid-sorter>
                                                    <vaadin-grid-filter path="cresp" />
                                                </template>
                                                <template>
                                                    {{item.cresp}}
                                                </template>
                                            </vaadin-grid-column>

                                            <vaadin-grid-column resizable width="150px">
                                                <template class="header">
                                                    <vaadin-grid-sorter path="dataInicioTexto">Data</vaadin-grid-sorter>
                                                    <vaadin-grid-filter path="dataInicioTexto" />
                                                </template>
                                                <template>
                                                    {{item.dataInicioTexto}}
                                                </template>
                                            </vaadin-grid-column>
                                        </vaadin-grid>
                                    </paper-collapse-item>
                                </div>

                                <!--Parqueamento-->
                                <div hidden="{{ _isCreate }}">
                                    <paper-collapse-item class="panel-heading" header="Parqueamento" closed>
                                        <vaadin-grid id="gridParqueamento" aria-label="gridParqueamento" items="{{ tabParqueamento }}" class="grid" multi-sort="true" column-reordering-allowed>
                                            <vaadin-grid-column resizable width="150px">
                                                <template class="header">
                                                    <vaadin-grid-sorter path="local">Local Parqueamento</vaadin-grid-sorter>
                                                    <vaadin-grid-filter path="local" />
                                                </template>
                                                <template>
                                                    {{item.local}}
                                                </template>
                                            </vaadin-grid-column>

                                            <vaadin-grid-column resizable width="150px">
                                                <template class="header">
                                                    <vaadin-grid-sorter path="dataInicioTexto">Data</vaadin-grid-sorter>
                                                    <vaadin-grid-filter path="dataInicioTexto" />
                                                </template>
                                                <template>
                                                    {{item.dataInicioTexto}}
                                                </template>
                                            </vaadin-grid-column>
                                        </vaadin-grid>
                                    </paper-collapse-item>
                                </div>

                                <!--Propriedade-->
                                <div hidden="{{ _isCreate }}">
                                    <paper-collapse-item class="panel-heading" header="Propriedade" closed>
                                        <vaadin-grid id="gridPropriedade" aria-label="gridPropriedade" items="{{ tabPropriedade }}" class="grid" multi-sort="true" column-reordering-allowed>
                                            <vaadin-grid-column resizable width="150px">
                                                <template class="header">
                                                    <vaadin-grid-sorter path="tipoPropriedade">Tipo de Propriedade</vaadin-grid-sorter>
                                                    <vaadin-grid-filter path="tipoPropriedade" />
                                                </template>
                                                <template>
                                                    {{item.tipoPropriedade}}
                                                </template>
                                            </vaadin-grid-column>

                                            <vaadin-grid-column resizable width="150px">
                                                <template class="header">
                                                    <vaadin-grid-sorter path="propriedade">Propriedade</vaadin-grid-sorter>
                                                    <vaadin-grid-filter path="propriedade" />
                                                </template>
                                                <template>
                                                    {{item.propriedade}}
                                                </template>
                                            </vaadin-grid-column>

                                            <vaadin-grid-column resizable width="150px">
                                                <template class="header">
                                                    <vaadin-grid-sorter path="dataInicioTexto">Data Início</vaadin-grid-sorter>
                                                    <vaadin-grid-filter path="dataInicioTexto" />
                                                </template>
                                                <template>
                                                    {{item.dataInicioTexto}}
                                                </template>
                                            </vaadin-grid-column>
                                        </vaadin-grid>
                                    </paper-collapse-item>
                                </div>
                            </div>
                        </iron-pages>
                    </div>
                </div>
            </div>
        </div>

        <paper-dialog id="dlgEstado" modal style="width:300px; height:175px">
            <div class="row break_clear">
                <div class="col-md-12">
                    <vaadin-date-picker label="Data do novo Estado" id="dpStartDateEstado" name="dpStartDateEstado" required error-message="Este campo é obrigatório"></vaadin-date-picker>
                </div>
            </div>
            <div class="buttons">
                <paper-button raised class="btnEdit" on-tap="_novaDataEstado">Nova Data</paper-button>
                <paper-button raised class="btnRemove" on-tap="_closeDlgEstado">Fechar</paper-button>
            </div>
        </paper-dialog>

        <paper-dialog id="dlgDimensao" modal style="width:300px; height:175px">
            <div class="row break_clear">
                <div class="col-md-12">
                    <vaadin-date-picker label="Data da nova Dimensão" id="dpStartDateDimensao" name="dpStartDateDimensao" required error-message="Este campo é obrigatório"></vaadin-date-picker>
                </div>
            </div>
            <div class="buttons">
                <paper-button raised class="btnEdit" on-tap="_novaDataDimensao">Nova Data</paper-button>
                <paper-button raised class="btnRemove" on-tap="_closeDlgDimensao">Fechar</paper-button>
            </div>
        </paper-dialog>

        <paper-dialog id="dlgParqueamento" modal style="width:300px; height:175px">
            <div class="row break_clear">
                <div class="col-md-12 ">
                    <vaadin-date-picker label="Data do novo Parqueamento" id="dpStartDateParqueamento" name="dpStartDateParqueamento" required error-message="Este campo é obrigatório"></vaadin-date-picker>
                </div>
            </div>
            <div class="buttons">
                <paper-button raised class="btnEdit" on-tap="_novaDataParqueamento">Nova Data</paper-button>
                <paper-button raised class="btnRemove" on-tap="_closeDlgParqueamento">Fechar</paper-button>
            </div>
        </paper-dialog>

        <paper-dialog id="dlgPropriedade" modal style="width:300px; height:175px">
            <div class="row break_clear">
                <div class="col-md-12 ">
                    <vaadin-date-picker label="Data da nova Propriedade" id="dpStartDatePropriedade" name="dpStartDatePropriedade" required error-message="Este campo é obrigatório"></vaadin-date-picker>
                </div>
            </div>
            <div class="buttons">
                <paper-button raised class="btnEdit" on-tap="_novaDataPropriedade">Nova Data</paper-button>
                <paper-button raised class="btnRemove" on-tap="_closeDlgPropriedade">Fechar</paper-button>
            </div>
        </paper-dialog>

        <paper-toast id="ToastMessage" duration="4000" horizontalAlign="right" class="toastSuccess">&nbsp;<i class="fa fa-check fa-lg" aria-hidden="true"></i></paper-toast>
        <paper-toast id="ToastError" duration="4000" horizontalAlign="right" class="toastError">&nbsp;<i class="fa fa-exclamation-triangle" aria-hidden="true"></i></paper-toast>

    </template>

    <script>
        document.addEventListener('WebComponentsReady', function () {
            Polymer({
                is: 'x-viaturas2details',
                properties: {
                    _matricula: {
                        type: String,
                        notify: true,
                        value: ""
                    },
                    _areaid: {
                        type: Number,
                        notify: true,
                        value: 0
                    },
                    _permissions: {
                        type: Array
                    },
                    selected: {
                        type: Number,
                        value: 0
                    },
                    _isCreate: {
                        type: Boolean,
                        value: false
                    },
                    _modelo: {
                        type: String,
                        value: ""
                    },
                    _centro: {
                        type: String,
                        value: ""
                    },
                    _propriedade: {
                        type: String,
                        value: ""
                    },
                    _lockFields: {
                        type: Boolean,
                        value: true
                    },
                    _hideRenting: {
                        type: Boolean,
                        value: false
                    },
                    activeItemRentingContrato: {
                        observer: '_rowSelectedRentingContrato'
                    },
                    selectedRentingContrato: {
                        type: Number,
                        value: 0
                    },
                    _lockFields: {
                        type: Boolean,
                        value: true
                    },
                    _viewMenuItems: {
                        type: Array,
                        value: [{ value: 1, description: "Mov. Projeto" }, { value: 2, description: "Mov. Contabilidade" }]
                    },
                },

                ready: function () {
                    //GET PROJECT DATA
                    this.$.page_databound_ajax.body = JSON.stringify({ "matricula": this._matricula });
                    this.$.page_databound_ajax.generateRequest();

                    this.$.page_tabImobilizados_ajax.body = JSON.stringify({ "matricula": this._matricula });
                    this.$.page_tabImobilizados_ajax.generateRequest();
                    this.$.gridImobilizados.clearCache();

                    this.$.page_tabKm_ajax.body = JSON.stringify({ "matricula": this._matricula });
                    this.$.page_tabKm_ajax.generateRequest();
                    this.$.gridKm.clearCache();

                    this.$.page_tabManutencao_ajax.body = JSON.stringify({ "matricula": this._matricula });
                    this.$.page_tabManutencao_ajax.generateRequest();
                    this.$.gridManutencao.clearCache();

                    this.$.page_tabInspecao_ajax.body = JSON.stringify({ "matricula": this._matricula });
                    this.$.page_tabInspecao_ajax.generateRequest();
                    this.$.gridInspecao.clearCache();

                    this.$.page_tabCartaVerde_ajax.body = JSON.stringify({ "matricula": this._matricula });
                    this.$.page_tabCartaVerde_ajax.generateRequest();
                    this.$.gridCartaVerde.clearCache();

                    this.$.page_tabCartaoCombustivel_ajax.body = JSON.stringify({ "matricula": this._matricula });
                    this.$.page_tabCartaoCombustivel_ajax.generateRequest();
                    this.$.gridCartaoCombustivel.clearCache();

                    this.$.page_tabViaVerde_ajax.body = JSON.stringify({ "matricula": this._matricula });
                    this.$.page_tabViaVerde_ajax.generateRequest();
                    this.$.gridViaVerde.clearCache();

                    this.$.page_tabCarTrack_ajax.body = JSON.stringify({ "matricula": this._matricula });
                    this.$.page_tabCarTrack_ajax.generateRequest();
                    this.$.gridCarTrack.clearCache();

                    this.$.page_tabAbastecimentos_ajax.body = JSON.stringify({ "matricula": this._matricula });
                    this.$.page_tabAbastecimentos_ajax.generateRequest();
                    this.$.gridAbastecimentos.clearCache();

                    this.$.page_tabAbate_ajax.body = JSON.stringify({ "matricula": this._matricula });
                    this.$.page_tabAbate_ajax.generateRequest();
                    this.$.gridAbate.clearCache();

                    this.$.page_tabSubstituicao_ajax.body = JSON.stringify({ "matricula": this._matricula });
                    this.$.page_tabSubstituicao_ajax.generateRequest();
                    this.$.gridSubstituicao.clearCache();

                    this.$.page_tabRentingContrato_ajax.body = JSON.stringify({ "matricula": this._matricula });
                    this.$.page_tabRentingContrato_ajax.generateRequest();
                    this.$.gridRentingContrato.clearCache();

                    this.$.page_tabAcidentes_ajax.body = JSON.stringify({ "matricula": this._matricula });
                    this.$.page_tabAcidentes_ajax.generateRequest();
                    this.$.gridAcidentes.clearCache();

                    this.$.page_tabContraOrdenacoes_ajax.body = JSON.stringify({ "matricula": this._matricula });
                    this.$.page_tabContraOrdenacoes_ajax.generateRequest();
                    this.$.gridContraOrdenacoes.clearCache();

                    this.$.page_tabAfetacao_ajax.body = JSON.stringify({ "matricula": this._matricula });
                    this.$.page_tabAfetacao_ajax.generateRequest();
                    this.$.gridAfetacao.clearCache();

                    this.$.page_tabcondutor_ajax.body = JSON.stringify({ "matricula": this._matricula });
                    this.$.page_tabcondutor_ajax.generateRequest();
                    this.$.gridCondutores.clearCache();

                    this.$.page_tabgestor_ajax.body = JSON.stringify({ "matricula": this._matricula });
                    this.$.page_tabgestor_ajax.generateRequest();
                    this.$.gridGestores.clearCache();

                    this.$.page_tabestado_ajax.body = JSON.stringify({ "matricula": this._matricula });
                    this.$.page_tabestado_ajax.generateRequest();
                    this.$.gridEstado.clearCache();

                    this.$.page_tabdimensao_ajax.body = JSON.stringify({ "matricula": this._matricula });
                    this.$.page_tabdimensao_ajax.generateRequest();
                    this.$.gridDimensao.clearCache();

                    this.$.page_tabparqueamento_ajax.body = JSON.stringify({ "matricula": this._matricula });
                    this.$.page_tabparqueamento_ajax.generateRequest();
                    this.$.gridParqueamento.clearCache();

                    this.$.page_tabpropriedade_ajax.body = JSON.stringify({ "matricula": this._matricula });
                    this.$.page_tabpropriedade_ajax.generateRequest();
                    this.$.gridPropriedade.clearCache();

                    this.$.info_uploadimage.addEventListener('upload-response', function (e) {
                        var results = JSON.parse(e.detail.xhr.response);
                        if (results == true) {
                            var msg = document.querySelector("x-viaturas2details");

                            msg._openToast("Imagem gravada com sucesso.");

                            msg.$.page_loadImage_ajax.url = "/Viaturas/loadimage/" + msg._matricula;
                            msg.$.page_loadImage_ajax.generateRequest();
                            msg.$.info_imagem.src = "/Viaturas/loadimage/" + msg._matricula
                        }
                        else {
                            var msg = document.querySelector("x-viaturas2details");
                            msg._openToastError("Só é permitido imagens com extensão jpg.");
                        }
                    });
                },

                _openToast: function (message) {
                    this.$.ToastMessage.text = message;
                    this.$.ToastMessage.open();
                },

                _openToastError: function (message) {
                    this.$.ToastError.text = message;
                    this.$.ToastError.open();
                },

                _goBack: function () {
                    window.location.href = "../Viaturas2/";
                },
                _goToViaturasList: function () {
                    window.location.href = "../Viaturas2";
                },
                _goToViatura: function () {
                    window.location.href = "../DetalhesViatura2/" + this.data.matricula;
                },
                _goRefresh: function () {
                    location.reload();
                },

                _rowSelectedRentingContrato: function (item) {
                    if (item != null) {
                        this.selectedRentingContrato = item.id;

                        this.$.page_tabRentingContratoAlteracoes_ajax.body = JSON.stringify({ "idContrato": this.selectedRentingContrato });
                        this.$.page_tabRentingContratoAlteracoes_ajax.generateRequest();
                        this.$.gridRentingContratoAlteracoes.clearCache();
                    }
                },

                _validateData: function () {
                    var errors = 0;

                    if (this.$.geral_marca.value == null || this.$.geral_marca.value == "") {
                        this.$.geral_marca.validate();
                        errors = errors + 1;
                    }

                    if (this.$.geral_modelo.value == null || this.$.geral_modelo.value == "") {
                        this.$.geral_modelo.validate();
                        errors = errors + 1;
                    }

                    if (this.$.geral_estado.value == null || this.$.geral_estado.value == "") {
                        this.$.geral_estado.validate();
                        errors = errors + 1;
                    }

                    if (this.$.geral_codRegiao.value == null || this.$.geral_codRegiao.value == "") {
                        this.$.geral_codRegiao.validate();
                        errors = errors + 1;
                    }

                    if (this.$.geral_codAreaFuncional.value == null || this.$.geral_codAreaFuncional.value == "") {
                        this.$.geral_codAreaFuncional.validate();
                        errors = errors + 1;
                    }

                    if (this.$.geral_codCentroResponsabilidade.value == null || this.$.geral_codCentroResponsabilidade.value == "") {
                        this.$.geral_codCentroResponsabilidade.validate();
                        errors = errors + 1;
                    }

                    if (this.$.geral_categoria.value == null || this.$.geral_categoria.value == "") {
                        this.$.geral_categoria.validate();
                        errors = errors + 1;
                    }

                    if (this.$.geral_tipo.value == null || this.$.geral_tipo.value == "") {
                        this.$.geral_tipo.validate();
                        errors = errors + 1;
                    }

                    if (this.$.geral_tipoPropriedade.value == null || this.$.geral_tipoPropriedade.value == "") {
                        this.$.geral_tipoPropriedade.validate();
                        errors = errors + 1;
                    }

                    if ((this.$.geral_tipoPropriedade.value == "" || this.$.geral_tipoPropriedade.value == 1 || this.$.geral_tipoPropriedade.value == 2) && (this.$.geral_propriedade.value == null || this.$.geral_propriedade.value == "")) {
                        this.$.geral_propriedade.validate();
                        errors = errors + 1;
                    }

                    //if (this.$.geral_dataAquisicao.value == null || this.$.geral_dataAquisicao.value == "") {
                    //    this.$.geral_dataAquisicao.validate();
                    //    errors = errors + 1;
                    //}

                    if (errors > 0) {
                        this._openToastError("Verifique os dados inseridos.");
                        return false;
                    }

                    return true;
                },

                _create: function () {
                    if (this._validateData()) {
                        this._executeRequest("/Viaturas/CreateViatura2", this.data);
                    }
                },

                //_createParqueamento: function () {
                //    if (this.$.dpStartDateParqueamentoCreate.value != null && this.$.dpStartDateParqueamentoCreate.value != "") {
                //        this.data.dataParqueamento = this.$.dpStartDateParqueamentoCreate.value;
                //        this._executeRequest("/Viaturas/CreateViatura2", this.data);
                //        this.$.dlgParqueamento.close();
                //    }
                //    else {
                //        this.$.dpStartDateParqueamentoCreate.validate();
                //        this._openToastError("O campo Data do novo Parqueamento é de preenchimento obrigatório.");
                //    }
                //},

                _update: function () {
                    if (this.$.geral_estado.value == 1)
                        this._executeRequest("/Viaturas/UpdateViatura2", this.data);
                    else {
                        if (this._validateData()) {
                            this._executeRequest("/Viaturas/UpdateViatura2", this.data);
                        }
                    }
                },

                //_updateParqueamento: function () {
                //    if (this.$.dpStartDateParqueamentoUpdate.value != null && this.$.dpStartDateParqueamentoUpdate.value != "") {
                //        this.data.dataParqueamento = this.$.dpStartDateParqueamentoUpdate.value;
                //        this._executeRequest("/Viaturas/UpdateViatura2", this.data)
                //        this.$.dlgParqueamentoUpdate.close();
                //    }
                //    else {
                //        this.$.dpStartDateParqueamentoUpdate.validate();
                //        this._openToastError("O campo Data do novo Parqueamento é de preenchimento obrigatório.");
                //    }
                //},
                //_closeDlgParqueamentoUpdate: function () {
                //    this.$.dlgParqueamentoUpdate.close();
                //},

                _delete: function () {
                    var viatura = this.data;
                    var ajax_request = this.$.page_delete_ajax;
                    bootbox.confirm({
                        message: "Tem a certeza que pretende eliminar a viatura " + this.data.matricula + " ?",
                        buttons: {
                            confirm: {
                                label: 'Sim',
                                className: 'btn-success'
                            },
                            cancel: {
                                label: 'Não',
                                className: 'btn-danger'
                            }
                        },
                        callback: function (result) {
                            if (result) {
                                ajax_request.body = JSON.stringify(viatura);
                                ajax_request.generateRequest();
                            }
                        }
                    });
                },

                _responseProcessor: function (data) {
                    var self = this;

                    if (data.detail.status === 200) {
                        if (data.detail.url.indexOf("GetViatura") !== -1) {
                            window.data = this.data;

                            if (this._matricula == "") {
                                this._isCreate = true;

                                this.$.tabViatura.selected = "1";

                                this.$.page_loadImage_ajax.generateRequest();

                                this.$.geral_estado.value = 1;
                            }

                            if (this.data.idTipoPropriedade == 2)
                                this._hideRenting = false;
                            else
                                this._hideRenting = true;

                            if (this.data.idEstado == 3 || this.data.idEstado == 4 || this.data.idEstado == 5) {
                                this._lockFields = true;
                            }
                            if ((this._permissions.create == false || this._permissions.update == false) || (this.data.idEstado == 3 || this.data.idEstado == 4 || this.data.idEstado == 5))
                                this._lockFields = true;
                            else
                                this._lockFields = false;

                            this._modelo = this.data.idModelo;
                            this._centro = this.data.codCentroResponsabilidade;
                            this._propriedade = this.data.idPropriedade;

                            this._GetListaModelos();
                            this._GetListaCentros();
                            this._GetListaPropriedades();
                        }

                        else if (data.detail.url.indexOf("Create") !== -1) {
                            this._responseCreateProcessor();
                        }

                        else if (data.detail.url.indexOf("Update") !== -1) {
                            this._responseUpdateProcessor();
                        }
                    } else {
                        this._openToastError("Ocorreu um erro ao criar a viatura.")
                    }
                },

                _responseCreateProcessor: function () {
                    var self = this;
                    if (this.data.eReasonCode == 1) {
                        this._isCreate = false;
                        this._openToast(this.data.eMessage);
                        setTimeout(
                            function () {
                                self._goToViatura();
                            }, 2500);

                    } else {
                        this._openToastError(this.data.eMessage);
                    }
                },

                _responseUpdateProcessor: function () {
                    var self = this;
                    if (this.data.eReasonCode == 1) {
                        this._openToast(this.data.eMessage);

                        this.$.page_databound_ajax.url = "/Viaturas/GetViatura2Details"
                        this.$.page_databound_ajax.body = JSON.stringify({ "matricula": this._matricula });
                        this.$.page_databound_ajax.generateRequest();
                    } else {
                        this._openToastError(this.data.eMessage);
                    }
                },

                _responseDeleteProcessor: function (data) {
                    var self = this;
                    if (data.detail.status === 200) {
                        if (this.deletedData.eReasonCode == 1) {
                            this._openToast(this.deletedData.eMessage);
                            setTimeout(
                                function () {
                                    self._goToViaturasList();
                                }, 2500);
                        } else {
                            this._openToastError(this.deletedData.eMessage);
                        }
                    }
                },

                _executeRequest: function (url, data) {
                    this.$.page_databound_ajax.url = url;
                    this.$.page_databound_ajax.body = JSON.stringify(data);
                    this.$.page_databound_ajax.generateRequest();
                },

                _GetListaModelos: function () {
                    if (this.$.geral_marca.__data.value != "") {
                        this.$.geral_modelo._clearSelection();
                        var marca = this.$.geral_marca.__data.value;

                        this.$.page_GetListaModelos_ajax.body = JSON.stringify(marca);
                        this.$.page_GetListaModelos_ajax.generateRequest();
                    }
                },
                _response_GetListaModelos_Processor: function (result) {
                    this.$.geral_modelo.value = this._modelo;
                    this._modelo = "";
                },

                _GetListaCentros: function () {
                    if (this.$.geral_codAreaFuncional.__data.value != "") {
                        this.$.geral_codCentroResponsabilidade._clearSelection();
                        var codArea = this.$.geral_codAreaFuncional.__data.value;

                        this.$.page_GetListaCentros_ajax.body = JSON.stringify(codArea);
                        this.$.page_GetListaCentros_ajax.generateRequest();
                    }
                },
                _response_GetListaCentros_Processor: function () {
                    this.$.geral_codCentroResponsabilidade.value = this._centro;
                    this._centro = "";
                },

                _GetListaPropriedades: function () {
                    if (this.$.geral_tipoPropriedade.__data.value != "") {
                        this.$.geral_propriedade._clearSelection();
                        var tipoPropriedade = this.$.geral_tipoPropriedade.__data.value;

                        this.$.page_GetListaPropriedades_ajax.body = JSON.stringify(tipoPropriedade);
                        this.$.page_GetListaPropriedades_ajax.generateRequest();
                    }
                },
                _response_GetListaPropriedades_Processor: function () {
                    this.$.geral_propriedade.value = this._propriedade;
                    this._propriedade = "";
                },

                _ConvertDecimals: function (e) {
                    var stringVal = "" + e.target.value;
                    e.target.value = stringVal.replace(",", ".");

                    if (this.$.abastecimentos_litros.value != "" && this.$.abastecimentos_precoUnitario.value != "") {
                        this.$.abastecimentos_precoTotal.value = (parseFloat(this.$.abastecimentos_litros.value) * parseFloat(this.$.abastecimentos_precoUnitario.value)).toFixed(2);
                    }
                },

                _viewMenuItemSelected: function (e) {
                    if (e.detail.value == 0)
                        return;
                    var item = e.detail.value;

                    if (item == null)
                        return;

                    switch (item.value) {
                        case 1:
                            this._openMovimentos();
                            break;
                        case 2:
                            this._openCustos();
                            break;
                    }
                },

                _openMovimentos: function () {
                    window.location.href = "/Viaturas/Viaturas2Movimentos/" + "?matricula=" + this.data.matricula + "&noProjeto=" + this.data.noProjeto;
                },

                _openCustos: function () {
                    window.location.href = "/Viaturas/Viaturas2Custos/" + "?matricula=" + this.data.matricula + "&noProjeto=" + this.data.noProjeto;
                },

                _validateDataImobilizados: function () {
                    var errors = 0;

                    if (this.$.imobilizado_noImobilizado.value == null || this.$.imobilizado_noImobilizado.value == "") {
                        this.$.imobilizado_noImobilizado.validate();
                        errors = errors + 1;
                    }

                    if (errors > 0) {
                        this._openToastError("Verifique os dados inseridos.");
                        return false;
                    }

                    return true;
                },
                _createImobilizados: function () {
                    if (this._validateDataImobilizados()) {
                        this.$.page_CreateViaturas2Imobilizados_ajax.body = JSON.stringify({
                            matricula: this._matricula,
                            noImobilizado: this.$.imobilizado_noImobilizado.value,
                        });
                        this.$.page_CreateViaturas2Imobilizados_ajax.generateRequest();
                        this.$.gridImobilizados.clearCache();
                    }
                },
                _responseCreateViaturas2Imobilizados: function () {
                    if (this.createViaturas2ImobilizadosResult.eReasonCode == 1) {
                        this._openToast(this.createViaturas2ImobilizadosResult.eMessage);

                        this.$.imobilizado_noImobilizado._clearSelection();

                        this.$.page_tabImobilizados_ajax.body = JSON.stringify({ "matricula": this._matricula });
                        this.$.page_tabImobilizados_ajax.generateRequest();
                        this.$.gridImobilizados.clearCache();

                        this.$.page_databound_ajax.body = JSON.stringify({ "matricula": this._matricula });
                        this.$.page_databound_ajax.generateRequest();
                    } else {
                        this._openToastError(this.createViaturas2ImobilizadosResult.eMessage);
                    }
                },

                _validateDataKm: function () {
                    var errors = 0;

                    if (this.$.km_km.value == null || this.$.km_km.value == "") {
                        this.$.km_km.validate();
                        errors = errors + 1;
                    }

                    if (this.$.km_data.value == null || this.$.km_data.value == "") {
                        this.$.km_data.validate();
                        errors = errors + 1;
                    }

                    if (errors > 0) {
                        this._openToastError("Verifique os dados inseridos.");
                        return false;
                    }

                    return true;
                },
                _createKm: function () {
                    if (this._validateDataKm()) {
                        this.$.page_CreateViaturas2Km_ajax.body = JSON.stringify({
                            matricula: this._matricula,
                            km: this.$.km_km.value,
                            data: this.$.km_data.value
                        });
                        this.$.page_CreateViaturas2Km_ajax.generateRequest();
                        this.$.gridKm.clearCache();
                    }
                },
                _responseCreateViaturas2Km: function () {
                    if (this.createViaturas2KmResult.eReasonCode == 1) {
                        this._openToast(this.createViaturas2KmResult.eMessage);

                        this.$.km_km.value = "";
                        this.$.km_data.value = "";

                        this.$.page_tabKm_ajax.body = JSON.stringify({ "matricula": this._matricula });
                        this.$.page_tabKm_ajax.generateRequest();
                        this.$.gridKm.clearCache();

                        this.$.page_databound_ajax.body = JSON.stringify({ "matricula": this._matricula });
                        this.$.page_databound_ajax.generateRequest();
                    } else {
                        this._openToastError(this.createViaturas2KmResult.eMessage);
                    }
                },

                _validateDataManutencao: function () {
                    var errors = 0;

                    if (this.$.manutencao_local.value == null || this.$.manutencao_local.value == "") {
                        this.$.manutencao_local.validate();
                        errors = errors + 1;
                    }

                    if (this.$.manutencao_dataInicio.value == null || this.$.manutencao_dataInicio.value == "") {
                        this.$.manutencao_dataInicio.validate();
                        errors = errors + 1;
                    }

                    if ((this.$.manutencao_dataInicio.value != null && this.$.manutencao_dataInicio.value != "") && (this.$.manutencao_dataFim.value != null && this.$.manutencao_dataFim.value != "")) {
                        var dataInicio = Date.parse(this.$.manutencao_dataInicio.value)
                        var dataFim = Date.parse(this.$.manutencao_dataFim.value)
                        if (dataInicio > dataFim) {
                            this._openToastError("A data Fim tem que ser superior ou igual à data Início.");
                            errors = errors + 1;
                        }
                    }

                    if (errors > 0) {
                        this._openToastError("Verifique os dados inseridos.");
                        return false;
                    }

                    return true;
                },
                _createManutencao: function () {
                    if (this._validateDataManutencao()) {
                        this.$.page_CreateViaturas2Manutencao_ajax.body = JSON.stringify({
                            matricula: this._matricula,
                            local: this.$.manutencao_local.value,
                            dataInicio: this.$.manutencao_dataInicio.value,
                            dataFim: this.$.manutencao_dataFim.value,
                            observacoes: this.$.manutencao_observacoes.value,
                        });
                        this.$.page_CreateViaturas2Manutencao_ajax.generateRequest();
                        this.$.gridManutencao.clearCache();
                    }
                },
                _responseCreateViaturas2Manutencao: function () {
                    if (this.createViaturas2ManutencaoResult.eReasonCode == 1) {
                        this._openToast(this.createViaturas2ManutencaoResult.eMessage);

                        this.$.manutencao_local.value = "";
                        this.$.manutencao_dataInicio.value = "";
                        this.$.manutencao_dataFim.value = "";
                        this.$.manutencao_observacoes.value = "";

                        this.$.page_tabManutencao_ajax.body = JSON.stringify({ "matricula": this._matricula });
                        this.$.page_tabManutencao_ajax.generateRequest();
                        this.$.gridManutencao.clearCache();

                        this.$.page_databound_ajax.body = JSON.stringify({ "matricula": this._matricula });
                        this.$.page_databound_ajax.generateRequest();
                    } else {
                        this._openToastError(this.createViaturas2ManutencaoResult.eMessage);
                    }
                },

                _validateDataInspecao: function () {
                    var errors = 0;

                    if (this.$.inspecao_dataInspecao.value == null || this.$.inspecao_dataInspecao.value == "") {
                        this.$.inspecao_dataInspecao.validate();
                        errors = errors + 1;
                    }

                    if (this.$.inspecao_kmInspecao.value == null || this.$.inspecao_kmInspecao.value == "") {
                        this.$.inspecao_kmInspecao.validate();
                        errors = errors + 1;
                    }

                    if (this.$.inspecao_resultado.value == null || this.$.inspecao_resultado.value == "") {
                        this.$.inspecao_resultado.validate();
                        errors = errors + 1;
                    }

                    if (this.$.inspecao_proximaInspecao.value == null || this.$.inspecao_proximaInspecao.value == "") {
                        this.$.inspecao_proximaInspecao.validate();
                        errors = errors + 1;
                    }

                    if (errors > 0) {
                        this._openToastError("Verifique os dados inseridos.");
                        return false;
                    }

                    return true;
                },
                _createInspecao: function () {
                    if (this._validateDataInspecao()) {
                        this.$.page_CreateViaturas2Inspecao_ajax.body = JSON.stringify({
                            matricula: this._matricula,
                            dataInspecaoTexto: this.$.inspecao_dataInspecao.value,
                            kmInspecao: this.$.inspecao_kmInspecao.value,
                            idResultado: this.$.inspecao_resultado.value,
                            proximaInspecaoTexto: this.$.inspecao_proximaInspecao.value,
                            observacao: this.$.inspecao_observacoes.value
                        });
                        this.$.page_CreateViaturas2Inspecao_ajax.generateRequest();
                        this.$.gridInspecao.clearCache();
                    }
                },
                _responseCreateViaturas2Inspecao: function () {
                    if (this.createViaturas2InspecaoResult.eReasonCode == 1) {
                        this._openToast(this.createViaturas2InspecaoResult.eMessage);

                        this.$.inspecao_dataInspecao.value = "";
                        this.$.inspecao_kmInspecao.value = "";
                        this.$.inspecao_resultado.value = "";
                        this.$.inspecao_proximaInspecao.value = "";
                        this.$.inspecao_observacoes.value = "";

                        this.$.page_tabInspecao_ajax.body = JSON.stringify({ "matricula": this._matricula });
                        this.$.page_tabInspecao_ajax.generateRequest();
                        this.$.gridInspecao.clearCache();

                        this.$.page_databound_ajax.body = JSON.stringify({ "matricula": this._matricula });
                        this.$.page_databound_ajax.generateRequest();
                    } else {
                        this._openToastError(this.createViaturas2InspecaoResult.eMessage);
                    }
                },

                _validateDataCartaVerde: function () {
                    var errors = 0;

                    if (this.$.cartaverde_noApolice.value == null || this.$.cartaverde_noApolice.value == "") {
                        this.$.cartaverde_noApolice.validate();
                        errors = errors + 1;
                    }

                    if (this.$.cartaverde_seguradora.value == null || this.$.cartaverde_seguradora.value == "") {
                        this.$.cartaverde_seguradora.validate();
                        errors = errors + 1;
                    }

                    if (this.$.cartaverde_dataInicio.value == null || this.$.cartaverde_dataInicio.value == "") {
                        this.$.cartaverde_dataInicio.validate();
                        errors = errors + 1;
                    }

                    if ((this.$.cartaverde_dataInicio.value != null && this.$.cartaverde_dataInicio.value != "") && (this.$.cartaverde_dataFim.value != null && this.$.cartaverde_dataFim.value != "")) {
                        var dataInicio = Date.parse(this.$.cartaverde_dataInicio.value)
                        var dataFim = Date.parse(this.$.cartaverde_dataFim.value)
                        if (dataInicio > dataFim) {
                            this._openToastError("A data Fim tem que ser superior ou igual à data Início.");
                            errors = errors + 1;
                        }
                    }

                    if (errors > 0) {
                        this._openToastError("Verifique os dados inseridos.");
                        return false;
                    }

                    return true;
                },
                _createCartaVerde: function () {
                    if (this._validateDataCartaVerde()) {
                        this.$.page_CreateViaturas2CartaVerde_ajax.body = JSON.stringify({
                            matricula: this._matricula,

                            noApolice: this.$.cartaverde_noApolice.value,
                            idSeguradora: this.$.cartaverde_seguradora.value,
                            dataInicio: this.$.cartaverde_dataInicio.value,
                            dataFim: this.$.cartaverde_dataFim.value,
                            valorPremioSeguro: this.$.cartaverde_valorPremioSeguro.value,
                        });
                        this.$.page_CreateViaturas2CartaVerde_ajax.generateRequest();
                        this.$.gridCartaVerde.clearCache();
                    }
                },
                _responseCreateViaturas2CartaVerde: function () {
                    if (this.createViaturas2CartaVerdeResult.eReasonCode == 1) {
                        this._openToast(this.createViaturas2CartaVerdeResult.eMessage);

                        this.$.cartaverde_noApolice.value = "";
                        this.$.cartaverde_seguradora._clearSelection();
                        this.$.cartaverde_dataInicio.value = "";
                        this.$.cartaverde_dataFim.value = "";
                        this.$.cartaverde_valorPremioSeguro.value = "";

                        this.$.page_tabCartaVerde_ajax.body = JSON.stringify({ "matricula": this._matricula });
                        this.$.page_tabCartaVerde_ajax.generateRequest();
                        this.$.gridCartaVerde.clearCache();

                        this.$.page_databound_ajax.body = JSON.stringify({ "matricula": this._matricula });
                        this.$.page_databound_ajax.generateRequest();
                    } else {
                        this._openToastError(this.createViaturas2CartaVerdeResult.eMessage);
                    }
                },

                _validateDataCartaoCombustivel: function () {
                    var errors = 0;

                    if (this.$.cartaoCombustivel_idEmpresa.value == null || this.$.cartaoCombustivel_idEmpresa.value == "") {
                        this.$.cartaoCombustivel_idEmpresa.validate();
                        errors = errors + 1;
                    }

                    if (this.$.cartaoCombustivel_noCartao.value == null || this.$.cartaoCombustivel_noCartao.value == "") {
                        this.$.cartaoCombustivel_noCartao.validate();
                        errors = errors + 1;
                    }

                    if (this.$.cartaoCombustivel_dataInicio.value == null || this.$.cartaoCombustivel_dataInicio.value == "") {
                        this.$.cartaoCombustivel_dataInicio.validate();
                        errors = errors + 1;
                    }

                    if ((this.$.cartaoCombustivel_dataInicio.value != null && this.$.cartaoCombustivel_dataInicio.value != "") && (this.$.cartaoCombustivel_dataFim.value != null && this.$.cartaoCombustivel_dataFim.value != "")) {
                        var dataInicio = Date.parse(this.$.cartaoCombustivel_dataInicio.value)
                        var dataFim = Date.parse(this.$.cartaoCombustivel_dataFim.value)
                        if (dataInicio > dataFim) {
                            this._openToastError("A data Fim tem que ser superior ou igual à data Início.");
                            errors = errors + 1;
                        }
                    }

                    if (errors > 0) {
                        this._openToastError("Verifique os dados inseridos.");
                        return false;
                    }

                    return true;
                },
                _createCartaoCombustivel: function () {
                    if (this._validateDataCartaoCombustivel()) {
                        this.$.page_CreateViaturas2CartaoCombustivel_ajax.body = JSON.stringify({
                            matricula: this._matricula,

                            idEmpresa: this.$.cartaoCombustivel_idEmpresa.value,
                            noCartao: this.$.cartaoCombustivel_noCartao.value,
                            dataInicio: this.$.cartaoCombustivel_dataInicio.value,
                            dataFim: this.$.cartaoCombustivel_dataFim.value,
                            plafon: this.$.cartaoCombustivel_plafon.value,
                        });
                        this.$.page_CreateViaturas2CartaoCombustivel_ajax.generateRequest();
                        this.$.gridCartaoCombustivel.clearCache();
                    }
                },
                _responseCreateViaturas2CartaoCombustivel: function () {
                    if (this.createViaturas2CartaoCombustivelResult.eReasonCode == 1) {
                        this._openToast(this.createViaturas2CartaoCombustivelResult.eMessage);

                        this.$.cartaoCombustivel_idEmpresa._clearSelection();
                        this.$.cartaoCombustivel_noCartao.value = "";
                        this.$.cartaoCombustivel_dataInicio.value = "";
                        this.$.cartaoCombustivel_dataFim.value = "";
                        this.$.cartaoCombustivel_plafon.value = "";

                        this.$.page_tabCartaoCombustivel_ajax.body = JSON.stringify({ "matricula": this._matricula });
                        this.$.page_tabCartaoCombustivel_ajax.generateRequest();
                        this.$.gridCartaoCombustivel.clearCache();

                        this.$.page_databound_ajax.body = JSON.stringify({ "matricula": this._matricula });
                        this.$.page_databound_ajax.generateRequest();
                    } else {
                        this._openToastError(this.createViaturas2CartaoCombustivelResult.eMessage);
                    }
                },

                _validateDataViaVerde: function () {
                    var errors = 0;

                    if (this.$.viaverde_idEmpresa.value == null || this.$.viaverde_idEmpresa.value == "") {
                        this.$.viaverde_idEmpresa.validate();
                        errors = errors + 1;
                    }

                    if (this.$.viaverde_noIdentificador.value == null || this.$.viaverde_noIdentificador.value == "") {
                        this.$.viaverde_noIdentificador.validate();
                        errors = errors + 1;
                    }

                    if (this.$.viaverde_noContrato.value == null || this.$.viaverde_noContrato.value == "") {
                        this.$.viaverde_noContrato.validate();
                        errors = errors + 1;
                    }

                    if (errors > 0) {
                        this._openToastError("Verifique os dados inseridos.");
                        return false;
                    }

                    return true;
                },
                _createViaVerde: function () {
                    if (this._validateDataViaVerde()) {
                        this.$.page_CreateViaturas2ViaVerde_ajax.body = JSON.stringify({
                            matricula: this._matricula,

                            idEmpresa: this.$.viaverde_idEmpresa.value,
                            noIdentificador: this.$.viaverde_noIdentificador.value,
                            noContrato: this.$.viaverde_noContrato.value,
                            data: this.$.viaverde_data.value,
                        });
                        this.$.page_CreateViaturas2ViaVerde_ajax.generateRequest();
                        this.$.gridViaVerde.clearCache();
                    }
                },
                _responseCreateViaturas2ViaVerde: function () {
                    if (this.createViaturas2ViaVerdeResult.eReasonCode == 1) {
                        this._openToast(this.createViaturas2ViaVerdeResult.eMessage);

                        this.$.viaverde_idEmpresa.value = "";
                        this.$.viaverde_noIdentificador.value = "";
                        this.$.viaverde_noContrato.value = "";
                        this.$.viaverde_data.value = "";

                        this.$.page_tabViaVerde_ajax.body = JSON.stringify({ "matricula": this._matricula });
                        this.$.page_tabViaVerde_ajax.generateRequest();
                        this.$.gridViaVerde.clearCache();

                        this.$.page_databound_ajax.body = JSON.stringify({ "matricula": this._matricula });
                        this.$.page_databound_ajax.generateRequest();
                    } else {
                        this._openToastError(this.createViaturas2ViaVerdeResult.eMessage);
                    }
                },

                _validateDataCarTrack: function () {
                    var errors = 0;

                    if (this.$.carTrack_idEmpresa.value == null || this.$.carTrack_idEmpresa.value == "") {
                        this.$.carTrack_idEmpresa.validate();
                        errors = errors + 1;
                    }

                    if (this.$.carTrack_dataInicio.value == null || this.$.carTrack_dataInicio.value == "") {
                        this.$.carTrack_dataInicio.validate();
                        errors = errors + 1;
                    }

                    if ((this.$.carTrack_dataInicio.value != null && this.$.carTrack_dataInicio.value != "") && (this.$.carTrack_dataFim.value != null && this.$.carTrack_dataFim.value != "")) {
                        var dataInicio = Date.parse(this.$.carTrack_dataInicio.value)
                        var dataFim = Date.parse(this.$.carTrack_dataFim.value)
                        if (dataInicio > dataFim) {
                            this._openToastError("A data Fim tem que ser superior ou igual à data Início.");
                            errors = errors + 1;
                        }
                    }

                    if (errors > 0) {
                        this._openToastError("Verifique os dados inseridos.");
                        return false;
                    }

                    return true;
                },
                _createCarTrack: function () {
                    if (this._validateDataCarTrack()) {
                        this.$.page_CreateViaturas2CarTrack_ajax.body = JSON.stringify({
                            matricula: this._matricula,

                            idEmpresa: this.$.carTrack_idEmpresa.value,
                            dataInicio: this.$.carTrack_dataInicio.value,
                            dataFim: this.$.carTrack_dataFim.value,
                        });
                        this.$.page_CreateViaturas2CarTrack_ajax.generateRequest();
                        this.$.gridCarTrack.clearCache();
                    }
                },
                _responseCreateViaturas2CarTrack: function () {
                    if (this.createViaturas2CarTrackResult.eReasonCode == 1) {
                        this._openToast(this.createViaturas2CarTrackResult.eMessage);

                        this.$.carTrack_idEmpresa._clearSelection();
                        this.$.carTrack_dataInicio.value = "";
                        this.$.carTrack_dataFim.value = "";

                        this.$.page_tabCarTrack_ajax.body = JSON.stringify({ "matricula": this._matricula });
                        this.$.page_tabCarTrack_ajax.generateRequest();
                        this.$.gridCarTrack.clearCache();

                        this.$.page_databound_ajax.body = JSON.stringify({ "matricula": this._matricula });
                        this.$.page_databound_ajax.generateRequest();
                    } else {
                        this._openToastError(this.createViaturas2CarTrackResult.eMessage);
                    }
                },

                _validateDataAfetacao: function () {
                    var errors = 0;

                    if (this.$.afetacao_codRegiao.value == null || this.$.afetacao_codRegiao.value == "") {
                        this.$.afetacao_codRegiao.validate();
                        errors = errors + 1;
                    }

                    if (this.$.afetacao_codAreaFuncional.value == null || this.$.afetacao_codAreaFuncional.value == "") {
                        this.$.afetacao_codAreaFuncional.validate();
                        errors = errors + 1;
                    }

                    if (this.$.afetacao_codCentroResponsabilidade.value == null || this.$.afetacao_codCentroResponsabilidade.value == "") {
                        this.$.afetacao_codCentroResponsabilidade.validate();
                        errors = errors + 1;
                    }

                    if (this.$.afetacao_dataInicio.value == null || this.$.afetacao_dataInicio.value == "") {
                        this.$.afetacao_dataInicio.validate();
                        errors = errors + 1;
                    }

                    if ((this.$.afetacao_dataInicio.value != null && this.$.afetacao_dataInicio.value != "") && (this.$.afetacao_dataFim.value != null && this.$.afetacao_dataFim.value != "")) {
                        var dataInicio = Date.parse(this.$.afetacao_dataInicio.value)
                        var dataFim = Date.parse(this.$.afetacao_dataFim.value)
                        if (dataInicio > dataFim) {
                            this._openToastError("A data Fim tem que ser superior ou igual à data Início.");
                            errors = errors + 1;
                        }
                    }

                    if (errors > 0) {
                        this._openToastError("Verifique os dados inseridos.");
                        return false;
                    }

                    return true;
                },
                _createAfetacao: function () {
                    if (this._validateDataAfetacao()) {
                        this.$.page_CreateViaturas2Afetacao_ajax.body = JSON.stringify({
                            matricula: this._matricula,

                            idAreaReal: this.$.afetacao_areaReal.value,
                            localExato: this.$.afetacao_localExato.value,
                            dataInicio: this.$.afetacao_dataInicio.value,
                            dataFim: this.$.afetacao_dataFim.value,
                            codRegiao: this.$.afetacao_codRegiao.value,
                            codAreaFuncional: this.$.afetacao_codAreaFuncional.value,
                            codCentroResponsabilidade: this.$.afetacao_codCentroResponsabilidade.value,
                        });
                        this.$.page_CreateViaturas2Afetacao_ajax.generateRequest();
                        this.$.gridAfetacao.clearCache();
                    }
                },
                _responseCreateViaturas2Afetacao: function () {
                    if (this.createViaturas2AfetacaoResult.eReasonCode == 1) {
                        this._openToast(this.createViaturas2AfetacaoResult.eMessage);

                        this.$.afetacao_areaReal._clearSelection();
                        this.$.afetacao_localExato.value = "";
                        this.$.afetacao_dataInicio.value = "";
                        this.$.afetacao_dataFim.value = "";
                        this.$.afetacao_codRegiao._clearSelection();
                        this.$.afetacao_codAreaFuncional._clearSelection();
                        this.$.afetacao_codCentroResponsabilidade._clearSelection();

                        this.$.page_tabAfetacao_ajax.body = JSON.stringify({ "matricula": this._matricula });
                        this.$.page_tabAfetacao_ajax.generateRequest();
                        this.$.gridAfetacao.clearCache();

                        this.$.page_databound_ajax.body = JSON.stringify({ "matricula": this._matricula });
                        this.$.page_databound_ajax.generateRequest();
                    } else {
                        this._openToastError(this.createViaturas2AfetacaoResult.eMessage);
                    }
                },

                _validateDataAcidentes: function () {
                    var errors = 0;

                    if (this.$.acidentes_local.value == null || this.$.acidentes_local.value == "") {
                        this.$.acidentes_local.validate();
                        errors = errors + 1;
                    }

                    if (this.$.acidentes_data.value == null || this.$.acidentes_data.value == "") {
                        this.$.acidentes_data.validate();
                        errors = errors + 1;
                    }

                    if (this.$.acidentes_idCondutor.value == null || this.$.acidentes_idCondutor.value == "") {
                        this.$.acidentes_idCondutor.validate();
                        errors = errors + 1;
                    }

                    if (errors > 0) {
                        this._openToastError("Verifique os dados inseridos.");
                        return false;
                    }

                    return true;
                },
                _createAcidentes: function () {
                    if (this._validateDataAcidentes()) {
                        this.$.page_CreateViaturas2Acidentes_ajax.body = JSON.stringify({
                            matricula: this._matricula,

                            local: this.$.acidentes_local.value,
                            data: this.$.acidentes_data.value,
                            idCondutor: this.$.acidentes_idCondutor.value,
                            idresponsabilidade: this.$.acidentes_idresponsabilidade.value,
                            observacoes: this.$.acidentes_observacoes.value,
                        });
                        this.$.page_CreateViaturas2Acidentes_ajax.generateRequest();
                        this.$.gridAcidentes.clearCache();
                    }
                },
                _responseCreateViaturas2Acidentes: function () {
                    if (this.createViaturas2AcidentesResult.eReasonCode == 1) {
                        this._openToast(this.createViaturas2AcidentesResult.eMessage);

                        this.$.acidentes_local.value = "";
                        this.$.acidentes_data.value = "";
                        this.$.acidentes_idCondutor._clearSelection();
                        this.$.acidentes_idresponsabilidade._clearSelection();
                        this.$.acidentes_observacoes.value = "";

                        this.$.page_tabAcidentes_ajax.body = JSON.stringify({ "matricula": this._matricula });
                        this.$.page_tabAcidentes_ajax.generateRequest();
                        this.$.gridAcidentes.clearCache();

                        this.$.page_databound_ajax.body = JSON.stringify({ "matricula": this._matricula });
                        this.$.page_databound_ajax.generateRequest();
                    } else {
                        this._openToastError(this.createViaturas2AcidentesResult.eMessage);
                    }
                },

                _validateDataContraOrdenacoes: function () {
                    var errors = 0;

                    if (this.$.contraordenacoes_local.value == null || this.$.contraordenacoes_local.value == "") {
                        this.$.contraordenacoes_local.validate();
                        errors = errors + 1;
                    }

                    if (this.$.contraordenacoes_data.value == null || this.$.contraordenacoes_data.value == "") {
                        this.$.contraordenacoes_data.validate();
                        errors = errors + 1;
                    }

                    if (this.$.contraordenacoes_idCondutor.value == null || this.$.contraordenacoes_idCondutor.value == "") {
                        this.$.contraordenacoes_idCondutor.validate();
                        errors = errors + 1;
                    }

                    if (errors > 0) {
                        this._openToastError("Verifique os dados inseridos.");
                        return false;
                    }

                    return true;
                },
                _createContraOrdenacoes: function () {
                    if (this._validateDataContraOrdenacoes()) {
                        this.$.page_CreateViaturas2ContraOrdenacoes_ajax.body = JSON.stringify({
                            matricula: this._matricula,

                            local: this.$.contraordenacoes_local.value,
                            data: this.$.contraordenacoes_data.value,
                            idCondutor: this.$.contraordenacoes_idCondutor.value,
                            idresponsabilidade: this.$.contraordenacoes_idresponsabilidade.value,
                            valor: this.$.contraordenacoes_valor.value,
                            observacoes: this.$.contraordenacoes_observacoes.value,
                        });
                        this.$.page_CreateViaturas2ContraOrdenacoes_ajax.generateRequest();
                        this.$.gridContraOrdenacoes.clearCache();
                    }
                },
                _responseCreateViaturas2ContraOrdenacoes: function () {
                    if (this.createViaturas2ContraOrdenacoesResult.eReasonCode == 1) {
                        this._openToast(this.createViaturas2ContraOrdenacoesResult.eMessage);

                        this.$.contraordenacoes_local.value = "";
                        this.$.contraordenacoes_data.value = "";
                        this.$.contraordenacoes_idCondutor._clearSelection();
                        this.$.contraordenacoes_idresponsabilidade._clearSelection();
                        this.$.contraordenacoes_valor.value = "";
                        this.$.contraordenacoes_observacoes.value = "";

                        this.$.page_tabContraOrdenacoes_ajax.body = JSON.stringify({ "matricula": this._matricula });
                        this.$.page_tabContraOrdenacoes_ajax.generateRequest();
                        this.$.gridContraOrdenacoes.clearCache();

                        this.$.page_databound_ajax.body = JSON.stringify({ "matricula": this._matricula });
                        this.$.page_databound_ajax.generateRequest();
                    } else {
                        this._openToastError(this.createViaturas2ContraOrdenacoesResult.eMessage);
                    }
                },

                _createCondutor: function () {
                    if (this._validateDataCondutor()) {
                        this.$.page_CreateViaturas2Condutor_ajax.body = JSON.stringify({
                            matricula: this._matricula,
                            idGestor: this.$.condutor_idCondutor.value,
                            dataInicio: this.$.condutor_dataInicio.value,
                            dataFim: this.$.condutor_dataFim.value
                        });
                        this.$.page_CreateViaturas2Condutor_ajax.generateRequest();
                        this.$.gridCondutores.clearCache();
                    }
                },
                _responseCreateViaturas2Condutor: function () {
                    if (this.createViaturas2CondutorResult.eReasonCode == 1) {
                        this._openToast(this.createViaturas2CondutorResult.eMessage);

                        this.$.condutor_idCondutor._clearSelection();
                        this.$.condutor_dataInicio.value = "";
                        this.$.condutor_dataFim.value = "";

                        this.$.page_tabcondutor_ajax.body = JSON.stringify({ "matricula": this._matricula });
                        this.$.page_tabcondutor_ajax.generateRequest();
                        this.$.gridCondutores.clearCache();

                        this.$.page_databound_ajax.body = JSON.stringify({ "matricula": this._matricula });
                        this.$.page_databound_ajax.generateRequest();
                    } else {
                        this._openToastError(this.createViaturas2CondutorResult.eMessage);
                    }
                },

                _validateDataCondutor: function () {
                    var errors = 0;

                    if (this.$.condutor_idCondutor.value == null || this.$.condutor_idCondutor.value == "") {
                        this.$.condutor_idCondutor.validate();
                        errors = errors + 1;
                    }

                    if (this.$.condutor_dataInicio.value == null || this.$.condutor_dataInicio.value == "") {
                        this.$.condutor_dataInicio.validate();
                        errors = errors + 1;
                    }

                    if ((this.$.condutor_dataInicio.value != null && this.$.condutor_dataInicio.value != "") && (this.$.condutor_dataFim.value != null && this.$.condutor_dataFim.value != "")) {
                        var dataInicio = Date.parse(this.$.condutor_dataInicio.value)
                        var dataFim = Date.parse(this.$.condutor_dataFim.value)
                        if (dataInicio > dataFim) {
                            this._openToastError("A data Fim tem que ser superior ou igual à data Início.");
                            errors = errors + 1;
                        }
                    }

                    if (errors > 0) {
                        this._openToastError("Verifique os dados inseridos.");
                        return false;
                    }

                    return true;
                },

                _createGestor: function () {
                    if (this._validateDataGestor()) {
                        this.$.page_CreateViaturas2Gestor_ajax.body = JSON.stringify({
                            matricula: this._matricula,
                            idGestor: this.$.gestor_idGestor.value,
                            dataInicio: this.$.gestor_dataInicio.value,
                            dataFim: this.$.gestor_dataFim.value
                        });
                        this.$.page_CreateViaturas2Gestor_ajax.generateRequest();
                        this.$.gridGestores.clearCache();
                    }
                },
                _responseCreateViaturas2Gestor: function () {
                    if (this.createViaturas2GestorResult.eReasonCode == 1) {
                        this._openToast(this.createViaturas2GestorResult.eMessage);

                        this.$.gestor_idGestor._clearSelection();
                        this.$.gestor_dataInicio.value = "";
                        this.$.gestor_dataFim.value = "";

                        this.$.page_tabgestor_ajax.body = JSON.stringify({ "matricula": this._matricula });
                        this.$.page_tabgestor_ajax.generateRequest();
                        this.$.gridGestores.clearCache();

                        this.$.page_databound_ajax.body = JSON.stringify({ "matricula": this._matricula });
                        this.$.page_databound_ajax.generateRequest();
                    } else {
                        this._openToastError(this.createViaturas2GestorResult.eMessage);
                    }
                },

                _validateDataGestor: function () {
                    var errors = 0;

                    if (this.$.gestor_idGestor.value == null || this.$.gestor_idGestor.value == "") {
                        this.$.gestor_idGestor.validate();
                        errors = errors + 1;
                    }

                    if (this.$.gestor_dataInicio.value == null || this.$.gestor_dataInicio.value == "") {
                        this.$.gestor_dataInicio.validate();
                        errors = errors + 1;
                    }

                    if ((this.$.gestor_dataInicio.value != null && this.$.gestor_dataInicio.value != "") && (this.$.gestor_dataFim.value != null && this.$.gestor_dataFim.value != "")) {
                        var dataInicio = Date.parse(this.$.gestor_dataInicio.value)
                        var dataFim = Date.parse(this.$.gestor_dataFim.value)
                        if (dataInicio > dataFim) {
                            this._openToastError("A data Fim tem que ser superior ou igual à data Início.");
                            errors = errors + 1;
                        }
                    }

                    if (errors > 0) {
                        this._openToastError("Verifique os dados inseridos.");
                        return false;
                    }

                    return true;
                },

                _validateDataAbastecimentos: function () {
                    var errors = 0;

                    if (this.$.abastecimentos_data.value == null || this.$.abastecimentos_data.value == "") {
                        this.$.abastecimentos_data.validate();
                        errors = errors + 1;
                    }

                    if (this.$.abastecimentos_litros.value == null || this.$.abastecimentos_litros.value == "") {
                        this.$.abastecimentos_litros.validate();
                        errors = errors + 1;
                    }

                    if (errors > 0) {
                        this._openToastError("Verifique os dados inseridos.");
                        return false;
                    }

                    return true;
                },
                _createAbastecimentos: function () {
                    if (this._validateDataAbastecimentos()) {
                        this.$.page_CreateViaturas2Abastecimentos_ajax.body = JSON.stringify({
                            matricula: this._matricula,

                            data: this.$.abastecimentos_data.value,
                            kms: this.$.abastecimentos_kms.value,
                            litros: this.$.abastecimentos_litros.value,
                            precoUnitario: this.$.abastecimentos_precoUnitario.value,
                            precoTotal: this.$.abastecimentos_precoTotal.value,
                            idCombustivel: this.$.abastecimentos_idCombustivel.value,
                            idEmpresa: this.$.abastecimentos_idEmpresa.value,
                            idCartao: this.$.abastecimentos_idCartao.value,
                            local: this.$.abastecimentos_local.value,
                            idCondutor: this.$.abastecimentos_idCondutor.value,
                            noDocumento: this.$.abastecimentos_noDocumento.value,
                            observacoes: this.$.abastecimentos_observacoes.value,
                        });
                        this.$.page_CreateViaturas2Abastecimentos_ajax.generateRequest();
                        this.$.gridAbastecimentos.clearCache();
                    }
                },
                _responseCreateViaturas2Abastecimentos: function () {
                    if (this.createViaturas2AbastecimentosResult.eReasonCode == 1) {
                        this._openToast(this.createViaturas2AbastecimentosResult.eMessage);

                        this.$.abastecimentos_data.value = "";
                        this.$.abastecimentos_kms.value = "";
                        this.$.abastecimentos_litros.value = "";
                        this.$.abastecimentos_precoUnitario.value = "";
                        this.$.abastecimentos_precoTotal.value = "";
                        this.$.abastecimentos_idCombustivel._clearSelection();
                        this.$.abastecimentos_idEmpresa._clearSelection();
                        this.$.abastecimentos_idCartao._clearSelection();
                        this.$.abastecimentos_local.value = "";
                        this.$.abastecimentos_idCondutor._clearSelection();
                        this.$.abastecimentos_noDocumento.value = "";
                        this.$.abastecimentos_observacoes.value = "";

                        this.$.page_tabAbastecimentos_ajax.body = JSON.stringify({ "matricula": this._matricula });
                        this.$.page_tabAbastecimentos_ajax.generateRequest();
                        this.$.gridAbastecimentos.clearCache();

                        this.$.page_databound_ajax.body = JSON.stringify({ "matricula": this._matricula });
                        this.$.page_databound_ajax.generateRequest();
                    } else {
                        this._openToastError(this.createViaturas2AbastecimentosResult.eMessage);
                    }
                },

                _validateDataAbate: function () {
                    debugger;
                    var errors = 0;

                    if (this.$.abate_idTipoAtoAdministrativo.value == null || this.$.abate_idTipoAtoAdministrativo.value == "") {
                        this.$.abate_idTipoAtoAdministrativo.validate();
                        errors = errors + 1;
                    }

                    if (this.$.abate_idDescricaoAto.value == null || this.$.abate_idDescricaoAto.value == "") {
                        this.$.abate_idDescricaoAto.validate();
                        errors = errors + 1;
                    }

                    if (this.$.abate_data.value == null || this.$.abate_data.value == "") {
                        this.$.abate_data.validate();
                        errors = errors + 1;
                    }

                    if (errors > 0) {
                        this._openToastError("Verifique os dados inseridos.");
                        return false;
                    }

                    return true;
                },
                _createAbate: function () {
                    debugger;
                    if (this._validateDataAbate()) {
                        this.$.page_CreateViaturas2Abate_ajax.body = JSON.stringify({
                            matricula: this._matricula,

                            idTipoAtoAdministrativo: this.$.abate_idTipoAtoAdministrativo.value,
                            noRegisto: this.$.abate_noRegisto.value,
                            idDescricaoAto: this.$.abate_idDescricaoAto.value,
                            fundamentacao: this.$.abate_fundamentacao.value,
                            autor: this.$.abate_autor.value,
                            data: this.$.abate_data.value,
                        });
                        this.$.page_CreateViaturas2Abate_ajax.generateRequest();
                        this.$.gridAbate.clearCache();
                    }
                },
                _responseCreateViaturas2Abate: function () {
                    debugger;
                    if (this.createViaturas2AbateResult.eReasonCode == 1) {
                        this._openToast(this.createViaturas2AbateResult.eMessage);

                        this.$.abate_idTipoAtoAdministrativo._clearSelection();
                        this.$.abate_noRegisto.value = "";
                        this.$.abate_idDescricaoAto._clearSelection();
                        this.$.abate_fundamentacao.value = "";
                        this.$.abate_autor.value = "";
                        this.$.abate_data.value = "";

                        this.$.page_tabAbate_ajax.body = JSON.stringify({ "matricula": this._matricula });
                        this.$.page_tabAbate_ajax.generateRequest();
                        this.$.gridAbate.clearCache();

                        this.$.page_databound_ajax.body = JSON.stringify({ "matricula": this._matricula });
                        this.$.page_databound_ajax.generateRequest();
                    } else {
                        this._openToastError(this.createViaturas2AbateResult.eMessage);
                    }
                },

                _validateDataSubstituicao: function () {
                    var errors = 0;

                    if (this.$.substituicao_matriculaSubstituicao.value == null || this.$.substituicao_matriculaSubstituicao.value == "") {
                        this.$.substituicao_matriculaSubstituicao.validate();
                        errors = errors + 1;
                    }

                    if (this.$.substituicao_dataInicio.value == null || this.$.substituicao_dataInicio.value == "") {
                        this.$.substituicao_dataInicio.validate();
                        errors = errors + 1;
                    }

                    if ((this.$.substituicao_dataInicio.value != null && this.$.substituicao_dataInicio.value != "") && (this.$.substituicao_dataFim.value != null && this.$.substituicao_dataFim.value != "")) {
                        var dataInicio = Date.parse(this.$.substituicao_dataInicio.value)
                        var dataFim = Date.parse(this.$.substituicao_dataFim.value)
                        if (dataInicio > dataFim) {
                            this._openToastError("A data Fim tem que ser superior ou igual à data Início.");
                            errors = errors + 1;
                        }
                    }

                    if (errors > 0) {
                        this._openToastError("Verifique os dados inseridos.");
                        return false;
                    }

                    return true;
                },
                _createSubstituicao: function () {
                    if (this._validateDataSubstituicao()) {
                        this.$.page_CreateViaturas2Substituicao_ajax.body = JSON.stringify({
                            matricula: this._matricula,

                            matriculaSubstituicao: this.$.substituicao_matriculaSubstituicao.value,
                            dataInicio: this.$.substituicao_dataInicio.value,
                            kmInicio: this.$.substituicao_kmInicio.value,
                            dataFim: this.$.substituicao_dataFim.value,
                            kmFim: this.$.substituicao_kmFim.value,
                            observacoes: this.$.substituicao_observacoes.value,
                        });
                        this.$.page_CreateViaturas2Substituicao_ajax.generateRequest();
                        this.$.gridSubstituicao.clearCache();
                    }
                },
                _responseCreateViaturas2Substituicao: function () {
                    if (this.createViaturas2SubstituicaoResult.eReasonCode == 1) {
                        this._openToast(this.createViaturas2SubstituicaoResult.eMessage);

                        this.$.substituicao_matriculaSubstituicao.value = "";
                        this.$.substituicao_dataInicio.value = "";
                        this.$.substituicao_kmInicio.value = "";
                        this.$.substituicao_dataFim.value = "";
                        this.$.substituicao_kmFim.value = "";
                        this.$.substituicao_observacoes.value = "";

                        this.$.page_tabSubstituicao_ajax.body = JSON.stringify({ "matricula": this._matricula });
                        this.$.page_tabSubstituicao_ajax.generateRequest();
                        this.$.gridSubstituicao.clearCache();

                        this.$.page_databound_ajax.body = JSON.stringify({ "matricula": this._matricula });
                        this.$.page_databound_ajax.generateRequest();
                    } else {
                        this._openToastError(this.createViaturas2SubstituicaoResult.eMessage);
                    }
                },

                _validateDataRentingContrato: function () {
                    var errors = 0;

                    if (this.$.rentingContrato_idFornecedor.value == null || this.$.rentingContrato_idFornecedor.value == "") {
                        this.$.rentingContrato_idFornecedor.validate();
                        errors = errors + 1;
                    }

                    if (this.$.rentingContrato_noContrato.value == null || this.$.rentingContrato_noContrato.value == "") {
                        this.$.rentingContrato_noContrato.validate();
                        errors = errors + 1;
                    }

                    if (errors > 0) {
                        this._openToastError("Verifique os dados inseridos.");
                        return false;
                    }

                    return true;
                },
                _createRentingContrato: function () {
                    if (this._validateDataRentingContrato()) {
                        this.$.page_CreateViaturas2RentingContrato_ajax.body = JSON.stringify({
                            matricula: this._matricula,

                            idFornecedor: this.$.rentingContrato_idFornecedor.value,
                            noContrato: this.$.rentingContrato_noContrato.value,
                            kmInicio: this.$.rentingContrato_kmInicio.value,
                            kmContratados: this.$.rentingContrato_kmContratados.value,
                            precoKmAdicionalSemIVA: this.$.rentingContrato_precoKmAdicionalSemIVA.value,
                            precoKmNaoPercorridoSemIVA: this.$.rentingContrato_precoKmNaoPercorridoSemIVA.value,
                            kmMaximo: this.$.rentingContrato_kmMaximo.value,
                            dataInicio: this.$.rentingContrato_dataInicio.value,
                            dataTermo: this.$.rentingContrato_dataTermo.value,
                            duracaoContratoMensal: this.$.rentingContrato_duracaoContratoMensal.value,
                            inicioPagamento: this.$.rentingContrato_inicioPagamento.value,
                            noPagamentos: this.$.rentingContrato_noPagamentos.value,
                            idPeriodicidade: this.$.rentingContrato_idPeriodicidade.value,
                            totalSemIVA: this.$.rentingContrato_totalSemIVA.value,
                            iva: this.$.rentingContrato_iva.value,
                            totalComIVA: this.$.rentingContrato_totalComIVA.value,
                            franquiaSemIVA: this.$.rentingContrato_franquiaSemIVA.value,
                            responsavelContrato: this.$.rentingContrato_responsavelContrato.value,
                            observacoes: this.$.rentingContrato_observacoes.value,
                        });
                        this.$.page_CreateViaturas2RentingContrato_ajax.generateRequest();
                        this.$.gridRentingContrato.clearCache();
                    }
                },
                _responseCreateViaturas2RentingContrato: function () {
                    if (this.createViaturas2RentingContratoResult.eReasonCode == 1) {
                        this._openToast(this.createViaturas2RentingContratoResult.eMessage);

                        this.$.rentingContrato_idFornecedor._clearSelection();
                        this.$.rentingContrato_noContrato.value = "";
                        this.$.rentingContrato_kmInicio.value = "";
                        this.$.rentingContrato_kmContratados.value = "";
                        this.$.rentingContrato_precoKmAdicionalSemIVA.value = "";
                        this.$.rentingContrato_precoKmNaoPercorridoSemIVA.value = "";
                        this.$.rentingContrato_kmMaximo.value = "";
                        this.$.rentingContrato_dataInicio.value = "";
                        this.$.rentingContrato_dataTermo.value = "";
                        this.$.rentingContrato_duracaoContratoMensal.value = "";
                        this.$.rentingContrato_inicioPagamento.value = "";
                        this.$.rentingContrato_noPagamentos.value = "";
                        this.$.rentingContrato_idPeriodicidade._clearSelection();
                        this.$.rentingContrato_totalSemIVA.value = "";
                        this.$.rentingContrato_iva.value = "";
                        this.$.rentingContrato_totalComIVA.value = "";
                        this.$.rentingContrato_franquiaSemIVA.value = "";
                        this.$.rentingContrato_responsavelContrato.value = "";
                        this.$.rentingContrato_observacoes.value = "";

                        this.$.page_tabRentingContrato_ajax.body = JSON.stringify({ "matricula": this._matricula });
                        this.$.page_tabRentingContrato_ajax.generateRequest();
                        this.$.gridRentingContrato.clearCache();

                        this.$.page_databound_ajax.body = JSON.stringify({ "matricula": this._matricula });
                        this.$.page_databound_ajax.generateRequest();
                    } else {
                        this._openToastError(this.createViaturas2RentingContratoResult.eMessage);
                    }
                },

                _validateDataRentingContratoAlteracoes: function () {
                    var errors = 0;

                    if (this.$.rentingContratoAlteracoes_idRentingContrato.value == null || this.$.rentingContratoAlteracoes_idRentingContrato.value == "") {
                        this.$.rentingContratoAlteracoes_idRentingContrato.validate();
                        errors = errors + 1;
                    }

                    if (errors > 0) {
                        this._openToastError("Verifique os dados inseridos.");
                        return false;
                    }

                    return true;
                },
                _createRentingContratoAlteracoes: function () {
                    if (this._validateDataRentingContratoAlteracoes()) {
                        this.$.page_CreateViaturas2RentingContratoAlteracoes_ajax.body = JSON.stringify({
                            matricula: this._matricula,

                            idContrato: this.$.rentingContratoAlteracoes_idRentingContrato.value,
                            dataPedido: this.$.rentingContratoAlteracoes_dataPedido.value,
                            autorizadoFINLOG: this.$.rentingContratoAlteracoes_autorizadoFINLOG.value,
                            dataAlteracaoKm: this.$.rentingContratoAlteracoes_dataAlteracaoKm.value,
                            kmAlteracao: this.$.rentingContratoAlteracoes_kmAlteracao.value,
                            mensalidadeAlteracao: this.$.rentingContratoAlteracoes_mensalidadeAlteracao.value,
                            observacoes: this.$.rentingContratoAlteracoes_observacoes.value,
                        });
                        this.$.page_CreateViaturas2RentingContratoAlteracoes_ajax.generateRequest();
                        this.$.gridRentingContratoAlteracoes.clearCache();
                    }
                },
                _responseCreateViaturas2RentingContratoAlteracoes: function () {
                    if (this.createViaturas2RentingContratoAlteracoesResult.eReasonCode == 1) {
                        this._openToast(this.createViaturas2RentingContratoAlteracoesResult.eMessage);

                        this.$.rentingContratoAlteracoes_idRentingContrato._clearSelection();
                        this.$.rentingContratoAlteracoes_dataPedido.value = "";
                        this.$.rentingContratoAlteracoes_autorizadoFINLOG.value = "";
                        this.$.rentingContratoAlteracoes_dataAlteracaoKm.value = "";
                        this.$.rentingContratoAlteracoes_kmAlteracao.value = "";
                        this.$.rentingContratoAlteracoes_mensalidadeAlteracao.value = "";
                        this.$.rentingContratoAlteracoes_observacoes.value = "";

                        this.$.page_tabRentingContratoAlteracoes_ajax.body = JSON.stringify({ "idContrato": this.selectedRentingContrato });
                        this.$.page_tabRentingContratoAlteracoes_ajax.generateRequest();
                        this.$.gridRentingContratoAlteracoes.clearCache();

                        this.$.page_databound_ajax.body = JSON.stringify({ "matricula": this._matricula });
                        this.$.page_databound_ajax.generateRequest();
                    } else {
                        this._openToastError(this.createViaturas2RentingContratoAlteracoesResult.eMessage);
                    }
                },

                _deleteImobilizados: function (e) {
                    if (this._permissions.update == true) {
                        var index = this.tabImobilizados.indexOf(e.model.item);
                        var matricula = this._matricula;
                        var id = e.model.item.id;
                        var Imobilizado = e.model.item.noImobilizado;
                        var ajax_request = this.$.page_DeleteViaturas2Imobilizados_ajax;

                        bootbox.confirm({
                            message: "Tem a certeza que pretende remover a linha do Imobilizado Nº " + Imobilizado + " ?",
                            buttons: {
                                confirm: {
                                    label: 'Sim',
                                    className: 'btn-success'
                                },
                                cancel: {
                                    label: 'Não',
                                    className: 'btn-danger'
                                }
                            },
                            callback: function (deleteImobilizados) {
                                if (deleteImobilizados) {
                                    ajax_request.body = JSON.stringify({
                                        matricula: matricula,
                                        id: id
                                    });
                                    ajax_request.generateRequest();

                                    this.$.gridImobilizados.clearCache();
                                }
                            }
                        });
                    }
                    else {
                        this._openToastError('Não têm permissões para eliminar a linha dos Imobilizados.');
                    }
                },
                _responseDeleteViaturas2Imobilizados: function (e) {
                    setTimeout(function () {
                        bootbox.hideAll();
                    }, 0);

                    if (this.deleteViaturas2ImobilizadosResult.eReasonCode == 1) {
                        this._openToast(this.deleteViaturas2ImobilizadosResult.eMessage);

                        this.$.page_tabImobilizados_ajax.body = JSON.stringify({ "matricula": this._matricula });
                        this.$.page_tabImobilizados_ajax.generateRequest();
                        this.$.gridImobilizados.clearCache();

                        this.$.page_databound_ajax.body = JSON.stringify({ "matricula": this._matricula });
                        this.$.page_databound_ajax.generateRequest();
                    } else {
                        this._openToastError(this.deleteViaturas2ImobilizadosResult.eMessage);
                    }
                },

                _deleteKm: function (e) {
                    if (this._permissions.update == true) {
                        var index = this.tabKm.indexOf(e.model.item);
                        var matricula = this._matricula;
                        var id = e.model.item.id;
                        var km = e.model.item.km;
                        var ajax_request = this.$.page_DeleteViaturas2Km_ajax;

                        bootbox.confirm({
                            message: "Tem a certeza que pretende remover a linha do Km " + km + " ?",
                            buttons: {
                                confirm: {
                                    label: 'Sim',
                                    className: 'btn-success'
                                },
                                cancel: {
                                    label: 'Não',
                                    className: 'btn-danger'
                                }
                            },
                            callback: function (deleteKm) {
                                if (deleteKm) {
                                    ajax_request.body = JSON.stringify({
                                        matricula: matricula,
                                        id: id
                                    });
                                    ajax_request.generateRequest();

                                    this.$.gridKm.clearCache();
                                }
                            }
                        });
                    }
                    else {
                        this._openToastError('Não têm permissões para eliminar Km.');
                    }
                },
                _responseDeleteViaturas2Km: function (e) {
                    setTimeout(function () {
                        bootbox.hideAll();
                    }, 0);

                    if (this.deleteViaturas2KmResult.eReasonCode == 1) {
                        this._openToast(this.deleteViaturas2KmResult.eMessage);

                        this.$.page_tabKm_ajax.body = JSON.stringify({ "matricula": this._matricula });
                        this.$.page_tabKm_ajax.generateRequest();
                        this.$.gridKm.clearCache();

                        this.$.page_databound_ajax.body = JSON.stringify({ "matricula": this._matricula });
                        this.$.page_databound_ajax.generateRequest();
                    } else {
                        this._openToastError(this.deleteViaturas2KmResult.eMessage);
                    }
                },

                _deleteManutencao: function (e) {
                    if (this._permissions.update == true) {
                        var index = this.tabManutencao.indexOf(e.model.item);
                        var matricula = this._matricula;
                        var id = e.model.item.id;
                        var local = e.model.item.local;
                        var ajax_request = this.$.page_DeleteViaturas2Manutencao_ajax;

                        bootbox.confirm({
                            message: "Tem a certeza que pretende remover a Manutenção no local " + local + " ?",
                            buttons: {
                                confirm: {
                                    label: 'Sim',
                                    className: 'btn-success'
                                },
                                cancel: {
                                    label: 'Não',
                                    className: 'btn-danger'
                                }
                            },
                            callback: function (deleteManutencao) {
                                if (deleteManutencao) {
                                    ajax_request.body = JSON.stringify({
                                        matricula: matricula,
                                        id: id
                                    });
                                    ajax_request.generateRequest();

                                    this.$.gridManutencao.clearCache();
                                }
                            }
                        });
                    }
                    else {
                        this._openToastError('Não têm permissões para eliminar Manutenção.');
                    }
                },
                _responseDeleteViaturas2Manutencao: function (e) {
                    setTimeout(function () {
                        bootbox.hideAll();
                    }, 0);

                    if (this.deleteViaturas2ManutencaoResult.eReasonCode == 1) {
                        this._openToast(this.deleteViaturas2ManutencaoResult.eMessage);

                        this.$.page_tabManutencao_ajax.body = JSON.stringify({ "matricula": this._matricula });
                        this.$.page_tabManutencao_ajax.generateRequest();
                        this.$.gridManutencao.clearCache();

                        this.$.page_databound_ajax.body = JSON.stringify({ "matricula": this._matricula });
                        this.$.page_databound_ajax.generateRequest();
                    } else {
                        this._openToastError(this.deleteViaturas2ManutencaoResult.eMessage);
                    }
                },

                _deleteInspecao: function (e) {
                    if (this._permissions.update == true) {
                        var index = this.tabInspecao.indexOf(e.model.item);
                        var matricula = this._matricula;
                        var id = e.model.item.id;
                        var dataInspecao = e.model.item.dataInspecaoTexto;
                        var ajax_request = this.$.page_DeleteViaturas2Inspecao_ajax;

                        bootbox.confirm({
                            message: "Tem a certeza que pretende remover a Inspeção realizada no dia " + dataInspecao + " ?",
                            buttons: {
                                confirm: {
                                    label: 'Sim',
                                    className: 'btn-success'
                                },
                                cancel: {
                                    label: 'Não',
                                    className: 'btn-danger'
                                }
                            },
                            callback: function (deleteInspecao) {
                                if (deleteInspecao) {
                                    ajax_request.body = JSON.stringify({
                                        matricula: matricula,
                                        id: id
                                    });
                                    ajax_request.generateRequest();

                                    this.$.gridInspecao.clearCache();
                                }
                            }
                        });
                    }
                    else {
                        this._openToastError('Não têm permissões para eliminar Inspeções.');
                    }
                },
                _responseDeleteViaturas2Inspecao: function (e) {
                    setTimeout(function () {
                        bootbox.hideAll();
                    }, 0);

                    if (this.deleteViaturas2InspecaoResult.eReasonCode == 1) {
                        this._openToast(this.deleteViaturas2InspecaoResult.eMessage);

                        this.$.page_tabInspecao_ajax.body = JSON.stringify({ "matricula": this._matricula });
                        this.$.page_tabInspecao_ajax.generateRequest();
                        this.$.gridInspecao.clearCache();

                        this.$.page_databound_ajax.body = JSON.stringify({ "matricula": this._matricula });
                        this.$.page_databound_ajax.generateRequest();
                    } else {
                        this._openToastError(this.deleteViaturas2InspecaoResult.eMessage);
                    }
                },

                _deleteCartaVerde: function (e) {
                    if (this._permissions.update == true) {
                        var index = this.tabCartaVerde.indexOf(e.model.item);
                        var matricula = this._matricula;
                        var id = e.model.item.id;
                        var noApolice = e.model.item.noApolice;
                        var ajax_request = this.$.page_DeleteViaturas2CartaVerde_ajax;

                        bootbox.confirm({
                            message: "Tem a certeza que pretende remover a Carta Verde com o Nº de Apólice " + noApolice + " ?",
                            buttons: {
                                confirm: {
                                    label: 'Sim',
                                    className: 'btn-success'
                                },
                                cancel: {
                                    label: 'Não',
                                    className: 'btn-danger'
                                }
                            },
                            callback: function (deleteCartaVerde) {
                                if (deleteCartaVerde) {
                                    ajax_request.body = JSON.stringify({
                                        matricula: matricula,
                                        id: id
                                    });
                                    ajax_request.generateRequest();

                                    this.$.gridCartaVerde.clearCache();
                                }
                            }
                        });
                    }
                    else {
                        this._openToastError('Não têm permissões para eliminar Cartas Verdes.');
                    }
                },
                _responseDeleteViaturas2CartaVerde: function (e) {
                    setTimeout(function () {
                        bootbox.hideAll();
                    }, 0);

                    if (this.deleteViaturas2CartaVerdeResult.eReasonCode == 1) {
                        this._openToast(this.deleteViaturas2CartaVerdeResult.eMessage);

                        this.$.page_tabCartaVerde_ajax.body = JSON.stringify({ "matricula": this._matricula });
                        this.$.page_tabCartaVerde_ajax.generateRequest();
                        this.$.gridCartaVerde.clearCache();

                        this.$.page_databound_ajax.body = JSON.stringify({ "matricula": this._matricula });
                        this.$.page_databound_ajax.generateRequest();
                    } else {
                        this._openToastError(this.deleteViaturas2CartaVerdeResult.eMessage);
                    }
                },

                _deleteCartaoCombustivel: function (e) {
                    if (this._permissions.update == true) {
                        var index = this.tabCartaoCombustivel.indexOf(e.model.item);
                        var matricula = this._matricula;
                        var id = e.model.item.id;
                        var empresa = e.model.item.empresa;
                        var ajax_request = this.$.page_DeleteViaturas2CartaoCombustivel_ajax;

                        bootbox.confirm({
                            message: "Tem a certeza que pretende remover a linha de Cartão de Combústivel da empresa " + empresa + " ?",
                            buttons: {
                                confirm: {
                                    label: 'Sim',
                                    className: 'btn-success'
                                },
                                cancel: {
                                    label: 'Não',
                                    className: 'btn-danger'
                                }
                            },
                            callback: function (deleteCartaoCombustivel) {
                                if (deleteCartaoCombustivel) {
                                    ajax_request.body = JSON.stringify({
                                        matricula: matricula,
                                        id: id
                                    });
                                    ajax_request.generateRequest();

                                    this.$.gridCartaoCombustivel.clearCache();
                                }
                            }
                        });
                    }
                    else {
                        this._openToastError('Não têm permissões para eliminar a linha do Cartão de Combústivel.');
                    }
                },
                _responseDeleteViaturas2CartaoCombustivel: function (e) {
                    setTimeout(function () {
                        bootbox.hideAll();
                    }, 0);

                    if (this.deleteViaturas2CartaoCombustivelResult.eReasonCode == 1) {
                        this._openToast(this.deleteViaturas2CartaoCombustivelResult.eMessage);

                        this.$.page_tabCartaoCombustivel_ajax.body = JSON.stringify({ "matricula": this._matricula });
                        this.$.page_tabCartaoCombustivel_ajax.generateRequest();
                        this.$.gridCartaoCombustivel.clearCache();

                        this.$.page_databound_ajax.body = JSON.stringify({ "matricula": this._matricula });
                        this.$.page_databound_ajax.generateRequest();
                    } else {
                        this._openToastError(this.deleteViaturas2CartaoCombustivelResult.eMessage);
                    }
                },

                _deleteViaVerde: function (e) {
                    if (this._permissions.update == true) {
                        var index = this.tabViaVerde.indexOf(e.model.item);
                        var matricula = this._matricula;
                        var id = e.model.item.id;
                        var empresa = e.model.item.empresa;
                        var ajax_request = this.$.page_DeleteViaturas2ViaVerde_ajax;

                        bootbox.confirm({
                            message: "Tem a certeza que pretende remover a linha de Via Verde da empresa " + empresa + " ?",
                            buttons: {
                                confirm: {
                                    label: 'Sim',
                                    className: 'btn-success'
                                },
                                cancel: {
                                    label: 'Não',
                                    className: 'btn-danger'
                                }
                            },
                            callback: function (deleteViaVerde) {
                                if (deleteViaVerde) {
                                    ajax_request.body = JSON.stringify({
                                        matricula: matricula,
                                        id: id
                                    });
                                    ajax_request.generateRequest();

                                    this.$.gridViaVerde.clearCache();
                                }
                            }
                        });
                    }
                    else {
                        this._openToastError('Não têm permissões para eliminar a linha de Via Verde.');
                    }
                },
                _responseDeleteViaturas2ViaVerde: function (e) {
                    setTimeout(function () {
                        bootbox.hideAll();
                    }, 0);

                    if (this.deleteViaturas2ViaVerdeResult.eReasonCode == 1) {
                        this._openToast(this.deleteViaturas2ViaVerdeResult.eMessage);

                        this.$.page_tabViaVerde_ajax.body = JSON.stringify({ "matricula": this._matricula });
                        this.$.page_tabViaVerde_ajax.generateRequest();
                        this.$.gridViaVerde.clearCache();

                        this.$.page_databound_ajax.body = JSON.stringify({ "matricula": this._matricula });
                        this.$.page_databound_ajax.generateRequest();
                    } else {
                        this._openToastError(this.deleteViaturas2ViaVerdeResult.eMessage);
                    }
                },

                _deleteCarTrack: function (e) {
                    if (this._permissions.update == true) {
                        var index = this.tabCarTrack.indexOf(e.model.item);
                        var matricula = this._matricula;
                        var id = e.model.item.id;
                        var empresa = e.model.item.empresa;
                        var ajax_request = this.$.page_DeleteViaturas2CarTrack_ajax;

                        bootbox.confirm({
                            message: "Tem a certeza que pretende remover a linha de car Track da empresa " + empresa + " ?",
                            buttons: {
                                confirm: {
                                    label: 'Sim',
                                    className: 'btn-success'
                                },
                                cancel: {
                                    label: 'Não',
                                    className: 'btn-danger'
                                }
                            },
                            callback: function (deleteCarTrack) {
                                if (deleteCarTrack) {
                                    ajax_request.body = JSON.stringify({
                                        matricula: matricula,
                                        id: id
                                    });
                                    ajax_request.generateRequest();

                                    this.$.gridCarTrack.clearCache();
                                }
                            }
                        });
                    }
                    else {
                        this._openToastError('Não têm permissões para eliminar a linha de Car Track.');
                    }
                },
                _responseDeleteViaturas2CarTrack: function (e) {
                    setTimeout(function () {
                        bootbox.hideAll();
                    }, 0);

                    if (this.deleteViaturas2CarTrackResult.eReasonCode == 1) {
                        this._openToast(this.deleteViaturas2CarTrackResult.eMessage);

                        this.$.page_tabCarTrack_ajax.body = JSON.stringify({ "matricula": this._matricula });
                        this.$.page_tabCarTrack_ajax.generateRequest();
                        this.$.gridCarTrack.clearCache();

                        this.$.page_databound_ajax.body = JSON.stringify({ "matricula": this._matricula });
                        this.$.page_databound_ajax.generateRequest();
                    } else {
                        this._openToastError(this.deleteViaturas2CarTrackResult.eMessage);
                    }
                },

                _deleteAfetacao: function (e) {
                    if (this._permissions.update == true) {
                        var index = this.tabAfetacao.indexOf(e.model.item);
                        var matricula = this._matricula;
                        var id = e.model.item.id;
                        var dataInicioTexto = e.model.item.dataInicioTexto;
                        var ajax_request = this.$.page_DeleteViaturas2Afetacao_ajax;

                        bootbox.confirm({
                            message: "Tem a certeza que pretende remover a linha da Afetação com o Data de Início " + dataInicioTexto + " ?",
                            buttons: {
                                confirm: {
                                    label: 'Sim',
                                    className: 'btn-success'
                                },
                                cancel: {
                                    label: 'Não',
                                    className: 'btn-danger'
                                }
                            },
                            callback: function (deleteAfetacao) {
                                if (deleteAfetacao) {
                                    ajax_request.body = JSON.stringify({
                                        matricula: matricula,
                                        id: id
                                    });
                                    ajax_request.generateRequest();

                                    this.$.gridAfetacao.clearCache();
                                }
                            }
                        });
                    }
                    else {
                        this._openToastError('Não têm permissões para eliminar a linha da Afetação.');
                    }
                },
                _responseDeleteViaturas2Afetacao: function (e) {
                    setTimeout(function () {
                        bootbox.hideAll();
                    }, 0);

                    if (this.deleteViaturas2AfetacaoResult.eReasonCode == 1) {
                        this._openToast(this.deleteViaturas2AfetacaoResult.eMessage);

                        this.$.page_tabAfetacao_ajax.body = JSON.stringify({ "matricula": this._matricula });
                        this.$.page_tabAfetacao_ajax.generateRequest();
                        this.$.gridAfetacao.clearCache();

                        this.$.page_databound_ajax.body = JSON.stringify({ "matricula": this._matricula });
                        this.$.page_databound_ajax.generateRequest();
                    } else {
                        this._openToastError(this.deleteViaturas2AfetacaoResult.eMessage);
                    }
                },

                _deleteAcidentes: function (e) {
                    if (this._permissions.update == true) {
                        var index = this.tabAcidentes.indexOf(e.model.item);
                        var matricula = this._matricula;
                        var id = e.model.item.id;
                        var data = e.model.item.dataTexto;
                        var ajax_request = this.$.page_DeleteViaturas2Acidentes_ajax;

                        bootbox.confirm({
                            message: "Tem a certeza que pretende remover o Acidente do dia " + data + " ?",
                            buttons: {
                                confirm: {
                                    label: 'Sim',
                                    className: 'btn-success'
                                },
                                cancel: {
                                    label: 'Não',
                                    className: 'btn-danger'
                                }
                            },
                            callback: function (deleteAcidentes) {
                                if (deleteAcidentes) {
                                    ajax_request.body = JSON.stringify({
                                        matricula: matricula,
                                        id: id
                                    });
                                    ajax_request.generateRequest();

                                    this.$.gridAcidentes.clearCache();
                                }
                            }
                        });
                    }
                    else {
                        this._openToastError('Não têm permissões para eliminar Acidentes.');
                    }
                },
                _responseDeleteViaturas2Acidentes: function (e) {
                    setTimeout(function () {
                        bootbox.hideAll();
                    }, 0);

                    if (this.deleteViaturas2AcidentesResult.eReasonCode == 1) {
                        this._openToast(this.deleteViaturas2AcidentesResult.eMessage);

                        this.$.page_tabAcidentes_ajax.body = JSON.stringify({ "matricula": this._matricula });
                        this.$.page_tabAcidentes_ajax.generateRequest();
                        this.$.gridAcidentes.clearCache();

                        this.$.page_databound_ajax.body = JSON.stringify({ "matricula": this._matricula });
                        this.$.page_databound_ajax.generateRequest();
                    } else {
                        this._openToastError(this.deleteViaturas2AcidentesResult.eMessage);
                    }
                },

                _deleteContraOrdenacoes: function (e) {
                    if (this._permissions.update == true) {
                        var index = this.tabContraOrdenacoes.indexOf(e.model.item);
                        var matricula = this._matricula;
                        var id = e.model.item.id;
                        var data = e.model.item.dataTexto;
                        var ajax_request = this.$.page_DeleteViaturas2ContraOrdenacoes_ajax;

                        bootbox.confirm({
                            message: "Tem a certeza que pretende remover a Contra Ordenação do dia " + data + " ?",
                            buttons: {
                                confirm: {
                                    label: 'Sim',
                                    className: 'btn-success'
                                },
                                cancel: {
                                    label: 'Não',
                                    className: 'btn-danger'
                                }
                            },
                            callback: function (deleteContraOrdenacoes) {
                                if (deleteContraOrdenacoes) {
                                    ajax_request.body = JSON.stringify({
                                        matricula: matricula,
                                        id: id
                                    });
                                    ajax_request.generateRequest();

                                    this.$.gridContraOrdenacoes.clearCache();
                                }
                            }
                        });
                    }
                    else {
                        this._openToastError('Não têm permissões para eliminar Contra Ordenações.');
                    }
                },
                _responseDeleteViaturas2ContraOrdenacoes: function (e) {
                    setTimeout(function () {
                        bootbox.hideAll();
                    }, 0);

                    if (this.deleteViaturas2ContraOrdenacoesResult.eReasonCode == 1) {
                        this._openToast(this.deleteViaturas2ContraOrdenacoesResult.eMessage);

                        this.$.page_tabContraOrdenacoes_ajax.body = JSON.stringify({ "matricula": this._matricula });
                        this.$.page_tabContraOrdenacoes_ajax.generateRequest();
                        this.$.gridContraOrdenacoes.clearCache();

                        this.$.page_databound_ajax.body = JSON.stringify({ "matricula": this._matricula });
                        this.$.page_databound_ajax.generateRequest();
                    } else {
                        this._openToastError(this.deleteViaturas2ContraOrdenacoesResult.eMessage);
                    }
                },

                _openDlgEstado: function () {
                    if (this._isCreate == false && this.$.geral_estado.value != "" && this.data.idEstadoOriginalDB != this.$.geral_estado.value)
                        this.$.dlgEstado.open();
                },
                _openDlgDimensao: function () {
                    if ((this._isCreate == false && this.$.geral_codRegiao.value != "" && this.data.codRegiaoOriginalDB != this.$.geral_codRegiao.value) ||
                        (this._isCreate == false && this.$.geral_codAreaFuncional.value != "" && this.data.codAreaFuncionalOriginalDB != this.$.geral_codAreaFuncional.value) ||
                        (this._isCreate == false && this.$.geral_codCentroResponsabilidade.value != "" && this.data.codCentroResponsabilidadeOriginalDB != this.$.geral_codCentroResponsabilidade.value))

                        this.$.dlgDimensao.open();
                },
                _openDlgParqueamento: function () {
                    if (this._isCreate == false && this.$.geral_localParqueamento.value != "" && this.data.idLocalParqueamentoOriginalDB != this.$.geral_localParqueamento.value)
                        this.$.dlgParqueamento.open();
                },
                _openDlgPropriedade: function () {
                    if (this._isCreate == false && this.$.geral_propriedade.value != "" && this.data.idPropriedadeOriginalDB != this.$.geral_propriedade.value)
                        this.$.dlgPropriedade.open();
                },

                _closeDlgEstado: function () {
                    this.$.geral_estado.value = this.data.idEstadoOriginalDB;
                    this.$.dlgEstado.close();
                },
                _closeDlgDimensao: function () {
                    this.$.geral_codRegiao.value = this.data.codRegiaoOriginalDB;
                    this.$.geral_codAreaFuncional._clearSelection();
                    this.$.geral_codCentroResponsabilidade._clearSelection();
                    this.$.dlgDimensao.close();
                },
                _closeDlgParqueamento: function () {
                    this.$.geral_localParqueamento.value = this.data.idLocalParqueamentoOriginalDB;
                    this.$.dlgParqueamento.close();
                },
                _closeDlgPropriedade: function () {
                    this.$.geral_tipoPropriedade._clearSelection();
                    this.$.geral_propriedade._clearSelection();
                    this.$.dlgPropriedade.close();
                },

                _novaDataEstado: function () {
                    if (this.$.dpStartDateEstado.value == null || this.$.dpStartDateEstado.value == "") {
                        this.$.dpStartDateEstado.validate();
                    }
                    else {
                        if (Date.parse(this.$.dpStartDateEstado.value) > new Date()) {
                            this._openToastError('A Data do Novo Estado não pode ser superior à data atual.');
                        }
                        else {
                            if (Date.parse(this.$.dpStartDateEstado.value) < Date.parse(this.data.dataEstadoLast)) {
                                this._openToastError('A Data do Novo Estado tem que ser superior ou igual á data da ultima mudança da data de Estado.');
                            }
                            else {
                                this.data.dataEstado = this.$.dpStartDateEstado.value;
                                this.$.dlgEstado.close();
                            }
                        }
                    }
                },
                _novaDataDimensao: function () {
                    if (this.$.dpStartDateDimensao.value == null || this.$.dpStartDateDimensao.value == "") {
                        this.$.dpStartDateDimensao.validate();
                    }
                    else {
                        if (Date.parse(this.$.dpStartDateDimensao.value) > new Date()) {
                            this._openToastError('A Data da nova Dimensão não pode ser superior à data atual.');
                        }
                        else {
                            if (Date.parse(this.$.dpStartDateDimensao.value) < Date.parse(this.data.dataDimensaoLast)) {
                                this._openToastError('A Data da nova Dimensão tem que ser superior ou igual á data da ultima mudança da Dimensão.');
                            }
                            else {
                                this.data.dataDimensao = this.$.dpStartDateDimensao.value;
                                this.$.dlgDimensao.close();
                            }
                        }
                    }
                },
                _novaDataParqueamento: function () {
                    if (this.$.dpStartDateParqueamento.value == null || this.$.dpStartDateParqueamento.value == "") {
                        this.$.dpStartDateParqueamento.validate();
                    }
                    else {
                        if (Date.parse(this.$.dpStartDateParqueamento.value) > new Date()) {
                            this._openToastError('A Data da Novo Parqueamento não pode ser superior à data atual.');
                        }
                        else {
                            if (Date.parse(this.$.dpStartDateParqueamento.value) < Date.parse(this.data.dataParqueamentoLast)) {
                                this._openToastError('A Data do Novo Estado tem que ser superior ou igual á data da ultima mudança da data de Parqueamento.');
                            }
                            else {
                                this.data.dataParqueamento = this.$.dpStartDateParqueamento.value;
                                this.$.dlgParqueamento.close();
                            }
                        }
                    }
                },
                _novaDataPropriedade: function () {
                    if (this.$.dpStartDatePropriedade.value == null || this.$.dpStartDatePropriedade.value == "") {
                        this.$.dpStartDatePropriedade.validate();
                    }
                    else {
                        if (Date.parse(this.$.dpStartDatePropriedade.value) > new Date()) {
                            this._openToastError('A Data da Nova Propriedade não pode ser superior à data atual.');
                        }
                        else {
                            if (Date.parse(this.$.dpStartDatePropriedade.value) < Date.parse(this.data.dataPropriedadeLast)) {
                                this._openToastError('A Data do Novo Estado tem que ser superior ou igual á data da ultima mudança da data de Propriedade.');
                            }
                            else {
                                this.data.dataPropriedade = this.$.dpStartDatePropriedade.value;
                                this.$.dlgPropriedade.close();
                            }
                        }
                    }
                },

                _deleteCondutor: function (e) {
                    if (this._permissions.delete == true) {
                        var index = this.tabCondutor.indexOf(e.model.item);
                        var matricula = this._matricula;
                        var id = e.model.item.id;
                        var condutor = e.model.item.gestor;
                        var ajax_request = this.$.page_DeleteViaturas2Condutor_ajax;

                        bootbox.confirm({
                            message: "Tem a certeza que pretende remover o Condutor " + condutor + " ?",
                            buttons: {
                                confirm: {
                                    label: 'Sim',
                                    className: 'btn-success'
                                },
                                cancel: {
                                    label: 'Não',
                                    className: 'btn-danger'
                                }
                            },
                            callback: function (deleteCondutor) {
                                if (deleteCondutor) {
                                    ajax_request.body = JSON.stringify({
                                        matricula: matricula,
                                        id: id
                                    });
                                    ajax_request.generateRequest();

                                    this.$.gridInspecao.clearCache();
                                }
                            }
                        });
                    }
                    else {
                        this._openToastError('Não têm permissões para eliminar Condutores.');
                    }
                },
                _responseDeleteViaturas2Condutor: function (e) {
                    setTimeout(function () {
                        bootbox.hideAll();
                    }, 0);

                    if (this.deleteViaturas2CondutorResult.eReasonCode == 1) {
                        this._openToast(this.deleteViaturas2CondutorResult.eMessage);

                        this.$.page_tabcondutor_ajax.body = JSON.stringify({ "matricula": this._matricula });
                        this.$.page_tabcondutor_ajax.generateRequest();
                        this.$.gridCondutores.clearCache();

                        this.$.page_databound_ajax.body = JSON.stringify({ "matricula": this._matricula });
                        this.$.page_databound_ajax.generateRequest();
                    } else {
                        this._openToastError(this.deleteViaturas2CondutorResult.eMessage);
                    }
                },

                _deleteGestor: function (e) {
                    if (this._permissions.delete == true) {
                        var index = this.tabGestor.indexOf(e.model.item);
                        var matricula = this._matricula;
                        var id = e.model.item.id;
                        var Gestor = e.model.item.gestor;
                        var ajax_request = this.$.page_DeleteViaturas2Gestor_ajax;

                        bootbox.confirm({
                            message: "Tem a certeza que pretende remover o Responsável " + Gestor + " ?",
                            buttons: {
                                confirm: {
                                    label: 'Sim',
                                    className: 'btn-success'
                                },
                                cancel: {
                                    label: 'Não',
                                    className: 'btn-danger'
                                }
                            },
                            callback: function (deleteGestor) {
                                if (deleteGestor) {
                                    ajax_request.body = JSON.stringify({
                                        matricula: matricula,
                                        id: id
                                    });
                                    ajax_request.generateRequest();

                                    this.$.gridInspecao.clearCache();
                                }
                            }
                        });
                    }
                    else {
                        this._openToastError('Não têm permissões para eliminar Responsáveis.');
                    }
                },
                _responseDeleteViaturas2Gestor: function (e) {
                    setTimeout(function () {
                        bootbox.hideAll();
                    }, 0);

                    if (this.deleteViaturas2GestorResult.eReasonCode == 1) {
                        this._openToast(this.deleteViaturas2GestorResult.eMessage);

                        this.$.page_tabgestor_ajax.body = JSON.stringify({ "matricula": this._matricula });
                        this.$.page_tabgestor_ajax.generateRequest();
                        this.$.gridGestores.clearCache();

                        this.$.page_databound_ajax.body = JSON.stringify({ "matricula": this._matricula });
                        this.$.page_databound_ajax.generateRequest();
                    } else {
                        this._openToastError(this.Gestor.eMessage);
                    }
                },

                _deleteAbastecimentos: function (e) {
                    if (this._permissions.delete == true) {
                        var index = this.tabAbastecimentos.indexOf(e.model.item);
                        var matricula = this._matricula;
                        var id = e.model.item.id;
                        var data = e.model.item.dataTexto;
                        var ajax_request = this.$.page_DeleteViaturas2Abastecimentos_ajax;

                        bootbox.confirm({
                            message: "Tem a certeza que pretende remover o Abastecimento com a data" + data + " ?",
                            buttons: {
                                confirm: {
                                    label: 'Sim',
                                    className: 'btn-success'
                                },
                                cancel: {
                                    label: 'Não',
                                    className: 'btn-danger'
                                }
                            },
                            callback: function (deleteAbastecimentos) {
                                if (deleteAbastecimentos) {
                                    ajax_request.body = JSON.stringify({
                                        matricula: matricula,
                                        id: id
                                    });
                                    ajax_request.generateRequest();

                                    this.$.gridInspecao.clearCache();
                                }
                            }
                        });
                    }
                    else {
                        this._openToastError('Não têm permissões para eliminar Abastecimentos.');
                    }
                },
                _responseDeleteViaturas2Abastecimentos: function (e) {
                    setTimeout(function () {
                        bootbox.hideAll();
                    }, 0);

                    if (this.deleteViaturas2AbastecimentosResult.eReasonCode == 1) {
                        this._openToast(this.deleteViaturas2AbastecimentosResult.eMessage);

                        this.$.page_tabAbastecimentos_ajax.body = JSON.stringify({ "matricula": this._matricula });
                        this.$.page_tabAbastecimentos_ajax.generateRequest();
                        this.$.gridAbastecimentoses.clearCache();

                        this.$.page_databound_ajax.body = JSON.stringify({ "matricula": this._matricula });
                        this.$.page_databound_ajax.generateRequest();
                    } else {
                        this._openToastError(this.Abastecimentos.eMessage);
                    }
                },

                _deleteAbate: function (e) {
                    if (this._permissions.delete == true) {
                        var index = this.tabAbate.indexOf(e.model.item);
                        var matricula = this._matricula;
                        var id = e.model.item.id;
                        var data = e.model.item.dataTexto;
                        var ajax_request = this.$.page_DeleteViaturas2Abate_ajax;

                        bootbox.confirm({
                            message: "Tem a certeza que pretende remover o Abate da Data " + data + " ?",
                            buttons: {
                                confirm: {
                                    label: 'Sim',
                                    className: 'btn-success'
                                },
                                cancel: {
                                    label: 'Não',
                                    className: 'btn-danger'
                                }
                            },
                            callback: function (deleteAbate) {
                                if (deleteAbate) {
                                    ajax_request.body = JSON.stringify({
                                        matricula: matricula,
                                        id: id
                                    });
                                    ajax_request.generateRequest();

                                    this.$.gridInspecao.clearCache();
                                }
                            }
                        });
                    }
                    else {
                        this._openToastError('Não têm permissões para eliminar Abates.');
                    }
                },
                _responseDeleteViaturas2Abate: function (e) {
                    setTimeout(function () {
                        bootbox.hideAll();
                    }, 0);

                    if (this.deleteViaturas2AbateResult.eReasonCode == 1) {
                        this._openToast(this.deleteViaturas2AbateResult.eMessage);

                        this.$.page_tabAbate_ajax.body = JSON.stringify({ "matricula": this._matricula });
                        this.$.page_tabAbate_ajax.generateRequest();
                        this.$.gridAbatees.clearCache();

                        this.$.page_databound_ajax.body = JSON.stringify({ "matricula": this._matricula });
                        this.$.page_databound_ajax.generateRequest();
                    } else {
                        this._openToastError(this.Abate.eMessage);
                    }
                },

                _deleteSubstituicao: function (e) {
                    if (this._permissions.delete == true) {
                        var index = this.tabSubstituicao.indexOf(e.model.item);
                        var matricula = this._matricula;
                        var id = e.model.item.id;
                        var matriculaSubstituicao = e.model.item.matriculaSubstituicao;
                        var ajax_request = this.$.page_DeleteViaturas2Substituicao_ajax;

                        bootbox.confirm({
                            message: "Tem a certeza que pretende remover a linha de Substituição da Viatura " + matriculaSubstituicao + " ?",
                            buttons: {
                                confirm: {
                                    label: 'Sim',
                                    className: 'btn-success'
                                },
                                cancel: {
                                    label: 'Não',
                                    className: 'btn-danger'
                                }
                            },
                            callback: function (deleteSubstituicao) {
                                if (deleteSubstituicao) {
                                    ajax_request.body = JSON.stringify({
                                        matricula: matricula,
                                        id: id
                                    });
                                    ajax_request.generateRequest();

                                    this.$.gridInspecao.clearCache();
                                }
                            }
                        });
                    }
                    else {
                        this._openToastError('Não têm permissões para eliminar a linha de Substituição.');
                    }
                },
                _responseDeleteViaturas2Substituicao: function (e) {
                    setTimeout(function () {
                        bootbox.hideAll();
                    }, 0);

                    if (this.deleteViaturas2SubstituicaoResult.eReasonCode == 1) {
                        this._openToast(this.deleteViaturas2SubstituicaoResult.eMessage);

                        this.$.page_tabSubstituicao_ajax.body = JSON.stringify({ "matricula": this._matricula });
                        this.$.page_tabSubstituicao_ajax.generateRequest();
                        this.$.gridSubstituicao.clearCache();

                        this.$.page_databound_ajax.body = JSON.stringify({ "matricula": this._matricula });
                        this.$.page_databound_ajax.generateRequest();
                    } else {
                        this._openToastError(this.Substituicao.eMessage);
                    }
                },

                _deleteRentingContrato: function (e) {
                    if (this._permissions.delete == true) {
                        var index = this.tabRentingContrato.indexOf(e.model.item);
                        var matricula = this._matricula;
                        var id = e.model.item.id;
                        var fornecedor = e.model.item.fornecedor;
                        var ajax_request = this.$.page_DeleteViaturas2RentingContrato_ajax;

                        bootbox.confirm({
                            message: "Tem a certeza que pretende remover a linha do Contrato do fornecedor " + fornecedor + " ?",
                            buttons: {
                                confirm: {
                                    label: 'Sim',
                                    className: 'btn-success'
                                },
                                cancel: {
                                    label: 'Não',
                                    className: 'btn-danger'
                                }
                            },
                            callback: function (deleteRentingContrato) {
                                if (deleteRentingContrato) {
                                    ajax_request.body = JSON.stringify({
                                        matricula: matricula,
                                        id: id
                                    });
                                    ajax_request.generateRequest();

                                    this.$.gridInspecao.clearCache();
                                }
                            }
                        });
                    }
                    else {
                        this._openToastError('Não têm permissões para eliminar a linha do contrato.');
                    }
                },
                _responseDeleteViaturas2RentingContrato: function (e) {
                    setTimeout(function () {
                        bootbox.hideAll();
                    }, 0);

                    if (this.deleteViaturas2RentingContratoResult.eReasonCode == 1) {
                        this._openToast(this.deleteViaturas2RentingContratoResult.eMessage);

                        this.$.page_tabRentingContrato_ajax.body = JSON.stringify({ "matricula": this._matricula });
                        this.$.page_tabRentingContrato_ajax.generateRequest();
                        this.$.gridRentingContratoes.clearCache();

                        this.$.page_databound_ajax.body = JSON.stringify({ "matricula": this._matricula });
                        this.$.page_databound_ajax.generateRequest();
                    } else {
                        this._openToastError(this.RentingContrato.eMessage);
                    }
                },

                _deleteRentingContratoAlteracoes: function (e) {
                    if (this._permissions.delete == true) {
                        var index = this.tabRentingContratoAlteracoes.indexOf(e.model.item);
                        var matricula = this._matricula;
                        var id = e.model.item.id;
                        var noContrato = e.model.item.noContrato;
                        var ajax_request = this.$.page_DeleteViaturas2RentingContratoAlteracoes_ajax;

                        bootbox.confirm({
                            message: "Tem a certeza que pretende remover a linha da Alterações ao Contrato do Nº Contrato " + noContrato + " ?",
                            buttons: {
                                confirm: {
                                    label: 'Sim',
                                    className: 'btn-success'
                                },
                                cancel: {
                                    label: 'Não',
                                    className: 'btn-danger'
                                }
                            },
                            callback: function (deleteRentingContratoAlteracoes) {
                                if (deleteRentingContratoAlteracoes) {
                                    ajax_request.body = JSON.stringify({
                                        matricula: matricula,
                                        id: id
                                    });
                                    ajax_request.generateRequest();

                                    this.$.gridInspecao.clearCache();
                                }
                            }
                        });
                    }
                    else {
                        this._openToastError('Não têm permissões para eliminar a linha do contrato.');
                    }
                },
                _responseDeleteViaturas2RentingContratoAlteracoes: function (e) {
                    setTimeout(function () {
                        bootbox.hideAll();
                    }, 0);

                    if (this.deleteViaturas2RentingContratoAlteracoesResult.eReasonCode == 1) {
                        this._openToast(this.deleteViaturas2RentingContratoAlteracoesResult.eMessage);

                        this.$.page_tabRentingContratoAlteracoes_ajax.body = JSON.stringify({ "idContrato": this.selectedRentingContrato });
                        this.$.page_tabRentingContratoAlteracoes_ajax.generateRequest();
                        this.$.gridRentingContratoAlteracoeses.clearCache();

                        this.$.page_databound_ajax.body = JSON.stringify({ "matricula": this._matricula });
                        this.$.page_databound_ajax.generateRequest();
                    } else {
                        this._openToastError(this.RentingContratoAlteracoes.eMessage);
                    }
                },

                _updateAbastecimentosIDEmpresa: function (e) {
                    this.$.abastecimentos_idEmpresa._clearSelection();
                    this.$.abastecimentos_idEmpresa.disabled = false;

                    if (e != null && e != undefined) {
                        var idCartao = this.$.abastecimentos_idCartao.value;

                        if (idCartao != null && idCartao != "") {
                            this.$.abastecimentos_idEmpresa.disabled = true;

                            if (this.ListaCartaoCombustivelEmpresas != null) {
                                var cartao = this.tabCartaoCombustivel.find(x => x.id == idCartao);

                                if (cartao != null) {
                                    this.$.abastecimentos_idEmpresa.value = cartao.idEmpresa;
                                }
                            }
                        }
                    }
                },

                _responseGetViaturas2TabRentingContrato: function () {
                    if (this.tabRentingContrato != null && this.tabRentingContrato.length > 0) {
                        this.selectedRentingContrato = this.tabRentingContrato[0].id;

                        this.$.page_tabRentingContratoAlteracoes_ajax.body = JSON.stringify({ "idContrato": this.selectedRentingContrato });
                        this.$.page_tabRentingContratoAlteracoes_ajax.generateRequest();
                        this.$.gridRentingContratoAlteracoes.clearCache();

                        this.$.page_ListaRentingContrato_ajax.body = JSON.stringify({ "matricula": this._matricula });
                        this.$.page_ListaRentingContrato_ajax.generateRequest();
                    }
                },

                _EliminarFoto: function (e) {
                    if (this._permissions.create == true) {
                        var matricula = this._matricula;
                        var ajax_request = this.$.page_EliminarFoto_ajax;

                        bootbox.confirm({
                            message: "Tem a certeza que pretende remover a Imagem?",
                            buttons: {
                                confirm: {
                                    label: 'Sim',
                                    className: 'btn-success'
                                },
                                cancel: {
                                    label: 'Não',
                                    className: 'btn-danger'
                                }
                            },
                            callback: function (eliminarFoto) {
                                if (eliminarFoto) {
                                    ajax_request.body = JSON.stringify({
                                        matricula: matricula
                                    });
                                    ajax_request.generateRequest();
                                }
                            }
                        });
                    }
                    else {
                        this._openToastError('Não têm permissões para remover a Imagem.');
                    }
                },

                _responseEliminarFoto: function (data) {
                    setTimeout(function () {
                        bootbox.hideAll();
                    }, 0);

                    if (this.eliminarFotoResult == true) {
                        var msg = document.querySelector("x-viaturas2details");

                        msg._openToast("Imagem removida com sucesso.");
                        msg.$.page_loadImage_ajax.url = "/Viaturas/loadimage/" + msg._matricula;
                        msg.$.page_loadImage_ajax.generateRequest();
                        msg.$.info_imagem.src = "/Viaturas/loadimage/" + msg._matricula
                    } else {
                        this._openToastError('Não foi possivel remover a Imagem.');
                    }
                },
            });
        });
    </script>

</dom-module>
